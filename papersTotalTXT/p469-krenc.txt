BGP Preﬁx Delegations: A Deep Dive

Thomas Krenc

TU Berlin

tkrenc@inet.tu-berlin.de

Anja Feldmann

TU Berlin

anja@inet.tu-berlin.de

ABSTRACT
Among the scalability limits in the Internet routing ecosys-
tem are the BGP routing table size and the rate of updates.
In this paper, we focus on the former. The BGP routing ta-
ble size has been growing superlinearly in the past decades.
Although the address space allocation was structured with
aggregation in mind, this capability is impaired due in part
to the need for trafﬁc engineering. One major impairment
are delegated preﬁxes.

Preﬁx delegations contribute 15% to the routing table size
and they also involve 14% of the trafﬁc. Moreover, they re-
ﬂect the large complexity of BGP: Delegations are not only
the results of providers delegating address space to their cus-
tomers but also vice versa. Some delegations are due to load
balancing and transitive business relationships, others due to
operational practices within organizations.

We analyze BGP data as well as large-scale traceroute
data to understand how delegations affect path selection. Al-
though the need for delegations is apparent, our work high-
lights that the fragmentation of address space is going to
continue and renders the routing table more and more un-
aggregatable.

1.

INTRODUCTION

In the Internet, autonomous systems (AS) have two ways
to obtain routable IPv4 addresses. They can request so-
called provider-independent (PI) address space from their
regional internet registry (RIR), however, IPv4 addresses
are exhausted and new allocations are rare [17]. Another
way to obtain IPv4 addresses is via provider ASes. Provider
ASes sub-allocate so-called provider-aggregatable (PA) ad-
dress space to their customers. This process is often referred
to as preﬁx delegation [8, 20].

Considering the IPv4 address exhaustion and the aggre-

Permission to make digital or hard copies of all or part of this work for personal
or classroom use is granted without fee provided that copies are not made or
distributed for proﬁt or commercial advantage and that copies bear this notice
and the full citation on the ﬁrst page. Copyrights for components of this work
owned by others than the author(s) must be honored. Abstracting with credit is
permitted. To copy otherwise, or republish, to post on servers or to redistribute to
lists, requires prior speciﬁc permission and/or a fee. Request permissions from
permissions@acm.org.
IMC 2016, November 14 - 16, 2016, Santa Monica, CA, USA
c(cid:13) 2016 Copyright held by the owner/author(s). Publication rights licensed to
ACM. ISBN 978-1-4503-4526-2/16/11. . . $15.00
DOI: http://dx.doi.org/10.1145/2987443.2987458

gatability of PA address space, it is surprising that the num-
ber of preﬁxes in routing tables is still increasing. By now
the global BGP routing table contains more than 600,000
IPv4 preﬁxes and has been growing at an annual rate of
roughly 50k [3].

Aggregation of preﬁxes is considered crucial for reducing
the routing table size as well as the rate of BGP updates.
Operators rely on deaggregation and often tolerate the con-
sequent bloat of the routing table to enable services such as
multi-homing and realize trafﬁc engineering [6, 8, 16]. We
conﬁrm that deaggregation is increasingly contributing to
the growth of the routing table [8]. Indeed, today’s heavy
use of deaggregation—by some considered abuse—renders
the routing table more and more un-aggregatable. At the
same time it shows the lack of alternative means to satisfy
the needs of today’s Internet routing system.

A common explanation/observation for deaggregated pre-
ﬁxes leaking into the routing system is the delegation of PA
preﬁxes to a multi-homed AS. Even though the PA preﬁx
can be aggregated by the delegating provider it cannot be
aggregated by other providers. Thus, the preﬁx adds to the
routing table. Moreover, the aggregation by the delegating
provider may lead to undesired routing.

In this paper we focus on such preﬁx delegations by min-
ing ten years of publicly available BGP data. Using traf-
ﬁc data from one of the largest European Internet exchange
points (IXP), we ﬁnd that more than 14% of its trafﬁc is
originating from delegated preﬁxes while 5% of the trafﬁc is
addressed to them.

To better understand preﬁx delegations, we subclassify
delegated preﬁxes into four categories based on the AS path
of preﬁx announcements. We then use large-scale traceroute
measurements to quantify the impact on the actual trafﬁc
ﬂow. To our surprise, we ﬁnd a variety of preﬁx delegations
including from-customer-to-provider or delegations among
ASes that have no apparent topological relation. More specif-
ically, we ﬁnd:

• Around 53% of all delegations concern PA preﬁxes

from provider to customer.

• 10% of delegations are from customer to provider. These

are in the fastest growing delegation class.

• 34% of the delegations are among ASes with no ob-
vious business relationship. While there is no single
reason for such delegations we highlight—using case

469studies—that they can be used for sophisticated trafﬁc
engineering.

Preﬁx delegations are more complex than commonly pre-
sumed. With regard to the routing table growth, this is bad
news. Our ﬁndings highlight that the fragmentation of ad-
dress space is going to continue and that it is not necessarily
aligned with AS relationships.

2. BACKGROUND & RELATED WORK
AS-level Internet and BGP: The Internet consists of more
than 50,000 interconnected autonomous systems (AS). An
AS is a network which is operated as a single administrative
entity. Usually, neighboring ASes have complex contrac-
tual agreements that govern their routing policies. Common
agreements include: provider/customer and peering. Cus-
tomers pay their provider for the trafﬁc (volume) that they
exchange and get access to Internet routes. In a peering rela-
tionship both ASes exchange their trafﬁc and that of their
customers on a settlement-free basis.
In sibling relation-
ships the routing policies are mixtures and the two involved
ASes often belong to the same administrative entity. Al-
though provider/customer and peering make up the major-
ity of business relationships in the Internet, more complex
relationships exist and become more common-place [10].

To exchange routing information ASes use the Border Gate-

way Protocol (BGP), the de-facto standard inter-AS routing
protocol. With BGP ASes selectively originate and for-
ward preﬁx announcements to neighboring ASes. BGP is
a path vector protocol, i.e., whenever an announcement is
forwarded each AS appends its own AS number to the AS
path attribute. The AS path, i.e., a sequence of AS numbers,
is used for loop detection and as distance metric. The AS
that originates the announcement is the origin AS.

Since BGP conﬁguration is error prone, e.g., [7], it is crit-
ical for operators to view the routes they announce. Thus,
BGP collectors, e.g., RIPE RIS and RouteViews, have col-
lected BGP updates, i.e., preﬁx announcements and with-
drawals, over many years. Although the collectors do not
cover the whole AS topology, e.g., [12, 18, 19], the data is
used for many other studies as it is sufﬁcient to infer the AS
graph, e.g., [6, 8–10, 13, 14, 16].
Business relationship inference: Usually, ASes do not dis-
close their speciﬁc routing policies. As a consequence, busi-
ness relationships have to be inferred. Most inference al-
gorithms rely on the assumption that there is no economic
incentive to forward trafﬁc across two peering links or via
a customer. This is captured by the valley free property,
e.g., see [9]. An AS path is valley free if a provider-to-
customer (p2c) or peer-to-peer (p2p) edge is not succeeded
by a customer-to-provider (c2p) or peer-to-peer edge.

One approach, presented by Luckie et al. [14], relies on
the assumption that (i) there is a clique of peering ASes at
the top of the hierarchy, (ii) most customers enter a transit
agreement to be globally reachable and (iii) cycles of p2c
links should not exist to enable routing convergence. In the
same work the authors present multiple methods to infer the

customer cone of an AS; a set of ASes that can be reached
by traversing p2c links only.
Related work: McDaniel et al. [15] use a delegation tree to
study the feasibility of origin authentication. While studying
the growth of the Internet, Sriraman et al. [21] use allocation
data from RIRs and BGP preﬁxes to construct a delegation
hierarchy. Motivated by the increasing routing table size,
Cittadini et al. [8] analyze overlapping preﬁxes, by relying
on BGP data. While their focus is on deaggregation, they in-
fer a widespread use of AS path prepending and scoped ad-
vertisements. Similarly, Bu et al. and Meng et al. [6, 16] use
overlapping preﬁxes and the AS path to infer load balanc-
ing and multi-homing and their impact on the routing table
growth.

3. DATA SOURCES

In this work we use a variety of data sets. We ﬁrst obtain
and clean publicly available BGP data, in order to identify
and classify delegated preﬁxes. Then we use several data
sets from CAIDA to study the relationships among the in-
volved ASes and how delegations affect the trafﬁc ﬂow.
BGP: We download BGP data from BGP collectors main-
tained by RouteViews [5] (rviews) and RIPE RIS [4] (ripe).
Since BGP is a routing protocol and not a measurement tool
the collected data suffers from misconﬁgurations, errors, etc.
It contains artifacts such as unallocated AS numbers, unallo-
cated preﬁxes and poisoned paths, e.g., AS paths with loops.
We clean our data set by removing such announcements. We
also remove announcements from beacon ASes or compati-
bility AS numbers. In addition, we remove prepended ASes
in the AS paths. Contrary to other BGP studies, we keep all
preﬁxes independent of the preﬁx length. We further clean
the data set by removing announcements that are not suit-
able/compatible for the delegation classiﬁcation, see Sec-
tion 4. This includes those with an AS path length less than
two, with AS sets, and with ambiguous information, e.g.,
preﬁxes with multiple origins. The latter affects around 1%
of the overall preﬁxes before cleaning. Table 1 and Figure 1
summarize our data sets before and after cleaning. By merg-
ing the data from ripe and rviews the total number of preﬁxes
increases only slightly. Adding the updates does not sub-
stantially increase the number of preﬁxes either. While data
cleaning does remove some information it does not drasti-
cally reduce the number of preﬁxes in both data sets. For
a longitudinal study we use routing table dump snapshots
which contain the routing information base (RIB) from 2006
to 2016 every 6 months for one day (dhist). To study preﬁx
delegations in January 2016 in more detail we also include
BGP updates (d2016).
CAIDA: We augment our data with AS business relation-
ships using the data from Luckie et al. [14] (dbusiness). It
labels AS pairs as either p2c or p2p. Furthermore, we use
the corresponding customer cone data set [14] (dcone). We
enhance the above data sets with complex AS relationships
from Giotsas et al. [10] (dcomplex) as well as with additional
AS links in IXPs from Giotsas et al. [11] (dmlp). We fur-
ther use CAIDA’s AS-to-organization data set which pro-

470source
ripe
rviews
both

# preﬁxes RIB
635k (-4%)
667k (-4%)
686k (-6%)

# updates
590k (-3%)
597k (-2%)
610k (-4%)

total
644k (-5%)
668k (-4%)
696k (-7%)

Table 1: Overview of BGP data set d2016.
decrease after cleaning.

In parentheses relative

s
e
x
i
f

e
r
p

 
.

m
u
n

5
0
+
e
6

5
0
+
e
4

5
0
+
e
2

raw data
clean data

2006

2008

2010

2012

2014

2016

time in 6−month intervals

Figure 1: Overview of BGP data set dhist.

Py

Pz

Pz'

ASx

ASy

Cdown

ASy

ASz

Px

Px

ASx

Px

announcement

AS link

delegation

ASx

ASy

Cisolated

ASx

ASy

Cup

ASx

ASy

Ccrossed

PTop

PDeleg

Figure 2: Multi-homing example

Figure 3: Delegation classiﬁcation

vides unique organization identiﬁers mapped to AS num-
bers [2] (dorg). Finally, we use large-scale traceroute mea-
surements taken by CAIDA’s Archipelago infrastructure [1]
(dtrace). We obtained these data sets from the same time
period as d2016.

4. PREFIX DELEGATIONS

In this section we describe how we identify and classify
preﬁx delegations. Hereby, we use the following notation:
For a preﬁx Pα, ASα refers to the AS that originates the
preﬁx. P ath(Pα) refers to the set of paths that are recorded
for the preﬁx.

Consider the example of a multi-homed environment where

ASx is a customer of ASy and ASz, see Figure 2. ASz
announces a deaggregated preﬁx. More speciﬁcally, Pz ′ is
deaggregated from Pz and both are announced by the same
ASz. ASx announces a delegated preﬁx, namely Px which
is a subset of Py. Thus, Px is deaggregated from Py and
delegated to/announced by ASx.
Preﬁx classiﬁcation: To identify delegations we classify
preﬁxes based on their overlapping properties and the ori-
gin AS. More speciﬁcally, we ﬁrst check if any two preﬁxes
are subsets of each other, i.e., Px ⊂ Py. If positive, we fur-
ther check if they are announced by the same AS, i.e., ASx
= ASy. Inspired by Cittadini et al. [8] we distinguish the
following preﬁx classes:
Plonely : ∄ P where Plonely ⊂ P ∨ P ⊂ Plonely
Ptop : ∄ P , ∃ P ′ where Ptop ⊂ P ∧ P ′ ⊂ Ptop
Pdeagg : ∃! Ptop where Pdeagg ⊂ Ptop ∧ ASdeagg =AStop
Pdeleg : ∃! Ptop where Pdeleg ⊂ Ptop ∧ ASdeleg 6=AStop

In words, preﬁxes in Plonely do not overlap with any other
preﬁx. Preﬁxes in Ptop are always the less speciﬁc of two
overlapping preﬁxes. The more speciﬁc preﬁxes are either
in Pdeagg or Pdeleg. If two preﬁxes P and P ′ overlap and
P is in Ptop then P ′ must be in Pdeagg or Pdeleg. It is in
Pdeagg if both preﬁxes are announced by the same AS.
If
the preﬁxes are announced by different ASes P ′ is in Pdeleg.
We refer to the AS that is originating P as AStop and the AS
that is originating P ′ either as ASdeleg or ASdeagg. Hereby,
ASdeagg is the same as AStop.
Delegation classiﬁcation: After using the above method to
identify delegations, we next subclassify them into four dif-
ferent classes. We analyze AS paths of each preﬁx in Pdeleg
and of the correspondent less speciﬁc preﬁx in Ptop. Consid-
ering the example of ASy delegating address space to ASx,
as shown in Fig. 2, we check for two properties in the re-
spective AS paths: (i) ASx announces the more speciﬁc pre-
ﬁx via ASy and (ii) while ASy announces the less speciﬁc
one, the announcement does not pass through ASx. Delega-
1. While this is the
tions with these properties are in Cdown
most intuitive, other combinations exist as well, see Figure 3.
Note, this classiﬁcation does not require the existence of an
AS link between both ASes. We distinguish the following
four delegation classes:
Cdown : AStop ∈ P ath(Pdeleg) ∧ ASdeleg /∈ P ath(Ptop).
Cisolated : AStop /∈ P ath(Pdeleg) ∧ ASdeleg /∈ P ath(Ptop).
Cup : AStop /∈ P ath(Pdeleg) ∧ ASdeleg ∈ P ath(Ptop).
Ccrossed : AStop ∈ P ath(Pdeleg) ∧ ASdeleg ∈ P ath(Ptop).
In effect, the class Cup is the opposite of Cdown. In Cup
the delegator announces the less speciﬁc preﬁx via the del-
egatee and the delegatee announces the more speciﬁc preﬁx
but not via the delegator. Cisolated and Ccrossed cover the
two remaining cases. In Cisolated both the delegator and the
delegatee announce their preﬁx separately. In Ccrossed the
delegator announces the less speciﬁc preﬁx via the delegatee
and the delegatee announces the more speciﬁc preﬁx via the
delegator.

5. DELEGATIONS ACROSS 10 YEARS
Using dhist, Figure 4(a) shows how each class of preﬁxes:
Ptop, Plonely, Pdeagg and Pdeleg evolved. All preﬁx classes
have grown at almost constant rate over the past ten years.
In 2006 the number of preﬁxes in Pdeagg was about the same
as those in Pdeleg. In fact, Cittadini et al. [8] show that be-
fore 2006 Pdeleg had an even bigger share of the routing ta-
ble than Pdeagg. The authors conjectured that the increased
popularity of PI address space led to the changes in these
classes. Today, Pdeagg is the fastest growing class—by a
factor of 5.3— and is among the largest classes since 2009.
In January 2016 Pdeleg make up 14.6% of the routing table
size which corresponds to more than 93k preﬁxes, see Ta-
ble 2.

Even though Pdeleg is not growing as fast as some of the
other classes, we consider delegated preﬁxes the most in-
triguing class as they reﬂect the large complexity of BGP;

1The notation Cdown implies the delegation going down the
AS level hierarchy, e.g., from provider to customer.

471lonely

deagg.

deleg.

top

2006

2008

2010

2012

2014

2016

time in 6−month intervals

(a) Preﬁx classes over time.

down

isolated

up

crossed

)
g
o
l
(
 
s
e
x
i
f

e
r
p

 
.

m
u
n

5
0
+
e
2

4
0
+
e
5

4
0
+
e
1

0
0
0
0
5

0
0
0
5

0
0
0
1

)
g
o
l
(
 
s
e
x
i
f

e
r
p

 
.

m
u
n

2006

2008

2010

2012

2014

2016

time in 6−month intervals

(b) Delegation classes over time.

Figure 4: Longitudinal study, dhist: Jan. 2006 to Jan 2016.

Preﬁx class

#Preﬁxes %Preﬁxes

#ASes

Plonely
Pdeagg
Pdeleg
Ptop

252,917
257,244
93,754
40,475

39.2% 38,971
39.9% 11,558
14.6% 13,689
6.3% 12,647

Table 2: Overview of preﬁx classes in d2016.

Delegation class

#Preﬁxes %Preﬁxes

#AS pairs

Cdown
Cisolated

Cup

Ccrossed

56,294
27,016
9,546
898

60.0%
28.8%
10.2%
1.0%

12,427
5,748
1,183
127

Table 3: Overview of delegation classes in d2016.

its numbers have doubled in the past decade. Using dhist,
Figure 4(b) shows how much each of the delegation classes
contribute to this increase. As expected, Cdown has and has
had the largest share with well over 50%. However, Cisolated
is a substantial contributor with more than 20% in the past
decade. The largest increase is seen in the class Cup; it has
grown by a factor of 5.1 over the past ten years. Considering
d2016, we conﬁrm that Cdown is the most common case with
a share of 60%. However, Cisolated and Cup are substantial
with more than 29% and 10%, respectively. The smallest
class, with a contribution of only 1%, is Ccrossed.

6. AS BUSINESS RELATIONSHIPS

The delegations from d2016 involve more than 16k dele-
gators as well as delegatees, emphasizing that delegations
are common practice. Also, they involve more than 19k AS
pairs (delegator to delegatee), see Table 3. We observe that
an AS pair can be involved in more than one delegation type.
Delegation vs. AS size: We explore to which extent the four
delegation classes align with the relative size of the two in-

i

e
z
s
 
e
n
o
c
 
e
e
a
g
e
e
d

t

l

i

e
z
s
 
e
n
o
c
 
e
e
a
g
e
e
d

t

l

0
0
5

0
5

5

1

0
0
0
0
1

0
0
1

0
1

1

i

e
z
s
 
e
n
o
c
 
e
e
a
g
e
e
d

t

l

0
0
0
0
1

0
0
1

0
1

1

10 100

1
delegator cone size

10000

10 100

1
delegator cone size

10000

(a) Cdown

(b) Cup

i

e
z
s
 
e
n
o
c
 
e
e
a
g
e
e
d

t

l

0
0
0
0
1

0
0
1

0
1

1

10 100

1
delegator cone size

10000

10 100

1
delegator cone size

10000

(c) Cisolated

(d) Ccrossed

Figure 5: Heat map per delegation class: delegator cone size vs.
delegatee cone size. The gray scale indicates the density in log
scale.

volved ASes. Hereby, we use the customer cone size as a
proxy for the AS size using dcone. Figure 5 shows four heat
maps—one for each delegation class—with the cone size of
the delegator (x-axis) vs. the cone size of the delegatee (y-
axis).

All delegation classes include ASes of varying AS sizes
(from 1 to 10k+) both as delegatee and as delegator. We
notice substantial differences. In Cdown more than 99.5%
of all delegators have a larger cone size than the delega-
tee. For Cup we see the opposite— in 93% the delegator
has a smaller cone size than the delegatee. Thus, the dele-
gated preﬁx is either originated by (Cup) or announced via
(Cdown) the AS with the larger cone size. The heat map
for Cisolated is not that focused on either the upper or lower
half; we see a mixture. Some delegations take place between
ASes with large cones to those with smaller cones and the
other way around. Ccrossed shows a dense spot of AS pairs
which have large customer cones. Examples include del-
egations between NTT America and Cogent, two ASes of
Level 3, AT&T and Qwest, Qwest and Verizon, and AT&T
and Level3. These mainly involve major ISPs and content
delivery networks. Some of the delegations may be artifacts
of mergers or internal network practices.
Business relationships: We next correlate preﬁx delega-
tions with business relations using dbusiness. For each of the
19k AS pairs involved in preﬁx delegations, i.e., delegator
and delegatee, we assign either a c2p, p2c, p2p relationship
or label it with x if no relationship is included in the data.
In any of the x2y-like assignments, x is the delegator and y
the delegatee. Figure 6 shows barplots of the classiﬁcation
for each of the different delegation classes. Interestingly, we
ﬁnd that in 39.5% of the AS pairs, the delegator is not adja-

4728

.

0

e
r
a
h
s

4

.

0

0

.

0

p2p
p2c
c2p
x

8

.

0

e
r
a
h
s

4

.

0

0

.

0

org
x

x
 
=
<
n
o

 

i
t
r
o
p
o
r
P

8

.

0

4

.

0

0

.

0

x
 
=
<
n
o

 

i
t
r
o
p
o
r
P

8

.

0

4

.

0

0

.

0

p2c / Cdown
X / Cdown
p2c / Cisolated

c2p
X

C

C
isolated

up

C

C

down

crossed

(b) organizations

C

C

C

C
isolated

up

crossed
(a) business relationship

down

Figure 6: Barplot: delegations by business relationship and orga-
nization.

cent to the delegatee (34.4% of all delegations). In Cisolated
85% of AS pairs are unclassiﬁed while the fraction in Cup,
Cdown and Ccrossed is less: 28% / 19% / 11%.

If we only consider delegations between adjacent ASes
we ﬁnd that 99% AS pairs in Cdown have a p2c relation-
ship. This is what one may expect and is consistent with our
previous observations regarding the customer cone size dif-
ferences. These are the ones that fall below the diagonal in
Figure 5(a). Similar observations hold for Cup. 90.2% have
the expected c2p relationship and indeed these are the ones
that fall above the diagonal in Figure 5(b). The others are
mainly p2p (7.6%) with only a small fraction of p2c (2.2%).
Ccrossed includes the largest fraction of p2p relationships.
This hints at mutual agreements between the two involved
ASes which can result in such apparently unusual routing
arrangements. It is not surprising that this class includes AS
pairs where both have large customer cones. Overall, these
results show that each delegation class involves a distinct va-
riety of business relations among the ASes.

We acknowledge that some of the x-labeled AS pairs might
be caused by AS links that are not visible in this data set.
To mitigate the impact of such missing links, we use addi-
tional data sets, dmlp and dcomplex. However, we note that
they only provide a minute number of additional AS links.
In particular, out of the links in dcomplex we only ﬁnd 38
and in dmlp 49 additional links which corresponds to 1% of
our x-labeled AS pairs. We discuss delegations among non-
adjacent ASes in detail in Section 7.
Organizations: We also use the AS-to-organization map-
ping from dorg to check if most of the delegations occur be-
tween ASes of the same organization. The resulting barplot
in Figure 6(b) shows that 10-15% of the AS pairs are within
the same organization. The largest fraction are in Cup the
smallest in Cdown. However, this is by far not the majority.

7. EFFECTS ON PATH SELECTION

While BGP routing information provides multiple paths
towards a destination the actual trafﬁc follows the best path.
To better understand how preﬁx delegations affect the traf-
ﬁc ﬂow, we complement our analysis of preﬁx delegation
classes with large-scale traceroute measurements from dtrace.
We select two sets of traceroutes: those that target the del-
egated preﬁx Pdeleg, and those that target non-overlapping
parts of the associated/less speciﬁc Ptop. We exclude tracer-
oute results that do not reach the destination AS. For that we

0.0

0.4

0.8

0.0

0.4

0.8

share: through delegator
(a) Cdown & Cisolated

share: through delegatee

(b) Cup

Figure 7: CDF: path selection

map IPs from dtrace to ASes by applying the longest preﬁx
match using preﬁxes from d2016. This results in traceroutes
towards 56,543 (60%) of the delegated preﬁxes and towards
7,458 (70%) of the less speciﬁc preﬁxes. We refer to this
set of traceroutes as df low. For each delegation covered by
df low we determine the ratio of traceroutes going through
the delegator / delegatee. We refer to it as the pass-through
rate (ptr). Figure 7 shows the empirical cumulative distribu-
tion (CDF) of the resulting ptrs. In both plots we see that for
some delegations the traceroutes always use the path through
the delegator / delegatee (ptr is 1), for other delegations this
is never the case (ptr is 0). In the following we analyze some
of the delegation scenarios using this additional information.
PA preﬁxes from provider to customer: A common ex-
ample of a delegation is in a p2c relationship, where the
provider AS delegates PA address space to its customer AS.
This delegation scenario falls into Cdown if the provider an-
nounces both, the more and the less speciﬁc preﬁx. We ﬁnd
traceroutes for 29.1k of those delegations in df low. The solid
line (p2c/Cdown) in Figure 7(a) shows the corresponding
ptrs. For 65% of those delegations the traceroutes always
go via the delegating provider to the customer. A more de-
tailed analysis shows that one third of the delegatees appear
to be single-homed (cone size of 1). This contradicts best
current practices as stated, e.g., in [20]. However, we also
see the opposite: For roughly 15% the traceroutes never go
through the delegating provider, but via an alternative one.
We conclude, given the number of single-homed customers,
there is signiﬁcant potential for further address aggregation.
If however the provider only announces the less speciﬁc,
it falls into Cisolated. Because opposite to the previous case,
here the delegating provider aggregates the PA preﬁx with its
own. Note that the customer must be multi-homed because
despite aggregation, we can observe the delegated preﬁx. We
ﬁnd traceroutes for 1.3k of those delegations in df low. The
dotted line (p2c/Cisolated) in Figure 7(a) shows the corre-
sponding ptrs. For the majority (around 85%) of delegations
the traceroutes towards the customer never pass through the
delegating provider. However, in 10% of the delegations
they always do, despite aggregation. This hints at either lim-
ited propagation of the more speciﬁc preﬁx or uncommon
routing policies.

Next, we check if for delegations in Cdown with non-
adjacent ASes traceroute data provides additional informa-
tion. Using df low, we ﬁnd traceroutes for 2.6k delegations of
this type. For around 75% we ﬁnd no traceroute which goes

473through the delegator, see dashed line (x/Cdown). Less than
10% always go through the delegator. Note that in this case
15% of the delegatees are in the customer cone of the delega-
tor. This supports our claim that there are indirect business
relationships among two involved ASes.
Delegations from customer to provider: Next, we explore
the case where the customer AS delegates preﬁxes to its
provider. This involves 80.4% of the delegations in Cup,
31.4% in Ccrossed and 3.7% in Cisolated. These ﬁndings
contrast previous work [20] where the authors state that del-
egations from customer to provider are unlikely to be found
in the Internet. While we ﬁnd many customer ASes dele-
gating single preﬁxes to providers, we also see some ASes
delegating hundreds of preﬁxes. The latter involves, e.g.,
delegations within organizations or CDNs. Recall, the num-
ber of delegations in this class has grown the most over the
past ten years indicating the need for such services.

We ﬁnd traceroutes for 5.2k of those delegations (c2p/Cup)
in df low. The solid line in Figure 7(b) shows the CDF of the
corresponding ptrs: For 57% some traceroutes go through
the delegatee and others do not, i.e., the ptr is between 0
and 1. In only 25% of the delegations the traceroutes always
pass through the provider. For the remaining 18%, none of
the traceroutes do. Using df low again, we ﬁnd traceroutes
for further 1.3k Cup delegations among non-adjacent ASes
(x/Cup). Here we observe a similar behavior: For more than
60% of those delegations the corresponding ptr is between 0
and 1, see dashed line in Figure 7(b).

Compared to the delegations of PA preﬁxes from provider
to customer, here the path selection of the traceroutes is less
consistent. While for roughly 20% of the delegations in Fig-
ure 7(a) the ptr is between 0 and 1, it is roughly 60% of the
delegations in Figure 7(b). We conclude that depending on
the type of delegations, i.e., how preﬁxes are announced by
the delegator and delegatee, the path selection of traceroutes
is noticeably affected.
Delegations among non-adjacent ASes: 34% of the del-
egations involve AS pairs without any AS link (recall Sec-
tion 6). The majority is in Cisolated where no announce-
ments pass through the involved ASes. This is conﬁrmed
by the traceroute data, i.e., in around 90% of Cisolated del-
egations, the traceroute never goes via the delegator or the
delegatee (plot not shown). In order to underline the diver-
sity of preﬁx delegations, we present case studies comparing
a large ISP (Comcast) and a large CDN (Akamai). Also, we
look at a small organization operating at global scale.

Often organizations use several ASes, e.g., AT&T. Yet, it
appears that only a single AS (or a small number of ASes)
is used to delegate preﬁxes to other organizations. For ex-
ample: between 2011 and 2014 the Akamai AS31377 dele-
gated more than 2,000 preﬁxes to several non-adjacent Tier-
1 ASes world-wide (Cup) and to other Akamai ASes. After
its disappearance from the routing system in 2014 AS31377
was replaced by AS35994. In January 2016 AS35994 dele-
gated more than 4,000 preﬁxes to more than 100 ASes. We
ﬁnd that these delegations are volatile. Figure 8(a) shows
the churn in delegations over time for AS31377 using dhist.
Whenever we observe a delegation for the ﬁrst time we la-

bel it new. As long as a preﬁx keeps being announced we
label it stable until it disappears. If it reappears it is in re-
current. Supported by the high increase of delegations and
the irregular but high growth of new delegations, AS31377
often delegates and revokes delegations. This is in contrast
to AS7922 (Comcast) where the number of stable preﬁxes
decreases slower over time, see Figure 8(b).

Next, we compare the customer cone size distribution of
delegatees of AS31377 and AS7922, using dcone data from
2014. We consider only delegations to delegatees in organi-
zations different from the delegator. While AS7922 delegates
170 preﬁxes to 154 unique delegatees (all US organizations),
AS31377 delegates 2,062 preﬁxes to 95 delegatees, world-
wide. Both ASes mainly delegate to non-adjacent delega-
tees, i.e., 93.5% for AS7922 and 97.9% for AS31377. While
for AS7922 most delegations are in Cdown for AS31377 all
are in Cisolated or Cup. Figure 8(c) shows the CDF of the
delegatee cone size for both ASes. We observe that for AS7922
more than 97% have a cone size of 1. The distribution for
AS31377 differs signiﬁcantly as roughly 50% have a cone
size larger than 100.

In order to show that these versatile delegations are not
limited to big organizations, we next study a hotel com-
pany: Fairmont Hotels & Resorts Inc. owns a /16 according
to WHOIS and its address space is maintained by ’Q9 Net-
works - Canada’s data centre’. They use a conglomeration of
different delegation strategies: The main Q9 AS (AS12188)
appears to delegate all preﬁxes to its upstream providers,
i.e., Cogent, Qwest, Bell Ca, and Shaw (Cup).
In addi-
tion, we ﬁnd intra-organization delegations to other ASes,
which are connected to yet another set of large ASes includ-
ing Tinet SpA. Furthermore, there are a lot of Cisolated dele-
gations to ASes in several locations, e.g., Canada, US, Mex-
ico, Bermuda, Singapore. Other delegatees are Level3 and
Verizon.

8. SUMMARY

To better understand the growth of the global routing ta-
ble we study one of its constituents: delegated preﬁxes. By
distinguishing between different delegation classes we are
able to characterize a diverse ecosystem: We ﬁnd delega-
tions from provider to customer (53%) and from customer
to provider (10%), e.g., for trafﬁc engineering. Another 34%
of the delegations are between non-adjacent ASes. Our anal-
ysis reveals the existence of indirect business relationships
among the involved ASes. Other ASes delegate to distant
ASes to realize global services, e.g., CDNs.

These results highlight that delegations are not limited to
PA address space to a customer. They indicate delegation of
address space up and across the AS level hierarchy. Also,
delegations have a noticeable impact on the trafﬁc ﬂow: By
analyzing traceroute paths towards the delegator / delegatee
we ﬁnd that delegations from customer to provider cause a
more unpredictable selection of ingress paths, as compared
to, e.g., delegations from provider to customer.

Using case studies we contrast the delegation habits of
a large ISP, a large CDN, and a small organization. Com-

474[7] M. Caesar and J. Rexford. Bgp routing policies in isp

networks. IEEE Network, 2005.

[8] L. Cittadini, W. Muhlbauer, S. Uhlig, R. Bush,

P. Francois, and O. Maennel. Evolution of internet
address space deaggregation: Myths and reality. IEEE
J.Sel. A. Commun., 2010.

[9] L. Gao. On inferring autonomous system relationships

in the internet. IEEE/ACM Trans. Netw., 2001.

[10] V. Giotsas, M. Luckie, B. Huffaker, and k. claffy.
Inferring complex as relationships. In ACM IMC,
2014.

[11] V. Giotsas, S. Zhou, M. Luckie, and k. claffy. Inferring

multilateral peering. CoNEXT ’13, 2013.

[12] E. Gregori, A. Improta, L. Lenzini, L. Rossi, and

L. Sani. On the incompleteness of the as-level graph:
A novel methodology for bgp route collector
placement. In ACM IMC, 2012.

[13] A. Khan, H.-c. Kim, T. Kwon, and Y. Choi. A

comparative study on ip preﬁxes and their origin ases
in bgp and the irr. SIGCOMM CCR, 2013.

[14] M. Luckie, B. Huffaker, A. Dhamdhere, V. Giotsas,
and k. claffy. As relationships, customer cones, and
validation. In ACM IMC, 2013.

[15] P. McDaniel, W. Aiello, K. Butler, and J. Ioannidis.

Origin authentication in interdomain routing.
Computer Networks, 2006.

[16] X. Meng, Z. Xu, B. Zhang, G. Huston, S. Lu, and

L. Zhang. Ipv4 address allocation and the bgp routing
table evolution. ACM CCR, 2005.

[17] P. Richter, M. Allman, R. Bush, and V. Paxson. A

primer on ipv4 scarcity. SIGCOMM Comput.
Commun. Rev., 2015.

[18] M. Roughan, S. J. Tuke, and O. Maennel. Bigfoot,

sasquatch, the yeti and other missing links: What we
don’t know about the as graph. In ACM IMC, 2008.
[19] M. Roughan, W. Willinger, O. Maennel, D. Perouli,
and Y. Bush. 10 lessons from 10 years of measuring
and modeling the internet’s autonomous systems.
IEEE JSAC, 2011.

[20] J. a. L. Sobrinho, L. Vanbever, F. Le, and J. Rexford.
Distributed route aggregation on the global network.
In ACM CoNEXT, 2014.

[21] A. Sriraman, K. R. Butler, P. D. McDaniel, and
P. Raghavan. Analysis of the ipv4 address space
delegation structure. In Computers and
Communications, 2007.

s
e
x
i
f

e
r
p

 
f

o

 
r
e
b
m
u
n

0
0
5
2

0
0
0
1

0

stable
recurring
new

2011

2012
time

2014

s
e
x
i
f

e
r
p

 
f

o

 
r
e
b
m
u
n

stable
recurring
new

0
0
0
3

0
0
0
2

0
0
0
1

0

2009

2011

2014

time

(a) Barplot: AS31377

(b) Barplot: AS7922

x
 
=
<
 
n
o
i
t
r
o
p
o
r
P

8

.

0

4

.

0

0

.

0

AS7922
AS31377

1

10

100

1000

10000

delegatee cone size (log)

(c) CDF: delegatee customer cone size distribution

Figure 8: Case studies—Large ISP/large CDN: Churn and cone
size distribution.

pared to the ISP, delegations performed by the CDN are
more volatile: Over time we observe many new and reused
delegations as well as their disappearance. Also, we ﬁnd
that the ISP often delegates to local organizations while the
delegatees of the CDN are globally distributed. Delegations,
however, are not limited to big organizations but are common-
place among ASes of any size. Thus, supported by our his-
torical analysis, we conclude that the routing table will con-
tinue to grow as an increasing number of announcements
become unaggregatable.

Acknowledgments
We thank the anonymous reviewers for their helpful feed-
back. This work was partially supported by Leibniz Price
project funds of DFG/German Research Foundation (FKZ
FE 570/4-1).

9. REFERENCES

[1] Caida. Archipelago measurement infrastructure.

http://www.caida.org/projects/ark/.

[2] Caida. Mapping Autonomous Systems to

Organizations.
https://www.caida.org/research/topology/as2org/.

[3] CIDR Report. www.cidr-report.org/.
[4] RIS - RIPE Network Coordination Centre.

http://ris.ripe.net/.

[5] University of Oregon RouteViews project.

http://www.routeviews.org/.

[6] T. Bu, L. Gao, and D. Towsley. On characterizing bgp

routing table growth. Computer Networks, 2004.

475