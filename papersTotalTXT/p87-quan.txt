When the Internet Sleeps: Correlating Diurnal Networks

With External Factors

Lin Quan1,2
1: USC/Information Sciences Institute

John Heidemann1

{linquan, johnh, yuri}@isi.edu

Yuri Pradkin1
2: Bank of China

ABSTRACT
As the Internet matures, policy questions loom larger in its
operation. When should an ISP, city, or government invest
in infrastructure? How do their policies aﬀect use? In this
work, we develop a new approach to evaluate how policies,
economic conditions and technology correlates with Internet
use around the world. First, we develop an adaptive and ac-
curate approach to estimate block availability, the fraction of
active IP addresses in each /24 block over short timescales
(every 11 minutes). Our estimator provides a new lens to in-
terpret data taken from existing long-term outage measure-
ments, thus requiring no additional traﬃc. (If new collection
was required, it would be lightweight, since on average, out-
age detection requires less than 20 probes per hour per /24
block; less than 1% of background radiation.) Second, we
show that spectral analysis of this measure can identify diur-
nal usage: blocks where addresses are regularly used during
part of the day and idle in other times. Finally, we analyze
data for the entire responsive Internet (3.7M /24 blocks)
over 35 days. These global observations show when and
where the Internet sleeps—networks are mostly always-on in
the US and Western Europe, and diurnal in much of Asia,
South America, and Eastern Europe. ANOVA (Analysis
of Variance) testing shows that diurnal networks correlate
negatively with country GDP and electrical consumption,
quantifying that national policies and economics relate to
networks.

Categories and Subject Descriptors
C.2.3 [Computer-Communication Networks]: Network
Operations—Network Monitoring; C.2.5 [Computer-Com-
munication Networks]: Local and Wide-Area Networks—
Internet; C.4 [Performance of Systems]: Reliability, avail-
ability, and serviceability

General Terms
Measurement
Permission to make digital or hard copies of all or part of this work for personal or
classroom use is granted without fee provided that copies are not made or distributed
for proﬁt or commercial advantage and that copies bear this notice and the full citation
on the ﬁrst page. Copyrights for components of this work owned by others than the
author(s) must be honored. Abstracting with credit is permitted. To copy otherwise, or
republish, to post on servers or to redistribute to lists, requires prior speciﬁc permission
and/or a fee. Request permissions from permissions@acm.org.
IMC’14, November 5–7, 2014, Vancouver, BC, Canada.
Copyright is held by the owner/author(s). Publication rights licensed to ACM.
ACM 978-1-4503-3213-2/14/11 ...$15.00.
http://dx.doi.org/10.1145/2663716.2663721.

Keywords
Internet; Internet reliability; diurnal network usage

1.

INTRODUCTION

The Internet is a large and complex combination of tech-
nology, policy, and human behavior. Separating these ef-
fects is diﬃcult, yet businesses, governments, and individ-
uals must make decisions every day, even with incomplete
and contradictory information.

One metric of Internet maturity is network availability
and the shift from on-demand on always-on network avail-
ability. Increasing use of broadband networks brings always-
on networks. In fact, always-on is part of the U.S. Federal
Communication Commission’s deﬁnition of broadband [9].
Always-on networks have practical diﬀerences on how net-
works are used—the ease of not having to turn on a com-
puter and connect is one enabler of the shift of home tele-
phony and entertainment to IP. A similar shift is seen in
the deployment of high-speed mobile phones, where always-
on 3G and 4G networks are fast enough to take on data-
intensive tasks like social media and streaming video. For
many, an always-on phones is their primary interface to so-
cial media

Government policy makers and ISPs evaluate how the
choices they make aﬀect network usage. Until recently, tools
to study the results of policy choices have been limited,
with telephone-based surveys reaching a few thousand of
randomly chosen people (for example, [40]), and in-home
routers such as SamKnows [35] and BISmark [34] provid-
ing visibility to a few hundred, statically-chosen volunteers.
While important, these studies consider a very sparse sample
of individuals. A broader perspective would better quantify
how policies and technologies aﬀect Internet usage, and it is
necessary to compare global diﬀerences and understand nat-
ural experiments that arise when diﬀerent countries adopt
diﬀerent policies. For example, we know that some ISPs
use network blocks on a diurnal basis because of economic
constraints (saving power bills), or because of diﬀerent ac-
cess technologies (such as dial-up use with mandatory dy-
namic addressing [22]); in some countries these policies dom-
inate use. To move beyond these anecdotes we would like
to systematically explore what factors contribute diﬀerent
network usage.

To reach this goal, the ﬁrst contribution of our work is
to develop a new method to estimate block availability, the
fraction of addresses in each /24 block that are in use and
will reply to an ICMP probe. While the data collection is
not new work, our analysis (§ 2) is completely new. We

87provide a new analytic tool to interpret existing long-term
measurement studies of network outages [31]. We take this
approach to leverage existing data, and because these outage
measurements have already been shown to impose minimal
cost (in probing traﬃc) on the subject networks. On aver-
age, outage detection requires less than 20 probes per hour,
per /24, less than 1% of typically Internet background ra-
diation observed in 2010 [39]. Even if our analysis required
new data collection, its impact would be minimal.

Second, we show how this measurement can be interpreted
to detect diurnal blocks. We use spectral analysis to identify
blocks whose usage shows large daily changes. We also show
that analysis of the phase of these changes relates to the
longitude of blocks. We develop these two methods (§ 2)
and validate them with controlled experiments (§ 3).

Our ﬁnal contribution is to use these methods to study
both diurnal behavior of 3.7M responsive blocks (each a /24
IPv4 preﬁx that replies to active probes) over more than
one month (§ 4). While it is well known that network us-
age varies, our analysis provides the ﬁrst long-term, wide-
scale evaluation of diurnal use of the global Internet. Using
ANOVA testing, we correlate these direct observations with
economic and technical factors to examine how external fac-
tors and national constraints relate to Internet use, show-
ing correlations by country and link technologies, as well
as by economic factors (GDP and electricity consumption)
(§ 5). Although we do not directly study policies of indi-
vidual states, our methodology and data will enable future
policy studies.

All data from this paper is currently available at no cost

to other researchers [37].

2. METHODOLOGY
Our analysis begins with low-rate estimation of block-
level availability (§ 2.1), allowing detection of diurnal blocks
(§ 2.2). We then relate these measures to geolocation, orga-
nization, and link technologies (§ 2.3).
2.1 Dynamic Tracking of Block Availability

Our ﬁrst new method estimates block availability [10], the
probability that addresses in the block will respond to ICMP
probes. We study the network in /24 blocks, since prior
work has shown they are often homogeneous in use [3], and
that larger aggregates are too coarse [31]. Although we track
/24 blocks, we can detect diurnal activity that aﬀects tens of
addresses in a full block (§ 3.2.4). (As with other active prob-
ing, we cannot detect activity behind NATs or ﬁrewalls.)

While prior work deﬁned availability A over the whole
block, here we estimate three variants: short- and long-term
estimates of the availability of the ever-active IP addresses
( ˆAs and ˆAl), and an operational ( ˆAo) value that is consis-
tently designed to avoid overestimating A.
2.1.1 Problem Statement
Our goal is to derive an estimate ˆA from analysis of probe
data already taken as part of outage detection in Trinoc-
ular [31]. Trinocular already minimizes probes, with each
observer sending on average to less than 1% of background
radiation as of 2010 [39]. We wish to estimate A with no
additional probes beyond what outage detection already re-
quires.

We deﬁne the ground truth A as the fraction of addresses
that respond when all our probed. While easy to deﬁne, a

full measurement of ground truth is too expensive for oper-
ation.

There are several challenges that make A estimation dif-
ﬁcult to add to outage detection. First, sampling in outage
detection is biased. The goal of outage detection is to make
the minimum number of probes to reduce stress on the tar-
get, so a few or even one positive response is usually suﬃ-
cient to terminate probing. Probes are thus biased in favor
of positive responses.

Second, outage detection itself depends on ˆA; we require
an operational ˆAo estimate that is be too high. When ˆAo >
A, a few negative probes are a stronger indication that the
block is down and Trinocular will produce false outages.

Two additional challenges are that observations are quan-
tized, and that our initial A estimate may be quite inaccu-
rate. Because we take from 1 to 15 observations per round,
precision of a new A value is at most ±0.07 and could be
as coarse as 0.5 or 1. Short-term estimates therefore show
signiﬁcant jitter. Our initial estimates for A are based on
historical data over several years. They may be oﬀ signiﬁ-
cantly if block usage has changed.

2.1.2 Approach
Each of our estimates use exponentially weighted moving

average (EWMA) to smooth raw observations.

For each block, in each round of adaptive probing, we

observe p positive responses and t total responses.

We ﬁrst model short-term EWMA of positive and negative

responses to quickly adapt to real values.
ˆps = αsp + (1 − αs)ˆp
ˆts = αst + (1 − αs)ˆt

We use a gain of αs = 0.1 to quickly adapt to changes,

and calculate the short-term availability ˆAs:

ˆAs = ˆps/ˆts

It is important that we estimate p and t separately. Be-
cause A is their ratio, applying EWMA directly to obser-
vations of A skews the data, for the same reason that one
must use geometric mean to estimate normalized results [17].
(Our experiments in dataset A12w use a variation on this ap-
proach, where short-term availability ˆA(cid:48)
s is tracked directly
with EWMA, rather than tracking ˆps and ˆts separately. This
method consistently over-estimates ˆA. While we accommo-
date for this variation in ˆAo and verify that it does not aﬀect
periodicity in ˆAs, our current approach provides tighter re-
sults.)

An example of ˆAs is shown as a green line in Figures 1
through 3. Compared to the true A taken from complete
survey data (the black line), we see that ˆAs is quite noisy
(see Figure 1). However, this rapidly changing estimate is
useful to understand diurnal block changes (§ 2.2).

We model long-term estimates of availability ( ˆAl) with the

same process using a gain αl = 0.01.

Our goal in a conservative ˆAo is that it should not exceed
the true value. To reﬂect this goal, we evaluate the abso-
lute deviation of each sample from the estimate and then
intentionally underestimate the operational value by a half
of this amount. We model a deviation term dl, and use it to
compute a more conservative ˆAo (note that we limit ˆAo to
a minimum of 0.1; very small values will result in excessive

88probes and Trinocular policy limits probes per round to do
no harm):

ˆdl = αl| ˆAl − p/t| + (1 − αl) ˆd

ˆAo = max( ˆAl − 1
2

ˆdl, 0.1)

Our use of Trinocular works out well, since it provides
lightweight probing. Once we accounting for Trinocular’s
policy of stopping on ﬁrst positive response, its policy of
walking all responsive addresses in a pseudorandom order is
ideal for analysis of diurnal blocks.
2.2 Detecting Diurnal Blocks

Block availability relates to the number of active IPs in
the block. Blocks that change diurnally will show regular
daily changes to A as computers come and go. To identify
diurnal blocks we estimate A as a timeseries of ˆAs observa-
tions taken each 11 minutes (following [10]). We then take
the Fast-Fourier Transform of this timeseries to determine
periodicity and phase.

Data cleaning: Spectral analysis typically requires an
evenly sampled timeseries. We map our probing output to
an 11-minute timeseries, but is not perfectly aligned with 11
minute rounds, sometimes we see missing or duplicate ob-
servations in a round (about 5% of rounds). Like previous
work [30], we correct these by extrapolating single missing
estimates, and trusting most recent observation when dupli-
cates occur.

We trim our timeseries to start and end near midnight
UTC. This approach ties phase to physical time, and it also
reduces noise in FFT analysis of diurnal frequencies.

Detecting diurnal blocks: We use a Discrete Fast-
Fourier transform to identify periodicity typical of diurnal
use. Given a timeseries A = am, m ∈ [0, n − 1] of n in-
put samples, we compute its k ∈ [0, n− 1] frequency-domain
components as:

n−1(cid:88)

αk =

−2πimk/n

ame

m=0

The magnitude of αk shows the strength kth frequency
component (sub-signal) of am. With our 11-minute (R =
660 s) sampling period, αk shows the frequency at k/(Rn) Hz.
To identify diurnal patterns for an experiment lasting Nd
days we look in the k = Nd component of αk. To account
for noise, we also consider the adjacent k = Nd + 1.

Diurnal activity in a block appears as strength in αk cor-
responding to 24 hour intervals (and multiples of this fre-
quency). For a strictly diurnal block, the strongest fre-
quency occurs at 1 cycle per day (when k = Nd), and its
strength is at least twice the next strongest, non-harmonic
frequency, and greater than all harmonics.

We also consider relaxed diurnal blocks, where the strongest

frequency is at 1 cycle per day or the ﬁrst harmonic, without
comparison to the second strongest frequency.

Block phase: In addition to the amplitude of the FFT
(the “strength” of a given periodicity), spectral analysis also
provides the phase (when the period occurs relative to the
start of measurements). Phase is shown in the angle of the
complex-valued FFT coeﬃcients.

We examine phase in the 1-cycle-per-day component, and
consider it valid only for strong or relaxed diurnal blocks.
(For non-diurnal blocks, phase of this component is eﬀec-
tively random.)

Phases range from [−π, π], with the exact value depending
on when a measurement begins. We consider relative phases
and compare them to physical location (§ 5.2); future work
may tie phase to time-of-day.

Data appropriateness: FFT over data too short or non-
stationary can distort analysis of periodic behavior. Our
datasets are suﬃciently long (two or more weeks) to capture
many diurnal periods.

We veriﬁed our data is roughly stationary for our measure-
ment periods by doing a linear ﬁt of A over the observation
and conﬁrming slopes are near-zero. We conﬁrmed with all
29,001 blocks in Survey S 51w that about 80.3% of these
blocks are stationary, with a slope equivalent to less than 1
address changes per day.

2.3 Other Network Factors: Geolocation,

Organizations, and Link Types

We analyze network behavior in /24 blocks, but to put
these in context, we relate diurnal behavior to other factors:
physical location, logical location (the organization operat-
ing the address), and last-mile link technology.

2.3.1 Geolocation
Diﬀerent countries and regions have diﬀerent policies and
economics for networking. To understand these eﬀects we
use IP geolocation to get city-level physical locations. While
there have been many approaches to IP geolocation (see for
example [13,28]), we use MaxMind’s city-level database [25]
as a free and widely used source. Although this source is not
the most accurate (claimed accuracy is 40 km), it is suﬃcient
to demonstrate at least country-level correlation.

We map each /24 block to location. Although sometimes
blocks span multiple locations, such instances are fairly rare.
Our analysis of existing per-IP data [11] shows about 93% of
/24 blocks have homogeneous locations, and our MaxMind
dataset speciﬁes location with at most /24 precision.

2.3.2 Organizations
To understand how the policies of diﬀerent organizations
aﬀect how they use IP addresses, we map IP addresses to
Autonomous System (AS) numbers, and ASes to organiza-
tions. (Ideally we would subdivide some ASes, perhaps into
commercial and home networks, but we know of no such
classiﬁcation.)

We use Team Cymru’s IP to AS number mapping [36]. We
map each /24 to an AS based on its .0 address. Dividing
ASes across /24s is rare, with only 0.005% of blocks in Team
Cymru’s data showing diﬀering .0 and .128 ASes. Their data
provides AS numbers and names for 99.41% of /24 blocks.
We map ASes to organizations using prior work that uses
WHOIS and string-based clustering [4]. For a given organi-
zation or ISP P (for example, Time Warner Cable), we ﬁrst
use keyword matching (ex. “Time Warner”) to ﬁnd relevant
clusters, then ﬁnd all ASes within same cluster(s). Finally,
for all ASes within P , we join with IP/AS mapping and ﬁnd
all relevant IP blocks for P .

The above method assumes good accuracy of IP/AS and
AS/organization mappings. Future work may consider how
accuracy of these mappings aﬀects our correlations, or to
compare the behavior of diﬀerent ASes within the same or-
ganization.

892.3.3 Link Technology
We deﬁne the link type as the technology connecting the
ﬁnal hop to the destination. Identiﬁcation of link types for
blocks is diﬃcult because such information is not readily
available, and because in principle diﬀerent parts of a /24
block could be connected diﬀerently (for example, a router at
.1 and the rest of the addresses with dial-up). Previous work
has shown one can often infer link types from reverse domain
names [4, 16, 27, 33]. We build Thunderping’s idea [33], but
cannot reuse their data directly because their classiﬁcation
was done manually and only for the United States; we wish
to study millions of international blocks. Other data is also
sparse or old, so we identify block-level link types as follows.
First, we look up the reverse domain name of each ad-
dress in each analyzable block. We then use string match-
ing against pre-deﬁned keywords to non-exclusively identify
features (corresponding to link types, see § 5.5) for each ad-
dress. For example, a reverse name of dhcp-dialup-001.
example.com is marked as both DHCP and dial-up. Each
block is therefore deﬁned by a vector of 256 addresses, each
with zero or more features. We suppress minor features in
each block by ﬁltering out features that are less than 1
15 th of
the most frequent feature. Finally, we label the block with
all remaining features that have non-zero counts.

We consider 16 keywords (sta, dyn, srv, rtr*, gw*, dhcp,
ppp, dsl, dial, cable, ded*, res, client*, sql*, wireless*, wiﬁ*).
Of these, we discard the seven marked with asterisks be-
cause they are dominant in less than 1000 blocks. These
keywords are all based on English; future work should ex-
plore non-English networking keywords and explore poten-
tial under-representation in countries where English is not
the dominant language. We believe this approach works rea-
sonable for ISPs serving homes; it is not designed to classify
commercial providers (clouds or CDNs).
For our 3.7M blocks in dataset A12w , and ﬁnd that 46.3%
of these blocks have some feature (4× more than Thunder-
ping), and 11.4% have multiple features.

2.4 Factorial Analysis with ANOVA

To quantify the correlation of policies, places, and tech-
nologies on Internet usage, we need to weigh the factors
that relate to network outcomes such as diurnal address us-
age and network reliability. While anecdotal and personal
evidence suggests that individuals in some countries turn oﬀ
computers at night to save power, we wish to measure these
eﬀects systematically.

To discover correlations between a range of possible fac-
tors and network outcomes we use analysis of variance or
ANOVA, a form of statistical hypothesis testing.
It tests
the probability (p-value) of a factor or factors (separately
or in combination) being correlated with an observation. A
high p-value indicates that the factor has little correlation
with outcome, while a low p-value indicates that correla-
tion of the factor and outcome are unlikely to have been
by chance alone. In practice, p-values less than a threshold
(0.05 or 0.01) are typically considered statistically signiﬁ-
cant, because a low p-value (with high probability) rejects
the null-hypothesis: that the input variable(s) and output
variable are unrelated.

A full discussion of ANOVA is found in many textbooks
(for example, [26]). We use the open source ANOVA package
in R for our analysis.

2.5 Datasets

Our work draws on two active measurements: IPv4 sur-

veys and Trinocular outage measurements.

To validate our results with complete information we re-
evaluate Internet IPv4 surveys [10]. These datasets have
probes to every address in about 2% of IPv4 /24 blocks,
taken every 11 minutes for 2 weeks. With complete data
for all IPs in the block, surveys provide ground truth. We
primarily use Survey S 51w , starting 2012-11-16. To detect
trends over the last three years (Figure 11), we analyze his-
torical surveys taken since 2010 (Survey S 31w [37]).

Our new estimators to derive short-timescale block avail-
ability and diurnalness are based on data from Internet out-
age observation. We use outage data collected from Trinoc-
ular [31]. Our analysis here uses the A12w dataset, taken
from Los Angeles, California, USA [38] and covering 3.7 M
Internet edge network blocks over 35 days, starting at 2013-
04-24 17:18 UTC. We observe similar results from two other
sites in Fort Collins, Colorado, USA, and Keio, Japan.
These datasets are publicly available [37]. We add new
public datasets for link technology (§ 2.3.3) and our new
availability and diurnal analysis.

3. VALIDATION
To validate our new measurement approaches we re-evaluate
Internet surveys (summarized above § 2.5). We add con-
trolled simulations of diurnal blocks to systematically inves-
tigate our sensitivity to variation in diurnal behavior. We
also evaluate diurnal detection against blocks at USC that
are or perhaps should be diurnal.
3.1 Tracking Block Availability

Sample Blocks

We ﬁrst validate that we accurately estimate availability
(A), since detection of diurnal blocks uses this estimate. We
show our measure with examples and evaluation of all 29k
blocks in S 51w .
3.1.1
To illustrate estimation of ˆA, we ﬁrst compare ˆA to true
A for several representative sample blocks drawn from Sur-
vey S 51w (Figures 1 to 3). The survey provides complete
data for all 256 addresses in the block for two weeks. We
use the Trinocular algorithm to downsample this data, con-
sidering from 1 to 15 samples per round (shown as red dots
on the graphs). We apply Trinocular’s adaptive sampling
to consider from 1 to 15 samples per 11 minute round. We
then compare short-term and operational estimates ( ˆAs and
ˆAo, the green and dark blue lines) and compare them to
the true value (A, the black line) measured from complete
data. Full data is shown in the image above each graph,
with light green dots showing responses and black showing
non-responses. We have examined hundreds of blocks; the
examples we show here represent diﬀerent conditions.

Figure 1 shows a block that is sparse, with only a few
responding addresses (42 active over time), but relatively
high availability (A = 0.735). The middle graph shows that
the short-term estimate is noisy around the true value (the
jagged green ˆAs line, compared to the steady black A line).
We also see the operational value never overestimates once it
leaves its inaccurate initial value ( ˆAo < A, the dark blue line
is lower than the black line). Finally, we detect an outage
at round 957.

90Figure 1: Block 1.9.21/24 from S 51w , a sparse but high
availability block (42 every responding addresses, A =
0.735). Top: raw survey data: green is response, black is no
response. Middle: compares true A (black, upper line with
minimal variation), short-term estimate ˆAs (light green, up-
per line with larger variation), operational estimate ˆAo (dot-
ted dark blue, lower line), and report the number probes per
round (red dots at bottom and right scale). An outage oc-
curs at round 957 (the magenta line). Probes-per-round (red
dots, mostly along the bottom) use the right scale. Bottom:
amplitude of FFT (Nd = 14) of ˆAs, with no strong diurnal
signals.

Figure 3: Block 27.186.9/24 from S 51w , |E(b)| = 256, A =
0.598. Diurnal block. Lines described in Figure 1. Bottom:
amplitude of FFT (Nd = 14) of ˆAs showing strong diurnal
amplitude.

Figure 2 shows a dense block where nearly all addresses
in use (|E(b)| = 245), but availability is low (A = 0.191).
Again, the short-term estimate tracks truth reasonably well,
but with some noise, and the operational does not exceed the
true value. The low availability of this block means several
probes are often used per round (mean 5.08 probes/round).
We conclude that our approach works on low-availability
blocks as well.

Finally, Figure 3 shows a diurnal block. We count 14
“bumps” of A corresponding with the 14-days survey. The
short-term estimate lags the truth slightly (compare green
ˆAs to black A) , and the operational value ( ˆAo) is generally
below the worst-case true A.

These samples show that our algorithms track A accu-

rately, as we observe in many other blocks.
3.1.2 Comparison in Full Survey Blocks
To generalize from these examples we next systematically
compare all 29k /24 blocks in Survey S 51w . We apply our
availability tracking algorithm with sparse sampling and es-
timation to each block and compare to full data as ground
truth.

Figure 4 compares our short-term estimates ( ˆAs) against
ground truth (A) as a density plot. We normalize the density
with the product of number of blocks and number of rounds.
The dense cluster near the “perfect correlation” of x = y
line shows this correlation visually. Over the density plot,
we plot the median (white line) and quartiles for all values
in each group of 0.1 true A (white boxes), conﬁrming our
estimator is unbiased.

Figure 5 shows the same visualization for operational ˆAo.
Our goal is that the operational value not overestimate. This
data shows our operational Ao values are almost always

Figure 2: Block 93.208.233/24 from from S 51w ,|E(b)| = 245,
A = 0.191. Dense but low availability block. (Block is non-
diurnal, so FFT is omitted.) Lines described in Figure 1.

050010001500time (rounds)0.00.20.40.60.81.0Aprefix: 0x010915/24, ®s=0:1, ®l=0:01, ®d=0:01, probe_overhead=0.0%outages05101520number of probes per round24h12h8h6h4h3h2hperiod (hours)01020304050607080amplitude20406080100120140160180200k (FFT bins)050010001500time (rounds)0.00.20.40.60.81.0Aprefix: 0x5dd0e9/24, ®s=0:1, ®l=0:01, ®d=0:01, probe_overhead=0.0%outages05101520number of probes per round050010001500time (rounds)0.00.20.40.60.81.0Aprefix: 0x1bba09/24, ®s=0:1, ®l=0:01, ®d=0:01, probe_overhead=0.55%outages05101520number of probes per round24h12h8h6h4h3h2hperiod (hours)01020304050607080amplitude20406080100120140160180200k (FFT bins)91Figure 4: Correlation of actual (A) and estimated ( ˆAs) avail-
ability. Density is normalized by the product of number of
blocks and rounds. Quartiles show As, binned by 0.1A.

Figure 5: Correlation of actual (A) and operational ( ˆAo)
availability. Density is normalized by the product of number
of blocks and rounds. Quartiles show Ao, binned by 0.1A.

(94% of the time) under true A. Since we do not probe
very-sparse blocks, we omit cases where ˆAo < 0.1.

Finally, we quantify the accuracy of our estimates by com-
puting the correlation coeﬃcient over true block availability
A and estimated values. We ﬁnd good correlation between
true A value and estimated ˆAs with an overall correlation
coeﬃcient of 0.95685.
3.2 Diurnal Blocks
We next consider sample diurnal blocks, then systematically
explore how diﬀerent factors detect of diurnalness.
3.2.1 Sample Blocks
We ﬁrst consider what spectral analysis (§ 2.2) reports
about our sample blocks. In Figure 1, a few addresses are
always used, and in Figure 2 all addresses are used intermit-
tently. Both blocks show a ﬂat spectrum, as illustrated by
the bottom graph in Figure 1 (the second example is similar
but omitted for space).

By contrast, the daily pattern in Figure 3 is visible in the
raw data (top) and observed ˆAs (middle).
It produces a
strong peak corresponding to daily activity (bottom graph,

Figure 6: Amplitude of FFT for block 27.186.9/24, in 35-day
A12w (Nd = 35); shows strong diurnal pattern.

here at k = 17). This sample block in our longer dataset
A12w also shows a strong daily peak in Figure 6 (at k = 35
due to the 35-day observation).

We have looked at many other example blocks; these cases
are representative of diurnal and non-diurnal spectra. We
report on diurnalness in A12w in § 4. Of the 3.7M blocks
we study in A12w we classify 412k (11%) as strictly diurnal
and 926k blocks (25%) as relaxed diurnal.

3.2.2 Controlled Diurnal Blocks with Simulation
We next turn to simulation to systematically study how
easily we can detect diurnalness in the face of diﬀerent kinds
of variation and noise.

We simulate one /24 block (256 addresses) to provide ex-
act ground truth against which to test our algorithm. Our
simulation evaluates responses every 11-minutes for 4 weeks.
In that block, 50 addresses are stable and always respond-
ing, and nd = 100 addresses are diurnal, and the remaining
addresses are not active. Diurnal addresses are responsive
for 8 hours and down for 16 hours each day. Each diurnal
address i turns on at a certain time during the day, the phase
φi.

We evaluate the eﬀects of three kinds of variation in this
model. First, we vary phase, selecting φi for each address
(once, at simulation start) uniformly from the range [0, Φ].
We also add normally-distributed noise, either adding vari-
ance σs to the start time of the up period, or changing its
duration with variance σd.
In both cases, noise is drawn
each day for each address. In each simulation below, we run
10 batches of experiments, each batch with 100 experiments
to report accuracy: percentage of correct detection of diur-
nal blocks within the 100 experiments. The error bars show
median and quartiles in the 10 batches.
For each simulation we observe ˆAs (§ 2.1) and diurnal
detection (§ 2.2). We detect 100% of these simulated diurnal
blocks in the simplest case when there is no noise (Φ = σs =
σd = 0).

Number of diurnal addresses: We ﬁrst explore eﬀects
of how many addresses are diurnal.
In Figure 7, we vary
nd, the number of diurnal addresses, from 1 to 100 (or 2%
to 67% of responsive addresses). Our detection accuracy
improves quickly. After 10 addresses (or 17% of responsive
addresses), the accuracy is more than 85%. Examination of
several cases shows the misses with nd < 10 are because nd
is only a small fraction of the 50 always-on addresses, and
our probing will usually pick an address within the stable
ones and stop.

Varying phase: To vary phase we return to nd = 100
but now select φi randomly, picking a value linearly dis-

 0 0.2 0.4 0.6 0.8 1actual A 0 0.2 0.4 0.6 0.8 1As 1e-08 1e-07 1e-06 1e-05 0.0001 0.001 0.01 0.1 0 0.2 0.4 0.6 0.8 1actual A 0 0.2 0.4 0.6 0.8 1Ao 1e-07 1e-06 1e-05 0.0001 0.001 0.0112345frequency(cyclesperday)050100150200250300amplitude3570105140175k(samples)92Figure 7: Accuracy of diurnal detection when the number
of diurnal behavior addresses (nd) per block varies from 2%
to 67% of responsive addresses (Φ = σs = σd = 0). Data:
simulation.

Figure 9: Accuracy of diurnal block detection when standard
deviation of uptime duration (σd) varies from 0 to 24 hours
(nd = 100, Φ = σs = 0). Data: simulation.

outcome

dataset

with A with ˆAs
ˆd
2,890
ˆn 23,497
1,999
ˆn
ˆd
614

(correct) d
n
(error) d
n

S 51w

9.97%
81.02%
6.89%
2.12%

precision: 82.48%; accuracy: 90.99%

Table 1: Validation of diurnal blocks in Survey S 51w (29k
blocks), using true availability (A) to compute ground truth,
and Trinocular estimated availability ( ˆAs) to predict.

After studying sensitivity of nd, φ, σd, we are conﬁdent
with our availability tracking and diurnal detection algo-
rithms. Because we can track blocks with small nd (less
than 20% of stable addresses), large Φ (typical human phase
is less than 4 hours), and large σd (typical up time is 6 to
10 hours).
3.2.3 Comparison in Full Survey Blocks
We next evaluate diurnal behavior with and without es-
timated A. Following § 3.1.2, we deﬁne ground truth as
diurnal detected with true availability (A) taken from full
data in Survey S 51w ; we cannot contact thousands of net-
work operators to get actual ground truth. We compare
that to diurnal computed from our lightweight estimate of
availability ( ˆAs).

The comparison in Table 1 shows that our method has
good precision (82.48%): we rarely falsely predict a wrong
diurnal block. We also provide good overall accuracy (90.99%),
which represents the ability to correctly track both positives
and negatives. Our measurement is conservative in detect-
ing diurnalness, with a fairly high false negative rate. For
the comparisons we make in § 5, this bias seems preferable
to false positives.
3.2.4 Validation with USC Ground Truth
We complement blind validation and controlled experi-
ments by comparing our results to operator-provided ground
truth at USC (we cannot obtain ground truth for thousands
of ISPs in the general Internet). We next verify that the di-

Figure 8: Accuracy of diurnal block detection when max-
imum Φ of diurnal addresses varies from 0 to 24 hours
(nd = 100, σs = σd = 0). Data: simulation.

tributed between 0 and Φ. to decide when it starts during
the time of each day. Figure 8 shows a sharp drop when
maximum Φ at 14 hours. This sharp threshold is due to the
twice next strongest amplitude requirement of strict diur-
nalness; although variations in phase decay gradually, the
signals from diﬀerent addresses to blur together around this
period, as conﬁrmed in simulations where we vary maximum
Φ from 0 to 24 hours (omitted due to space).

Varying duration: We vary duration by changing σd in
Figure 9. We vary σd from 0 to 24 hours to evaluate our
sensitivity to variations in up-time. We ﬁnd that this vari-
ance only slightly aﬀects accuracy for large σd (>10 hours).
This is because we synchronize the up periods daily, similar
to real world settings where people synchronize clocks and
go to work. With a normal distribution, variations in up-
time for the sub-signals will cancel each other out over time.
Considering that ordinary people’s schedules have variations
within only a few hours, this shows that our algorithm works
well for wide range of up-times.

 0 20 40 60 80 100 0 20 40 60 80 100 0 40 80 120 160 200accuracynumber of diurnal addressespercentage of diurnal vs. stable addresses 0 20 40 60 80 100 0 5 10 15 20 25accuracymaximum variation of phase (hours) 0 20 40 60 80 100 0 5 10 15 20 25accuracystandard deviation of uptime duration (hours)93urnal blocks we discover there are correct (no false positives)
and evaluate completeness (false negatives).

True Positives: In A12w we ﬁnd four strictly diurnal
blocks and 44 relaxed diurnal blocks. We evaluate block
usage using both reverse DNS names and discussions with
network operators. USC is large and network conﬁguration
is distributed and done partially on physical location, so
DNS names provide the most precise information; we then
conﬁrm our results with operators.

Of the four strictly diurnal blocks, two are wireless blocks
with dynamic address assignment. The other two have mixed
use, mostly assigned to general use (assigned to buildings or
departments). One block includes a range of 16 dynamically-
assigned addresses. Examining the additional 40 relaxed di-
urnal blocks, keyword assignment identiﬁes 20 as dynamic, 4
as wireless, and the other 16 are general use. In addition to
hostnames, for 39 blocks (2 strong and 37 relaxed diurnal)
we have full raw data from Survey S 51w .

False Positives are blocks detected as diurnal when sur-
vey shows consistent availability. Examination of all 39
blocks with full data shows clear diurnal trends in 38 blocks:
A changes by at least 10% over multiple days in the two
week survey. DNS data for the one block without diurnal
trends shows a group of 15 dynamic addresses for mobile
wired devices. We believe these addresses were activated in
the four months between ground truth (S 51w ) and detec-
tion (A12w ). We conclude that there are at most 3% false
positives for USC.

False Negatives are diurnal blocks that we miss. At
ﬁrst glance, labeling only 20 dynamic and 6 wireless blocks
as diurnal suggests a high false negative rate. (DNS at USC
identify 32 blocks as dynamic and 142 as wireless, types that
are often diurnal.)

Examination of these blocks shows that USC’s wireless is
heavily overprovisioned, with one wireless address for every
student (142 blocks). On average, each block has around
ten live addresses at any time (a load conﬁrmed by oper-
ators), even though many addresses are used over months
of observation. To avoid excessive per-address probing, by
default Trinocular removes blocks with fewer than 15 ac-
tive addresses, and it is diﬃcult to detect diurnal trends in
very sparse blocks (for example, see Figure 7). Thus, of the
142 wireless blocks, 119 were excluded from probing. Of
the 23 blocks that are probed, we identify 6 as diurnal. We
conclude that diurnal detection requires either moderately
dense blocks (more than 15 active addresses) or tolerance
for higher probing rates than 19 probes per hour per /24.
These self-imposed policy constraints (constraining probing)
result in false positives for USC’s sparely operated wireless
network.

Sparse blocks cause only false negatives, not false posi-
tives. We therefore claim that our Internet-wide measure-
ments are a lower-bound on the fraction of diurnal blocks,
and emphasize the correctness of diurnal claims (97% true
positives).

Surprises: We found two surprising results examining
USC. First, while DNS names show a few large, continuous
areas that are diurnal (centralized wireless), decentralized
address management also results in pockets of dynamic ad-
dresses in many /24 blocks. These dynamic addresses result
in diurnal trends in otherwise general-use blocks. Second,
while we expected diurnal usage of wireless and dynamically
assigned addresses, we were surprised by the strong diurnal

A12w

diurnal
(d)
297,080
332,250
1898
334,148

either non-diurnal
(N )
4057
106,391
1,996,653
2,103,044

(e)
341,919
569,882
122,173
692,055

all

345,976
676,273
2,118,826
2,795,099

A12j
d
e
N
all

Table 2: Comparing diurnal (d), diurnal and relaxed (e),
and non-diurnal (N ) for A12w and A12j .

use in the 16 general-use blocks. We speculate that diur-
nal use reﬂect either broad use of laptop computers that
are away from USC outside business hours, or a policy of
turning oﬀ desktop computers at night.
3.3 Stability from Different Locations

To conﬁrm that our approach is stable, we collected data
from two other sites concurrent with A12w : A12c from Col-
orado State University, and A12j from Keio University in
Japan. We next compare A12w against these datasets.
For each dataset, we deﬁne d as strongly diurnal blocks,
r as relaxed diurnal blocks, e as either d ∪ r, and N as
neither. In Table 2 we compare d, e, and N for A12w and
A12j . The ﬁrst row shows that of the 345,976 diurnal blocks
in A12w , A12j ﬁnds 85% as strongly diurnal and 98.8% as
either strong or weakly diurnal, suggesting strong disagree-
ment in only about 1.2% of blocks. We see similar results
when we compare A12w and A12c after we account for a
software bug (see [32]). We conclude that our approach is
not sensitive to measurement location.

4. DIRECTLY OBSERVED RESULTS

In this section, we show direct observations of diurnal
blocks in A12w . We compare these observations with other
factors to identify correlations in the next section § 5). We
ﬁnd 412k blocks (11%) that are strictly diurnal in A12w ,
and 926k blocks (25%) that are relaxed diurnal of the 3.7M
blocks we measure. These blocks are distributed all over the
address space.

Daily or other periodicity? Our test for diurnalness
looks strictly for regularity at 24 hours, requiring that to
be the strongest periodicity in the block. We focus on daily
patterns because they are likely to be related to human use of
the Internet. There may be other sources of periodicity, for
example related to DHCP lease cycles. If dynamic addresses
are allocated for some period p, and given out sequentially
across a region that spans multiple /24 blocks, then those
blocks will see usage that changes with period p.

To understand the how prominent diﬀerent periodicities
are, Figure 10 shows the distribution of the strongest fre-
quency for each of the 3.7 M blocks in A12w . As expected,
we observe a strong peak at 1 cycle per day (24 hours),
about 25% of all the blocks. We only declare 11% to be
strongly diurnal, where the 24-hour amplitude is twice the
next strongest frequency; the remaining are relaxed diurnal.
The second group (3%) is at about 4.3 cycles per day. This
periodicity is a probing artifact, because we restart our prob-
ing software every 5.5 hours (4.3 times per day) to recover
from possible prober failure. Our measurements starting in
2014-04 (A16all [37]) use restart times around one week to
reduce this eﬀect.

94country

code
AM
GE
BY
CN
PE
KZ
RS
AR
TH
SV
UA
CO
MY
PH
IN
MA
BR
VN
ID
RU
. . .
US

region
W. Asia
W. Asia
E. Europe

E. Asia

S. America
Cent. Asia
S. Europe
S. America
S.E. Asia

Cent. America

E. Europe
S. America
S.E. Asia
S.E. Asia

S. Asia
N. Africa
S. America
S.E. Asia
S.E. Asia
E. Europe

. . .

N. America

blocks
(/24s) diurnal
0.630
0.546
0.512
0.498
0.401
0.400
0.393
0.339
0.336
0.311
0.289
0.261
0.247
0.239
0.225
0.185
0.185
0.183
0.166
0.159
. . .
0.002

1075
1395
1748
394244
4600
3832
4429
20382
10986
1145
16575
9379
9747
5721
36470
2115
79095
8197
7617
53048
. . .
672104

frac. GDP
(US$)
5900
6000
15900
9300
10900
14100
10600
18400
10300
7600
7500
11000
17200
4500
3900
5400
12100
3600
5100
18000

50700

Table 3: Fraction of diurnal blocks, top 20 countries (with
at least 1000 blocks in our study), and United States. Di-
urnal analysis data is from A12w ; Geolocation data is from
MaxMind [25]; Per-capita GDP data is from CIA world fact-
book [5].

ﬁrst put our results in context by showing where the geolo-
catable blocks are located (Figure 12). In this world map,
we count /24s blocks geolocated into a 2×2 degree grid. We
see large numbers of addresses in North America and Eu-
rope, as well as concentrations in Japan, China, and several
other countries. We also see some geolocation anomalies:
when MaxMind knows only country, it locates the blocks in
the geographic center of the country, falsely placing many
networks away from population in Brazil, Russia, and Aus-
tralia.

Of the 412k strictly diurnal blocks in this dataset, Fig-
ure 13 shows what percentage of blocks in each grid cell are
diurnal. We see signiﬁcant variation by country, with very
few diurnal blocks in the U.S., western Europe, and Japan,
but many diurnal blocks in Asia, Eastern Europe, and South
America. Table 3 lists the countries with the most diurnal
blocks.

These strong regional diﬀerences show the ability of our
approach to identify global trends in Internet usage. In com-
ing sections we explore how these diﬀerences correlate with
of a combinations of cultural, policy, and economic causes.
5.2 When Does the Internet Sleep?

(Phase of Diurnal Blocks)

Amplitude in spectral analysis of A shows which blocks
are diurnal, and geolocation showed where these blocks are.
We next show that phase in the FFT coeﬃcients shows when
these blocks are active.

We next look at the phase of geolocated diurnal blocks
to see that it correlates strongly with longitude and there-
fore timezone. We measure how many blocks occur at each
combination of longitude and phase. Since both phase and
longitude are continuous, we count similar blocks by quantiz-
ing longitude and phase each into 100 bins (±π and ±180◦).
Since both wrap around the circle, we “unroll” them by plot-

Figure 10: Cumulative distribution of the highest frequency
in 35-day A12w .

Figure 11: Fraction of diurnal blocks from long-term sur-
veys. Uses 63 datasets, starting with S 30w in Dec. 2009,
letters indicate location (w: Los Angeles, c: Colorado, j:
Japan).

Long-term status: We next consider how block diurnal-
ness changes over time. In Figure 11, we apply our spectral
diurnal detection algorithm over more than 3 years of In-
ternet surveys (each a sample of about 2% of IPv4 blocks).
We observe that the percentage of diurnal blocks is rela-
tively stable, but that it shows a marked decline since 2012.
While we have observed in increasing trend in dynamic ad-
dress allocation this downward trend may indicate that these
dynamic addresses are slowly shifting to always-on activity
(even if they move around). These results are generally con-
sistent the 11% diurnal blocks in A12w .
5.

INDIRECTLY OBSERVED RESULTS

We next compare diurnal blocks to other factors: location,
time-of-day, block allocation dates, economic factors, and
link technologies.
5.1 Where Does the Internet Sleep?

(Locating diurnal blocks)

Our ﬁrst question is to identify where diurnal Internet use
is common. We study this question using A12w with Max-
Mind geolocation (succeeding for 3.45M of blocks, 93%). We

 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0.01 0.1 1 10 100CDFstrongest frequency (cycles per day)0.000.050.100.150.202010-01-012010-07-012011-01-012011-07-012012-01-012012-07-012013-01-012013-07-012014-01-01fraction diurnal blocksdatewcwcwcwcwcwcwwcwccwwcwcwcjwcjcjwcjwjwcjcjwcwcjwcjwcjwwcwcwcj95Figure 12: Number observable blocks (linear grayscale). Dataset: A12w

Figure 13: Percent of observable blocks that are diurnal. Dataset: A12w .

region

Northern America

Southern Africa

W. Europe

Northern Europe

Caribbean

Oceania
W. Asia

Northern Africa
Southern Europe
Central America
Eastern Europe
Southern Asia
South America

South-Eastern Asia

Eastern Asia
Central Asia

blocks (/24s)
721716
11255
275224
133911
2174
27206
25570
9984
134933
44644
146552
44524
133493
48885
757352
3832

frac. diurnal
0.002
0.0108
0.0109
0.0131
0.016
0.0349
0.0765
0.0992
0.124
0.133
0.135
0.200
0.208
0.219
0.279
0.401

Table 4: Fraction of diurnal blocks grouped by regions. Di-
urnal analysis data is from A12w ; Geolocation data is from
MaxMind [25].

ting phase in the range [−π + L, π + L], where L is the
longitude in radians.

Figure 14a shows a density plot of the 287k geolocat-
able, strictly diurnal blocks in A12w as described above. We
ﬁrst observe that many blocks at longitude zero have phase
near zero, and longitude and phase are strongly correlated—
larger phases correspond with more eastward longitudes.

The correlation coeﬃcient of unrolled phase against lon-
gitude is 0.835, showing they are strongly related. We did

not attempt to align phase zero with longitude zero; their
proximity is accidental and calibrating phase with local time
of day is future work.

In Figure 14b we repeat this analysis with 590k blocks
that are relaxed diurnal and geolocatable. The ﬁt here is
not quite as good (correlation coeﬃcient is 0.763), but it is
very close. This strong similarity suggests that our strict
test for diurnal may be overly conservative.

In both Figure 14 we observe that the correlation between
phase and longitude is fairly strong, except for longitudes
between 100◦E to 140◦E. This range corresponds with Mon-
golia, China and southeast Asia. We believe this variation
is primarily because our IP geolocation is not particularly
accurate in China, and because it is a geographically wide
country that uses a single timezone.

Finally, the relationship between phase and longitude sug-
gests that phase may help geolocate diurnal blocks. Fig-
ure 14c shows mean and standard deviations when this map-
ping is derived from relaxed diurnal data. We see that the
quality of the predictor varies signiﬁcantly: a phase from −2
to 0 indicates only the hemisphere, while most other phases
predict longitude within ±20 degrees.

5.3 Correlating Block Diurnalness and

Allo-cation Date

Policies for IP address allocation have evolved since IPv4
was introduced, with stricter requirements for density and
reuse that encourage dynamic allocation through full alloca-

96(a) Strictly diurnal blocks.

(b) Relaxed diurnal blocks.

(c) Predicting longitude from phase (relaxed
diurnal shown, strict is similar).

Figure 14: Comparing phase and longitude. Dataset: A12w .

Figure 15: Percentage of diurnal blocks in each month, based
on block allocation date. Dataset: 2013 diurnalness: A12w ;
block allocation: IANA).

tion in May 2012 [15]. Prior work has documented increased
dynamic addressing over time [3].

We can see how evolution in policies results in increased
diurnal Internet blocks by correlate the fraction of diurnal
blocks with the date when each /8 block was allocated to a
regional registry by ICANN [14]. We show this relationship
in Figure 15 by plotting a histogram of how many blocks
are currently used diurnally, based on the date of alloca-
tion. The trend is for increased diurnal use as allocations
proceed, corresponding with more careful policies in address
use. (Linear regression shows a positive slope of 0.08% per
month, with 0.609 correlation coeﬃcient.) Even though the
overall fraction of diurnal blocks shows a slight downward
trend (Figure 11), this data shows that newer blocks are
more often diurnal.

Changes in allocation policies have aﬀected all countries,
not just early adopters, and are independent of GDP (cor-
relations between ﬁrst allocation and mean allocation with
GDP are both poor, ρ < 0.27).
5.4 Effects of Economic Conditions

We hypothesize that economic factors aﬀect Internet use,
since dynamic address assignment and turning devices oﬀ at
night is more eﬃcient than static or always-on dynamic as-
signment and always-on devices, and economic factors aﬀect
investment in telecommunications infrastructure. While one
might suspect that economic factors correlate with diurnal-

Figure 16: Scatter plot of diurnalness and per-capita GDP
for all countries, for Table 3, with weak linear ﬁt (dashed
line). Dataset: A12w , CIA.

ness, our evaluation is able to quantify this relationship for
the ﬁrst time.

5.4.1 Correlating Diurnal Blocks with Economics
Why do some countries have a greater fraction of diurnal
blocks (§ 5.1)? Cultural diﬀerences across countries prompt
diﬀerent rates of savings, and diﬀerent economic situations
leave citizens diﬀerent levels of disposable income. These dif-
ference and anecdotal evidence suggest that people of some
countries, such as as China and India, to turn oﬀ their com-
puters at night to save electricity bills.

Although we cannot directly model cultural diﬀerences,
we can observe correlations between disposable income (mea-
sured in per-capita GDP, taken from the CIA World Fact-
book [5]) and diurnal network usage. Table 3 previously
gave speciﬁc values. Figure 16 visualizes this correlation,
including the weak linear ﬁt (conﬁdence coeﬃcient: -0.526;
such weak ﬁts are common with coarse GDP data and few
countries). The top 20 countries with diurnal fractions above
0.15 generally have a per-capita GDP less than USD $15,000,
less than one-third of the United States. We conclude that
economic factors correlate with diﬀerences in Internet use.

5.4.2 Non-GDP Factors: electricity and allocation

age

GDP is one of many economic indicators. To understand
correlations with other factors we carry out ANOVA facto-
rial analysis (§ 2.4) comparing ﬁve factors: per-capita GDP,

-180-135-90-45 0 45 90 135 180longitude (degrees)-6-4-2 0 2 4 6phase (radians, modulo) 1 10 100 1000 10000 100000-180-135-90-45 0 45 90 135 180longitude inferred from phase (degrees)-6-4-2 0 2 4 6phase (radians, modulo)-6-4-2 0 2 4 6-200-150-100-50 0 50 100 150 200phase (radians)longitude inferred from phase (degrees)-1 sdmean+1 sd0.000.050.100.150.200.250.300.350.401990-011992-011994-011996-011998-012000-012002-012004-012006-012008-012010-01fraction of diurnal blocks (as of 2013)block allocation date 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0 10000 20000 30000 40000 50000 60000 70000diurnal fractionper-capita GDP97per-
p.cpt.
capita
elec.
gdp
cons.
6.61×10−8 0.306
0.703

gdp
elec.
users/host
ﬁrst alloc.
mean alloc.

I-net
users/ ﬁrst
host
0.822
0.609
0.0366

age/ mean
age/
alloc.
0.995
0.00148
0.849

alloc.
0.789
—
0.959
0.830 —

0.0314

Table 5: ANOVA showing correlations between diurnal and
individual factors (the diagonal) and pairwise combinations
of factors (oﬀ the diagonal). Bold combinations are statisti-
cally signiﬁcant. Dataset: A12w .

Internet users per host, electricity consumption per capita
(each from the CIA factbook), and age of ﬁrst (and mean)
block allocation (from IANA) and fraction of diurnal blocks
(from our analysis).

Table 5 shows this analysis for all one- and two-factor com-
binations. A p-value less than 0.05 suggests a strong correla-
tion. We ﬁnd there are three combinations meet this require-
ment: per-capita GDP, with p-value of 6.61×10−8. The sec-
ond is the combination of per-capita electricity consumption
and mean age of allocation, with p-value of 0.001476. The
third is mean age of allocation, with a p-value of 0.031354.
Our analysis with ANOVA supports our previous hypoth-
esis that per-capita GDP is the main factor for diurnalness,
and suggests that electrical usage and mean allocation age
are also correlated. Electricity consumption is correlated
with economic activity (and thus GDP), but ANOVA con-
siders each combination o factors. Mean allocation age sug-
gests that newer countries have more diurnal use, as shown
in § 5.3.

Independence and Relationship to Policies

5.4.3
ANOVA shows correlations between diurnal networks and
several individual and pairs of several measurable factors.
Although ANOVA is a powerful technique, we must take
care that factors not necessarily independent—low GDP may
imply less developed infrastructure and less available power.
Future work is needed to show a causal relationship be-
tween these (or other) factors and network use, and to iden-
tify the how speciﬁc government and telecommunications
policies relate to these measurable factors. Policy analysis is
typically much more qualitative, since policies vary by coun-
try and region, and attribution of speciﬁc results to even a
single policy requires signiﬁcant eﬀort (the U.S. Broadband
Plan is more than 350 pages [9]). Our work suggests the po-
tential to identify such relationships, is the ﬁrst to describe
speciﬁc measurements to assist this direction of study.
5.5 Effects of Access-Link Technology

We next consider correlations between access-link tech-
nology and diurnalness. National policies are often set to
encourage new link technologies and promote always-on net-
works. In addition, while such policies and economic condi-
tions are diﬃcult for individuals to inﬂuence, users and ISPs
often can choose diﬀerent “last-mile” methods to connect to
the Internet.
We infer link type (§ 2.3.3) for all blocks in A12w , classify-
ing 22.4% of those blocks. For these blocks, we correlate link
type with diurnalness. Each of these link types have more

Figure 17: Fraction of diurnal blocks for 9 access keywords.
Dataset: A12w .

than 30k blocks; we omit the wireless keyword because we
see only 691 wireless/wiﬁ blocks, not enough to provide sta-
tistically strong results.

Figure 17 shows the fraction of diurnal networks for each
diﬀerent link type. As expected, dynamic addresses are
strongly correlated with diurnal behavior, with dynamic at
19%. Somewhat surprisingly, dialup is not strongly diurnal
(< 3%), while dsl is more diurnal (11%). These results sug-
gest the importance of measuring network behavior rather
than assuming.
5.6 Applications

This paper demonstrates that it is possible to identify di-
urnal network usage from active measurements, and that
that diurnal networks correlate with GDP and other fac-
tors. A direct application of this work is to use it to ex-
plore the outcomes of government and telecommunications
policy decisions (§ 5.4.3). For example, a goal of U.S. broad-
band deployment is always-on networking [9]; one can eval-
uate if new network technologies (ﬁber-to-the-home or ca-
ble modems) have are less diurnal (and so more always-on)
than older technologies (dial-up, ISDN) by looking for cor-
relations in access-link technology (§ 5.5). Comparisons of
fraction of diurnal networks per country or state can be used
to judge the progress of diﬀerent areas towards the goal of
always-on networking.

Information about blocks that are diurnal can also be used
to calibrate other measurements. For example, one can scan
the IPv4 space in tens of minutes to estimate the availability
of each /24 block, but this near-snapshot will be represen-
tative only for non-diurnal blocks. For diurnal blocks, one
needs several measurements at diﬀerent times-of-day to de-
termine the range of values.

Finally, information about diurnal networks is one com-
ponent towards estimating the size of the Internet measured
in active, public IP addresses [10].

6. RELATED WORK

ISP comparison: Several third-party systems exist to
compare performance of ISPs, including Keynote [19], top
ten reviews [19], and the popular speed test tool oﬀered by
OOKLA [29]. They share a common drawback: lack of scal-

0.000.020.040.060.080.100.120.140.160.180.20dynamicdslpppsrvwireless+wifistaticdhcpdialcableresfraction diurnal blockskeyword98ability. Perhaps closest to our work is Netdiﬀ [24], which
measures performance of hundreds of paths for 18 back-
bone ISPs. They ﬁnd that ISP performance depends on
geographic properties of traﬃc and popularity of destina-
tions. Our work is more focused on nodes instead of paths,
and thus complements Netdiﬀ.

Adaptive and pervasive sampling: Several prior stud-
ies have used adaptive probing techniques to ﬁnd network
faults (for example, [2]), and use simulations for valida-
tion. Similar to these, we use adaptive sampling inside
network blocks to achieve accurate availability information
( ˆAs), with low probing cost.

Prior work has explored full enumeration of IPv4 [10]. We
use some surveys from this work to validate our sampled re-
sults. Although we can do full enumeration quickly, as advo-
cated by others [8], such eﬀort is a poor match for long-term
data collection: it is unnecessary and annoys target network
operators. Instead, we build directly on the adaptive data
collection methods of Trinocular [31], adding new analysis
to identify diurnal networks.

Node-based studies: Barford et al. use node-based
methods to detect network performance anomalies [1], with
clever weighting algorithms to ﬁnd which links to probe next;
they simulate 15 types of topologies based on ns-2. Several
other previous studies also use similar strategies, including
Hubble [18] and iPlane [23]. Such node-based studies are
precise in understanding performance on link paths between
the node mesh. However, they usually “only” cover hun-
dreds or thousands of nodes. We complement such systems
with a much larger coverage (3.7M /24 blocks), and with
measurements on a regular basis every 11 minutes.

Tomography studies: Network tomography is inter-
ested in ﬁnding the exact location of problems [6,7,12,20,21].
We correct for correlated error by removing outages near our
probers. We are interested in tracking block-level network
reachability in the whole Internet edge, but without exact
localization of outages. Our work and tomography studies
can beneﬁt from each other. Our future work could be more
precise by localizing problems. Tomography studies can use
our system as a pre-step for ﬁnding symptoms.

7. CONCLUSIONS

In this paper, we develop an accurate adaptive approach
to estimate network block availability over time. Based on
this, we perform the ﬁrst long-term, wide-scale analysis of
diurnal network behavior and outages. We also begin to
evaluate how policies, economic conditions and technologies
aﬀect Internet use in the world. With statistical analysis
(ANOVA), we correlate diurnal usage and outages to eco-
nomic factors such as GDP and power consumption.

Acknowledgments
This research is partially sponsored by the Department of
Homeland Security (DHS) Science and Technology Direc-
torate, HSARPA, Cyber Security Division, BAA 11-01-RIKA
and Air Force Research Laboratory, Information Directorate
under agreement number FA8750-12-2-0344, and via SPAWAR
Systems Center Paciﬁc under Contract No. N66001-13-C-
3001. The U.S. Government is authorized to reproduce and
distribute reprints for Governmental purposes notwithstand-
ing any copyright notation thereon. The views contained

herein are those of the authors and do not necessarily rep-
resent those of DHS or the U.S. Government.

This work was classiﬁed by USC’s IRB as non-human sub-

jects research (IIR00001648).

We thank Brian Yamaguchi (USC/ITS) for guidance about
USC networks, and Christos Papadopoulos (CSU) and Rod
Van Meter, Yohei Kuga, and Midori Kato (WIDE) for sup-
porting data collection from their sites. We thank John
Wroclawski, Alberto Dainotti, Georgios Smaragdakis (our
shepherd), and the anonymous reviewers for comments on
the paper.

8. REFERENCES
[1] P. Barford, N. Duﬃeld, A. Ron, and J. Sommers.

Network performance anomaly detection and
localization. In INFOCOM 2009, IEEE, pages
1377–1385, 2009.

[2] M. Brodie, I. Rish, and S. Ma. Intelligent probing: A
cost-eﬀective approach to fault diagnosis in computer
networks. IBM Systems Journal, 41(3):372 –385, 2002.

[3] Xue Cai and John Heidemann. Understanding

Block-level Address Usage in the Visible Internet. In
Proc. of SIGCOMM, 2010.

[4] Xue Cai, John Heidemann, Balachander

Krishnamurthy, and Walter Willinger. Towards an
AS-to-Organization map. In Proceedings of the ACM
Internet Measurement Conference, pages 199–205,
Melbourne, Australia, November 2010. ACM.

[5] CIA World Factbook. List of countries by GDP (PPP)

per capita. https://www.cia.gov/library/
publications/the-world-factbook.

[6] ´Italo Cunha, Renata Teixeira, Nick Feamster, and

Christophe Diot. Measurement methods for fast and
accurate blackhole identiﬁcation with binary
tomography. In Proc. of 9thACM IMC, 2009.

[7] Amogh Dhamdhere, Renata Teixeira, Constantine

Dovrolis, and Christophe Diot. NetDiagnoser:
troubleshooting network unreachabilities using
end-to-end probes and routing data. In Proc. of ACM
Conference on Emerging Networking Experiments and
Technologies, pages 18:1–18:12. ACM, 2007.
[8] Zakir Durumeric, Eric Wustrow, and J. Alex

Halderman. ZMap: Fast internet-wide scanning and
its security applications. In Proc. of USENIX Security
Symposium, pages 605–620, Washington, DC, USA,
August 2013. USENIX.

[9] Federal Communication Commission. Collecting

America: the national broadband plan. Technical
report, FCC, March 2010.

[10] John Heidemann, Yuri Pradkin, Ramesh Govindan,

Christos Papadopoulos, Genevieve Bartlett, and
Joseph Bannister. Census and survey of the visible
Internet. In Proc. of ACM IMC, pages 169–182,
Vouliagmeni, Greece, October 2008. ACM.

[11] Zi Hu and John Heidemann. Towards geolocation of
millions of IP addresses. In Proceedings of the ACM
Internet Measurement Conference, pages 123–130,
Boston, MA, USA, 2012. ACM.

[12] Yiyi Huang, Nick Feamster, and Renata Teixeira.

Practical issues with using network tomography for
fault diagnosis. SIGCOMM Comput. Commun. Rev.,
38:53–58, September 2008.

99[13] Bradley Huﬀaker, Marina Fomenkov, and k. c. claﬀy.
Geocompare: a comparison of public and commercial
geolocation databases. Technical report, CAIDA, May
2011.

[14] Internet Assigned Numbers Authority. IANA IPv4

address space registry. web page
http://www.iana.org/assignments/
ipv4-address-space/ipv4-address-space.txt, May
2013.

[15] Internet Corporation for Assigned Names and

Numbers. Global policy for post exhaustion IPv4
allocation mechanisms by the IANA, May 2012.
[16] Internet Software Consortium. Internet Domain

Survey. web page
http://www.isc.org/solutions/survey, January
2007.

[17] Philip j. Fleming and John J. Wallace. How not to lie

with statistics: the correct way to summarize
benchmark results. Communications of the ACM,
29(3):218–221, March 1986.

[18] Ethan Katz-Bassett, Harsha V. Madhyastha, John P.

John, Arvind Krishnamurthy, David Wetherall, and
Thomas Anderson. Studying black holes in the
internet with Hubble. In NSDI, 2008.

[19] Keynote. Internet Health Report.
http://www.internetpulse.net.

[20] Ramana Rao Kompella, Jennifer Yates, Albert

Greenberg, and Alex C. Snoeren. IP fault localization
via risk modeling. In NSDI, 2005.

[21] Ramana Rao Kompella, Jennifer Yates, Albert
Greenberg, and Alex C. Snoeren. Detection and
Localization of Network Black Holes. In Proc. of IEEE
Infocom, 2007.

[22] LACNIC. LACNIC policy manual (v2.1), March 2014.
[23] Harsha V. Madhyastha, Tomas Isdal, Michael Piatek,

Colin Dixon, Thomas Anderson, Arvind
Krishnamurthy, and Arun Venkataramani. iPlane: An
information plane for distributed services. In Proc. of
7th OSDI, pages 367–380, Seattle, WA, USA,
November 2006. USENIX.

[27] P. Mockapetris. Domain names—concepts and

facilities. RFC 1034, Internet Request For Comments,
November 1987.

[28] James A. Muir and Paul C. Van Oorschot. Internet

geolocation: Evasion and counterevasion. ACM
Computing Surveys, 42(1), December 2009.

[29] OOKLA. Speedtest. http://www.speedtest.net.
[30] Lin Quan, John Heidemann, and Yuri Pradkin.

Detecting internet outages with precise active probing
(extended). Technical Report ISI-TR-2012-678,
USC/ISI, February 2012.

[31] Lin Quan, John Heidemann, and Yuri Pradkin.

Trinocular: Understanding internet reliability through
adaptive probing. In Proceedings of the ACM
SIGCOMM Conference, pages 255–266, Hong Kong,
China, August 2013. ACM.

[32] Lin Quan, John Heidemann, and Yuri Pradkin. When
the Internet sleeps: Correlating diurnal networks with
external factors (extended). Technical Report
ISI-TR-2014-691b, USC/Information Sciences
Institute, May 2014. (updated August 2014).

[33] Aaron Schulman and Neil Spring. Pingin’ in the rain.
In Proc. of ACM IMC, pages 19–25, Berlin, Germany,
November 2011. ACM.

[34] Srikanth Sundaresan, Sam Burnett, Nick Feamster,

and Walter de Donato. BISmark: A testbed for
deploying measurements and applications in
broadband access networks. In Proc. of USENIX
Annual Technical Conference. USENIX, June 2014.

[35] Srikanth Sundaresan, Walter de Donato, Nick

Feamster, Renata Teixeira, Sam Crawford, and
Antonio Pescap`e. Broadband Internet performance: A
view from the gateway. In Proc. of SIGCOMM, pages
134–145, Toronto, Ontario, Canada, August 2011.
ACM.

[36] Team Cymru. IP to ASN Mapping. http:

//www.team-cymru.org/Services/ip-to-asn.html.

[37] USC/LANDER Project. LANDER: Los Angeles
network data exchange and repository. web page
http://www.isi.edu/ant/lander/, November 2007.

[24] Ratul Mahajan, Ming Zhang, Lindsey Poole, and

[38] USC/LANDER project. Internet address survey

Vivek Pai. Uncovering performance diﬀerences among
backbone isps with netdiﬀ. In Proceedings of the 5th
USENIX Symposium on Networked Systems Design
and Implementation, NSDI’08, pages 205–218.
USENIX Association, 2008.

[25] MaxMind. GeoIP Geolocation Products.

http://www.maxmind.com/en/city.

[26] Rupert G. Miller. Beyond ANOVA: Basics of Applied

Statistics (Texts in Statistical Science Series).
Chapman & Hall/CRC, January 1997.

dataset, predict id usc-lander/internet_address_
survey_adaptive_reprobing_a12w. web page
http://www.isi.edu/ant/lander, April 2013.

[39] Eric Wustrow, Manish Karir, Michael Bailey, Farnam

Jahanian, and Geoﬀ Huston. Internet background
radiation revisited. In ACM IMC, 2010.

[40] Kathryn Zickuhr and Aaron Smith. Home broadband
2013. Technical report, Pew Research Center, August
2013.

100