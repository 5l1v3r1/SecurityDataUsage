Electri-Fi Your Data: Measuring and Combining

Power-Line Communications with WiFi

Christina Vlachou, Sébastien Henri, Patrick Thiran

EPFL, Switzerland

ﬁrstname.lastname@epﬂ.ch

ABSTRACT
Power-line communication (PLC) is widely used as it oﬀers
high data-rates and forms a network over electrical wiring,
an existing and ubiquitous infrastructure. PLC is increas-
ingly being deployed in hybrid networks that combine mul-
tiple technologies, the most popular among which is WiFi.
However, so far, it is not clear to which extent PLC can
boost network performance or how hybrid implementations
can exploit to the fullest this technology. We compare the
spatial and temporal variations of WiFi and PLC.

Despite the potential of PLC and its vast deployment in
commercial products, little is known about its performance.
To route or load balance traﬃc in hybrid networks, a solid
understanding of PLC and its link metrics is required. We
conduct experiments in a testbed of more than 140 links.
We introduce link metrics that are crucial for studying PLC
and that are required for quality-aware algorithms by recent
standardizations of hybrid networks. We explore the spatial
and temporal variation of PLC channels, showing that they
are highly asymmetric and that link quality and link-metric
temporal variability are strongly correlated. Based on our
variation study, we propose and validate a capacity estima-
tion technique via a metric that only uses the frame header.
We also focus on retransmissions due to channel errors or to
contention, a metric related to delay, and examine the sen-
sitivity of metrics to background traﬃc. Our performance
evaluation provides insight into the implementation of hy-
brid networks; we ease the intricacies of understanding the
performance characteristics of the PHY and MAC layers.

Categories and Subject Descriptors
C.2 [Computer-Communication Networks]: Network
Architecture and Design, Local and Wide-Area Networks;
C.4 [Performance of Systems]: Measurement techniques

Keywords
Power-line communications; HomePlug AV; IEEE 1901; IEEE
1905; Hybrid networks; Capacity estimation; Link metrics.

Permission to make digital or hard copies of all or part of this work for personal or
classroom use is granted without fee provided that copies are not made or distributed
for proﬁt or commercial advantage and that copies bear this notice and the full cita-
tion on the ﬁrst page. Copyrights for components of this work owned by others than
ACM must be honored. Abstracting with credit is permitted. To copy otherwise, or re-
publish, to post on servers or to redistribute to lists, requires prior speciﬁc permission
and/or a fee. Request permissions from Permissions@acm.org.
IMC’15, October 28–30, 2015, Tokyo, Japan.
c(cid:13) 2015 ACM. ISBN 978-1-4503-3848-6/15/10...$15.00
DOI: http://dx.doi.org/10.1145/2815675.2815689.

1.

INTRODUCTION

Wireless technology is dominant in local networks; it oﬀers
mobility and attractive data-rates. Nevertheless, it often
leaves “blind spots” in coverage, and the network becomes
saturated because of the increasing demand for higher rates
and of the explosion of network applications. Today’s net-
works call for additional, simple technologies that can boost
network performance, extend coverage, and improve quality
of service. Several candidates, among which power-line and
coaxial communications, are on the market. As the demand
for combining diverse technologies increases, new speciﬁca-
tions for hybrid networks are developed, such as the IEEE
1905 standard [2] which speciﬁes abstraction layers for topol-
ogy, link metrics, and forwarding rules.

Due to the growing demand of reliability in home net-
works, wireless and power-line communications (PLC) are
combined by several vendors to deliver high rates and broad
coverage without blind spots. PLC is at the forefront of
home networking, as it provides easy and high data-rate con-
nectivity. Its main advantage is coverage wider than WiFi
and data-rates up to 1Gbps without requiring the wiring of
a new network. It is obvious that PLC can be a lucrative
backbone for WiFi. However, in the quest to provide reli-
able performance, some questions arise: Where and when
does PLC perform better than WiFi? How fast does PLC
channel quality change? What are the diﬀerences between
the two technologies and which medium(s) should an appli-
cation use? Such questions remain unanswered as of today
and a goal of this work is to address them.

Despite its wide adoption, PLC has received far too lit-
tle attention from the research community. Moreover, IEEE
1905 is technology agnostic and it does not provide any for-
warding nor metric-estimation methods. To fully exploit the
potential of each medium, hybrid networks require routing
and load-balancing algorithms.
In turn, these algorithms
require accurate capacity estimation methods, and a solid
understanding of the underlying layers of each network tech-
nology. To the best of our knowledge, there has not been
any study on PLC; so far a very large body of work has only
introduced theoretical channel models. In this work, we in-
vestigate PLC from an end-user perspective, and we explore
link metrics and their variations with respect to space, time,
and background traﬃc; this is our main contribution. We
focus on two metrics required by IEEE 1905 [2]: the PHY
rate (capacity) and the packet errors (loss rate).

325The most popular speciﬁcation for high data-rate PLC,
employed by 95% of PLC devices [1], is HomePlug AV1. This
speciﬁcation was adopted by the IEEE 1901 standard [6]. In
this work, we dig deeply into the 1901 performance and pro-
vide link-quality estimation techniques. We ﬁrst present the
key elements of the PHY and MAC layers in Section 2, and
we detail on our measurement methodology for PLC in Sec-
tion 3. In Section 4, we explore experimentally the gains of
incorporating PLC in a WiFi network and explain why tem-
poral variation studies are crucial for a reliable performance.
We focus on WiFi blind spots and bad links and discuss how
PLC can mitigate high-traﬃc scenarios.

We delve into both the PHY and MAC layers of PLC via
a testbed of more than 140 links. In Section 5, we investi-
gate the spatial variation of PLC and ﬁnd that PLC links
are highly asymmetric. This has two consequences: (i) Link
metrics should be carefully estimated in both directions; (ii)
Predicting which PLC links will be good is challenging. We
study the temporal variation of the PLC channel in Sec-
tion 6, and distinguish three diﬀerent timescales for the link
quality. Exploring temporal variation is important for ex-
ploiting to its fullest extent each medium and for eﬃciently
updating link metrics (e.g., high-frequency probing yields
accurate estimations but high overhead). In Section 7, we
explore the accuracy of a capacity-estimation technique by
designing a load-balancing algorithm and by employing our
temporal-variation study. To explore the 1905 metric related
to packet losses, we examine the retransmission procedure
and how link metrics are aﬀected by contention in Section 8.
By employing our temporal variation study and our two link
metrics, PLC performance can be fully characterized and
simulated, thus reducing the overhead complexity of the ex-
act representation of the channel model and the PHY layer
mechanisms. We summarize our guidelines for link-metrics
estimation in Section 9. We verify our ﬁndings by using
devices from two vendors and HomePlug technologies. Our
key ﬁndings and contributions are outlined in Table 1.

2. BACKGROUND ON PLC

We now recall the main features of the PHY and MAC lay-
ers for the most popular PLC speciﬁcation, which is Home-
Plug AV (HPAV) equivalently, IEEE 1901 [6].

2.1 PHY Layer

The physical layer of HPAV is based on an OFDM scheme
with 917 carriers in the 1.8-30 MHz frequency band. Each
OFDM carrier can employ a diﬀerent modulation scheme
among BPSK, QPSK, 8/16/64/256/1024-QAM. In contrast,
in WiFi technologies, such as 802.11n, all carriers employ the
same scheme and the modulation and coding scheme (MCS)
index is used for decoding the frame [3]. Because each car-
rier employs diﬀerent modulation schemes, PLC stations ex-
change messages with the modulation per carrier, the for-
ward error correction code (FEC) rate, and other PHY layer
parameters [6]. The entity that deﬁnes these PHY options
is called the tone map, and it is estimated during the chan-
nel estimation process. To do so, the source initially sends
sound frames to the destination by using a default, robust
modulation scheme that employs QPSK for all carriers. This

1HomePlug alliance is the leader in PLC standardization [1].
In addition to high data-rate PLC, there are low-rate speciﬁ-
cations for home automation, such as HomePlug GreenPhy.

WiFi vs PLC

Section

In short distances, WiFi yields higher throughput, but
with much higher variability, compared to PLC.
PLC usually oﬀers high gains in quality of service en-
hancements, coverage extension and link aggregation.
Capacity estimation methods and temporal variation
studies are needed to fully exploit the mediums.

4.1

4.1,
7.4
7.4

Channel Quality and Variation

Section

PLC links can exhibit severe asymmetry and spatial
variation is diﬃcult to predict.
Temporal variation of the PLC channel occurs over
three diﬀerent time-scales.
Variation on the short-term depends on the noise pro-
duced by electrical appliances.
Variation on the long-term depends on the appliances
and their power consumption.
Link quality and link metric variation are strongly cor-
related and good links can be probed much less often
than bad ones.
Introduction of metrics and guidelines for accurate ca-
pacity estimation, which is required by IEEE 1905 [2].

5

6

6.2

6.3

6.2,
8.1

7

Retransmissions Due to Errors or Contention

Section

Discussion on metrics that use broadcast probing.
Expected transmission count (ETX) in PLC.
Sensitivity of link metrics to background traﬃc.

8.1
8.1
8.2

Table 1: Main ﬁndings and contributions

scheme is used for the initial channel estimation and com-
munication between two stations, but also for broadcast and
multicast transmissions. The destination estimates the chan-
nel quality using the sound frames, then it determines and
sends the tone map with a unique identiﬁcation – which is
analogous to MCS for 802.11n – back to the source. The
destination can choose up to 7 tone maps: 6 tone maps for
diﬀerent sub-intervals of the AC line cycle called slots, and
one default tone map. PLC uses multiple tone maps for the
diﬀerent sub-intervals of the AC line cycle, because the noise
and impulse response of the channel are varying along the
AC line cycle. Tone maps are updated dynamically, either
when they expire (after 30 s) or when the error rate exceeds
a threshold [6].

2.2 MAC Layer

We now review the MAC layer and describe its most im-

portant sub-functions.

Physical Blocks (PB): The MAC layer employs two-
level frame aggregation. First, the data are organized in
physical blocks (PB) of 512 bytes, then the PBs are merged
into PLC frames. A selective acknowledgment (SACK) of
the PLC frame acknowledges each PB, so that only the cor-
rupted PBs are retransmitted.

Access Methods: The MAC layer of IEEE 1901 includes
both TDMA and CSMA/CA protocols [6]. However, to the
best of our knowledge, all current commercial devices imple-
ment only CSMA/CA. The CSMA/CA protocol is similar
to 802.11 for wireless communications, but with important
diﬀerences that are summarized in [19]. The main diﬀer-
ence is that, contrary to WiFi, PLC stations increase their
contention windows (CW) not only after a collision, but also
after sensing the medium busy. This is regulated by an addi-
tional counter, called the deferral counter. One of the main
consequences is short-term unfairness that might yield high
jitter [19], [21].

326SACK : Retransmit P B1, P B3 and discard P B2 (based on P Berr)

Aggregation timer

ETH

PB

packets

generation

P B3 P B2 P B1

Frame

generation

Receiver
Decoding

PB Queue

BLEs

AC line cycle (50/60 Hz)

Beacon period (33.3/40 ms)

Figure 1: The PLC MAC layer

Management Messages (MMs): Management mes-
sages are a key feature of PLC. They are used for network
management, tone-map establishment and updating. Sta-
tions must exchange MMs each time the tone map is up-
dated, because the source has to be notiﬁed for the modula-
tion scheme of each carrier.

Vendor-Speciﬁc Mechanisms: IEEE 1901 leaves the
implementation of some mechanisms, such as the channel
estimation procedure described in Section 2.1, unspeciﬁed.
Therefore, they are vendor-speciﬁc and so far, vendors have
not released any detailed speciﬁcation for their devices.

In addition to MMs speciﬁed by the standard [6], there are
vendor-speciﬁc MMs. Vendor-speciﬁc MMs are employed
to conﬁgure the devices, modify the ﬁrmware, or measure
statistics. We use vendor-speciﬁc MMs to measure statistics
or conﬁgure the devices, as described in the next section.

Start-of-Frame Delimiter (SoF): The frame control,
or the start-of-frame (SoF) delimiter, of PLC contains in-
formation for both PHY and MAC layers. The bit loading
estimate (BLE) is retrieved from the SoF delimiter and is
an estimation for the capacity, as we observe in Section 7.
The BLE is an estimation of the number of bits that can be
carried on the channel per µs.

Definition 1. [6] Let Tsym be the OFDM symbol length
in µs (including the guard interval), R be the FEC code rate,
and P Berr be the PB error rate (chosen based on the expected
PB error rate on the link when a new tone map is generated.
It remains ﬁxed until the tone map becomes invalidated by a
newer tone map). Let also B represent the sum of number
of bits per symbol over all carriers. Then, BLE is given by

BLE =

B × R × (1 − P Berr)

Tsym

.

(1)

We now describe the MAC layer processes that aggregate
the Ethernet packets into PLC frames. Figure 1 sketches the
IEEE 1901 MAC layer. The Ethernet packets are organized
in PBs. Then, the PBs are forwarded to a queue, and based
on the BLE of the current tone-map slot s BLEs, they are
aggregated into a PLC frame. The frame duration is de-
termined by BLEs, the maximum frame duration (speciﬁed
by [6]), and an aggregation timer that ﬁres every few hun-
dreds of ms after the arrival of the ﬁrst PB, as concluded
from our measurements2. The PLC frame is transmitted
by a CSMA/CA protocol explained in [19]. The receiver
decodes the frame and transmits a SACK that informs the

2Note that the frame duration is a multiple of the symbol
duration, and that padding is used to ﬁll these symbols.

transmitter of which PBs were received with errors. We ob-
serve that the full retransmission and aggregation process,
and, as a result, the MAC and PHY layers, can be modeled
using only two metrics: P Berr and BLEs.

Today’s home networks, running 802.11n and/or 1901,
contain ﬁelds in the frame header that help the receiver de-
code the frame and that accurately estimate capacity. We
successfully employ these ﬁelds to aggregate bandwidth be-
tween the two mediums in Section 7. In the following, our
PLC link metrics will be BLE and P Berr.

3. EXPERIMENTAL FRAMEWORK

We describe the experimental settings used to produce the
measurements of this work. We provide guidelines for con-
ﬁguring and for obtaining various metrics from PLC devices.

3.1 Testbed and Setup

Our main testbed consists of 19 Alix 2D2 boards run-
ning the Openwrt Linux distribution [4]. The boards are
equipped with a HomePlug AV miniPCI card (Intellon INT6300
chip), which interacts with the kernel through a Realtek Eth-
ernet driver and with an Atheros AR9220 wireless interface.
All our stations are placed on the same ﬂoor of a univer-
sity building with oﬃces. Figure 2 represents a map of the
testbed along with the electrical map of the ﬂoor.

We next explain the PLC network structure. PLC uses
a centralized authority called the central coordinator (CCo)
to manage the network. To operate, each station must join
a network with a CCo. Usually, the CCo is the ﬁrst station
plugged and it can change dynamically if another station
has better channel capabilities than it does. Our ﬂoor has
two distribution boards that are connected with each other
at the basement of the building. This means that the cable
distance between the two boards (more than 200m) makes
the PLC communication between two stations at diﬀerent
boards challenging. Due to the two distribution boards,
none of the stations can communicate with all stations and
be the CCo. Hence, we create two diﬀerent networks, shown
with diﬀerent colors in Figure 2. To avoid modiﬁcations
in the network structure, we set the CCo statically in our
testbed using [5], a tool described in the next subsection.
These networks have diﬀerent encryption keys (there is en-
cryption on the MAC layer) and thus, only stations belong-
ing to the same network can communicate with each other.
In total, 144 links are formed.

In addition to using our main testbed, we experiment and
validate our ﬁndings with HPAV500 devices, the Netgear
XAVB5101 (Atheros QCA7400 chip)3. Due to space con-
straints, results are presented for our main testbed, unless
otherwise stated.

3.2 Measurement and Trafﬁc Tools

To retrieve the metrics for the PHY and MAC perfor-
mance evaluation, we use a tool that interacts with the
HomePlug AV chips, i.e., the Atheros Open Powerline Toolkit [5]4.
The tool uses vendor-speciﬁc management messages (MMs),
as described in Section 2.2, to interact with, and to conﬁgure
the devices. It also enables a sniﬀer mode with which we can

3Note that, compared to HPAV described in Section 2.1,
HPAV500 extends the bandwidth to 1.8-68 MHz.
4We have been equipped with devices from 6 vendors and
have been able to retrieve statistics from all devices using [5].

32717

m
0
4

16

18

10

9

11

8

B2

13

B1

5

4

3

2

0

1

15

14

12

7

6

70 m

Figure 2: The electrical plan and the stations (0-
18) of our testbed. There are two diﬀerent PLC
networks with CCo’s at stations 11 and 15. Sta-
tions marked with the same color belong to the same
network and are connected to the same distribution
board (either B1 or B2).

capture the SoF delimiters of all received PLC frames. To
generate traﬃc, we use iperf. For all the experiments, links
are saturated with UDP traﬃc (unless otherwise stated), i.e.,
stations transmit at maximum available rates, so that we
can measure metrics such as capacity. All the experiments
of this work have been repeated multiple times over a period
of one year to make sure that similar results are reproduced.
Table 2 outlines the metrics used throughout this work, as
well as the methods used to measure them.

Metric

Notation Measured with

Arrival timestamp
Bit loading estimate BLE
PB error probability
Average BLE
Throughput
MCS index (WiFi)

T
MCS

t

P Berr
BLE

SoF delimiter
SoF delimiter
MM (ampstat [5])
MM (int6krate [5])
iperf or ifstat
WiFi frame control

Table 2: Metrics and measurement methods

We are now ready to present our study on PLC.

4. WIFI VS PLC AND CHALLENGES

We ﬁrst study the spatiotemporal variation of WiFi vs
PLC in order to explore the possibilities of combining the
two mediums towards quality of service improvement, cover-
age extension and bandwidth aggregation. We then discuss
the challenges of hybrid implementations.

4.1 Spatial Variation: WiFi vs PLC

We ﬁrst compare the spatial variation of Wiﬁ and PLC
in our testbed, with WiFi and PLC interfaces having simi-
lar nominal capacities5. This study quantiﬁes the gains that
5We use 802.11n, with 2 spatial streams, 20MHz bandwidth
and 400 ns guard interval, yielding a maximum PHY rate of
130 Mbps. We selected a frequency that does not interfere
with other wireless networks in our building. The highest
PLC data-rate is 150 Mbps hence, both interfaces have sim-
ilar nominal capacities. This is conﬁrmed by the maximum
throughputs exhibited by both mediums, shown in Figure 3.

PLC can yield in situations with wireless “blind spots” or bad
links and also examines which medium an application should
use. We conduct the following experiment: For each pair of
stations, we measure the available throughput of both medi-
ums back-to-back for 5 minutes, at 100ms intervals. These
experiments are carried out during working hours to emulate
a realistic residential/enterprise environment. We show the
average and standard deviation of these measurements (for
links with a non-zero throughput for at least one medium).
Let TW and σW be, respectively, the average value and
standard deviation of throughput for WiFi (TP and σP , re-
spectively, for PLC). Figure 3 illustrates the results of our
experiment. Our key ﬁndings are as follows.

Connectivity: PLC yields a better connectivity than
WiFi. 100% of station pairs that are connected with WiFi
are also connected with PLC. In contrast, 81% of station
pairs that are connected by PLC links, are also connected
by WiFi links. At long distance (more than 35m), there is
no wireless connectivity whereas PLC oﬀers up to 41 Mbps.
Thus, PLC can eliminate, to a large extent, blind spots.

Average performance: 52% of the station pairs exhibit
throughput higher with PLC than with WiFi. PLC can
achieve throughput up to 18 times higher than WiFi (40.1 vs
2.2Mbps). The maximum gain of WiFi vs PLC was similar,
i.e., 12 times (46.3 vs 3.8Mbps).

Variability: At short distances (less than 15m), WiFi
usually yields higher throughput, but PLC oﬀers signiﬁcantly
lower variance. WiFi has higher variability with the maxi-
mum standard deviation of throughput being σW = 19.2
Mbps vs σP = 3.8 Mbps for PLC. The vast majority of PLC
links yield a σP smaller than 4 Mbps.

Conclusion: At long distances, PLC eliminates wireless
blind spots or bad links, yielding notable gains. At short
distances, although WiFi provides higher throughput, PLC
provides signiﬁcantly lower variance, which can be beneﬁcial
for TCP or applications with demanding, constant-rate re-
quirements, such as high-deﬁnition streaming. We explain
this diﬀerence by the ability of PLC to adapt each carrier
to a diﬀerent modulation scheme, contrary to WiFi (see Sec-
tion 2.1). PLC reacts more eﬃciently to bursty errors than
WiFi, which has to lower the rate at all carriers.

The spatial variation of WiFi has been extensively studied
(e.g., [14]). However, very few works exist on PLC; [11] fo-
cuses on a much older technology, and, due to the insuﬃcient
literature on speciﬁcations, [13] treats PLC as a black-box
and focuses on average performance and not on variability.
We next discuss the temporal variation of the two mediums.

4.2 Temporal Variation: WiFi vs PLC

We now look at the concurrent temporal variation of WiFi
and PLC during working hours for a much longer duration
than before. We are interested in exploring the timescales
at which the two mediums vary. Figure 4 shows the capacity
for concurrent tests on WiFi and PLC, estimated by using
MCS and BLE respectively, and averaged over 50 packets.
We observe that link 3-8, which is a good link, exhibits a
variation much higher with WiFi than with PLC. Although
we would expect channel changes due to switching electri-
cal appliances in the building, the PLC link is almost not
aﬀected by people leaving the premises (around 6pm). The
average link 3-0 varies more for both mediums.

These preliminary results imply that PLC has low variabil-
ity for good links and high for bad links. To the best of our

328100

80

60

40

20

)
s
p
b
M

(

W
T

0

0

12

10

8

6

4

2

P
T
/
W
T

)
s
p
b
M

(

W
σ

20

15

10

5

0

0

TW = TP

20

40

60
TP (Mbps)

80

σW = σP

2

σP (Mbps)

4

15

10

5

0

P
σ
/
W
σ

10

40
Distance between stations (m)

30

20

0

10

40
Distance between stations (m)

20

30

Figure 3: WiFi vs PLC performance for all links
(top). Spatial variation of the performance ratio be-
tween WiFi and PLC (bottom).

100

)
s
p
b
M

(

y
t
i
c
a
p
a
C

80

60

40

20

0

Link 3-8, 4:30 pm

PLC

WiFi

2000

4000
Time (s)

6000

)
s
p
b
M

(

y
t
i
c
a
p
a
C

60

40

20

60

40

20

Link 4-0, 11:30 am

PLC

0

2000

4000

6000

8000

10000

WiFi

0

2000

4000

6000

Time (s)

8000

10000

Figure 4: Temporal variation of capacity for PLC
and WiFi
for two links during working hours
(started time written).

knowledge, there are not any temporal-variation studies of
the end-to-end performance of PLC. In contrast, many stud-
ies have focused on WiFi temporal variation. In Section 6,
we study the PLC temporal variation and we observe that
the variability is high in timescales of hours, because of the
variations of the electrical load. We notice however, that
this variation is not signiﬁcant, compared to the one of Wiﬁ,
and that it is high only for bad links.

4.3 Challenges in Hybrid Networks

As we observe in Section 4.1, although PLC boosts net-
work performance, there are still a few links that perform
poorly with both WiFi and PLC. As a result, mesh con-
ﬁgurations, hence routing and load balancing algorithms,
are needed for seamless connectivity in home or oﬃce en-
vironments. A challenge for these algorithms is that they
have to deal with two diﬀerent interference graphs with di-
verse spatio-temporal variation, and that, to fully exploit all
mediums, they require accurate metrics for capacity and loss
rates. To this end, unicast probes must be exchanged among

the stations6. In a network of n stations, probing introduces
an O(n2) overhead that can be signiﬁcantly reduced by em-
ploying temporal variation studies of each medium.

A signiﬁcant challenge, highlighted by recent studies in
802.11n networks [16], is the accuracy of established quality
metrics, such as the expected transmission count (ETX) or
time (ETT) [8], in modern networks, i.e., 802.11n/ac. The
authors in [16] show that due to the MAC/PHY enhance-
ments introduced in 802.11n, these metrics perform poorly
and that they should be revised, given that they have been
evaluated only under 802.11a/b/g.

The above arguments raise a few questions: How often
should the PLC link metrics, such as capacity, be updated
in load-balancing or routing algorithms in order to achieve
both small overhead and accurate estimation? How would
ETX perform in PLC? We will answer these questions in
Sections 5–8. In the rest of this work, we design link metrics
for PLC and explore their variation with respect not only to
time, but also to space and to background traﬃc.

5. SPATIAL VARIATION OF PLC

We explore the spatial variation of PLC, as it is important
for predicting coverage and good locations for PLC stations,
and for implementing link metrics. We ﬁnd that PLC is
highly asymmetric, and this should be considered when es-
timating link metrics.

We ﬁrst explain the main properties of the channel that
aﬀect both spatial and temporal variations. The two main
components of PLC channel modeling are attenuation and
noise. Consider an example of a simple electrical network
with a transmitter (TX) and receiver (RX), as given in
Figure 5. The main sources of attenuation and noise are
the electrical appliances plugged in between. Modeled with
dashed boxes in Figure 5, each connected appliance has an
impedance and produces some noise that is non-Gaussian
and that depends on the device type, as shown in [9]. The
authors in [9] summarize the diﬀerent types of noise existing
in the PLC channel.

The spatial variation of PLC is mainly aﬀected by the
position, the impedance, and the number of appliances con-
nected to the network. When it comes to PLC, the electri-
cal cable becomes a transmission line, with a characteristic
impedance. The connection of appliances creates impedance
mismatches to this transmission line, causing the transmit-
ted signal to be reﬂected multiple times. For example, in Fig-
ure 5, at point M, we have an impedance mismatch and any
signal s arriving at M is partly reﬂected (signal r) and partly
propagates (signal t) towards the same direction as the orig-
inal signal s. Reﬂections of signals at various impedance-
mismatched points result in multiple versions of the initially
transmitted signal arriving at diﬀerent times at the receiver,
thus establishing a multi-path channel for PLC. We will see
in the next section that temporal variation is aﬀected by
multi-path eﬀects, i.e., the appliances’ impedance, in long-
term timescales, whereas it is aﬀected only by noise at short-
term timescales.

A very important characteristic of power-line channels is
that they exhibit performance asymmetry, i.e., capacity can
diﬀer signiﬁcantly between the two directions of the link.
In all the experiments we run (both with AV and AV500),

6Broadcast packets cannot be used to estimate capacity. See
for example [7], [8].

329TX

t

M

s

r

RX

Figure 5: Multi-path and noise in PLC channels

we observe a performance asymmetry of more than 1.5x in
approximately 30% of stations pairs in our testbed. Fig-
ure 6 presents typical examples of these links, for which the
throughput in one direction is less than 60% of the through-
put in the opposite direction. By re-conducting the exper-
iments with AV500 devices, we verify that the asymmetry
is not due to the hardware. Link asymmetry in PLC has
been also observed in [13]. We attribute this asymmetry to
a high electrical-load (for instance, one or more appliances
with much higher impedance than cable’s impedance) exist-
ing close to one of the two stations. In this case, the channel
cannot be considered as symmetric and the two transmission
directions in the link experience diﬀerent attenuations.

In our tests with WiFi, presented in Section 4, we also
observe that wireless channels can also exhibit asymmetry.
However, compared to PLC, this occurs on a much smaller
subset of links, and is much less severe (for instance, the
WiFi asymmetry was up to 1.5x for good links and up to
3.5x for bad links). An asymmetry of loss rates has been
found experimentally for residential WiFi networks in [14].

)
s
p
b
M

(

t
u
p
h
g
u
o
r
h
T

60

40

20

0

Direction x–y
Direction y–x

2-7

4-5

18-15

4-7

2-5

17-16

9-5

17-15

6-5

18-16

4-2

Link x-y

Figure 6: Throughput asymmetry in PLC links.

We now turn to our spatial variation study, where we use
both AV and AV500. Figure 7 provides the available UDP
throughput of single links as a function of the cable distance
between the source and the destination of the traﬃc from a
single experiment. There is a clear degradation of through-
put as distance increases. However, because of the diver-
sity in positions and types of connected appliances, there
is a large range of possible throughputs at any speciﬁc dis-
tance. We observe that small distances (<30m) guarantee
good links, but that large distances (30-100m) can yield ei-
ther good or bad links. By comparing AV and AV500, we
observe that AV500 enables some links with no AV connec-
tivity to still enjoy a non-zero throughput, but with severe
asymmetries (e.g., link 10-2 with 10x asymmetry).

To further explore the causes that aﬀect the attenuation,
we run some experiments with two stations connected by a
long electrical cable and without any devices attached. We
notice that the attenuation in an up to 70 m cable causes
a throughput drop of at most 2 Mbps. The attenuation
is therefore caused by the multi-path nature of the PLC
channel. By plugging electrical appliances in this isolated

)
s
p
b
M

(

t
u
p
g
h
u
o
r
h
t
V
A

80

60

40

20

AV500

AV

240

210

180

150

120

90

60

30

0
0
20 30 40 50 60 70 80 90 100

Cable distance (m)

)
s
p
b
M

(

t
u
p
h
g
u
o
r
h
t

0
0
5
V
A

0.4

0.3

0.2

0.1

r
r
e

B
P

0

0

20

60

80
PLC Throuhgput (Mbps)

40

Figure 7: Throughput vs cable distance between
source and destination for all links of the test-bed
(left). P Berr vs throughput for AV (right).

experiment, we observe that asymmetry was introduced, as
also found in [13].

Conclusion: The spatial variation of the PLC channel
depends on two factors: (i) the structure of the electrical
networks, i.e., the appliances attached and their position
on the grid, (ii) the distance between the stations. PLC
channels are very asymmetric and this is a key feature for
their spatial variability.

To optimize performance not only in terms of through-
put but also delay, hybrid networks need some estimation
of the retransmissions a frame suﬀers due to channel errors.
We also evaluate the relationship of the metric P Berr with
the available throughput. Figure 7 illustrates P Berr vs the
available throughput for all the links of our testbed. It shows
that P Berr decreases as throughput increases, as expected.
However, because the tone maps are updated based on this
metric, some average links might have lower P Berr than
the best links of the testbed. We further study the P Berr
metric in Section 8, by delving into packet retransmissions.
We show that P Berr can be used to predict the expected
number of retransmissions due to errors.

6. TEMPORAL VARIATION OF PLC

Little is known about PLC temporal variation, and we
observe in Section 4 that a temporal-variation study could
improve the quality of service in hybrid networks and the
accuracy of link metrics estimation. We now investigate the
temporal variation of the PLC channel.

We examine separately the two main components of chan-
nel modeling, i.e., the variation of noise generated by the
attached electrical appliances, and the variation of channel
transfer function (or attenuation). We employ BLE to inves-
tigate the main properties of PLC channels by using existing
commercial devices. We show that BLE reﬂects the chan-
nel quality and the fundamental features of PLC channel
modeling explained in Section 5.

We now discuss the timescales within which the channel
varies. These timescales have been introduced for channel
modeling and simulation in [15] (from which we borrow the
terminology to name these timescales). We ﬁrst focus on
noise generated by electrical appliances. It has been shown
by measurements, e.g., in [9], that the noise level varies
across subintervals of the mains cycle7 which yields the ﬁrst
scale governing PLC temporal variation (scale (i)). Due to
the periodic nature of the mains, this noise also varies in a

7The term mains cycle refers to the alternating electrical
current.

330scale of multiples of the mains cycle, which results in another
timescale for the temporal variation (scale (ii)).

We next focus on attenuation. As discussed in Section 5,

attenuation is introduced due mainly to impedance mismatches
in the transmission line (electrical cable) that are created by
connected appliances. As expected, this attenuation changes
when the structure of the electrical network changes hence,
in scales of minutes or hours (scale (iii)). This variability
strongly depends on appliances usage and on switching the
appliances, as this creates impulsive noise in the channel.

As hinted above, our study adopts an analysis of three
timescales that is validated by our measurements in the fol-
lowing subsections. Our work diﬀers from [15] in that we
examine the channel quality from an end-user and practi-
cal perspective, exploring metrics aﬀecting the end-to-end
performance. The three timescales are as follows.

(i) Invariance Scale: subintervals of the mains cycle, such

as the 6 tone-map slots of HPAV;

(ii) Cycle Scale: multiples of the mains cycles – depends

on the noise produced by appliances;

(iii) Random Scale: minutes or hours – related to connec-
tion or switching of electrical appliances and depends
on human activity.

We now introduce our variables, starting with some nota-
tions. For the invariance scale, we use the term tone-map
slots for the subintervals of the mains cycle, as we can mea-
sure the channel quality with respect to tone-map slots by
using PLC devices. Let L be the total number of tone-map
slots of the mains cycle, with each slot s having a duration
Ts, so that the total slots duration PL
s=1 Ts is equal to half
mains period (as speciﬁed in [6]). Let BLEs, 1 ≤ s ≤ L,
denote the BLE of tone-map slot s. In order to study the
channel with respect to the three scales deﬁned above, we
assume that time is discrete, with one time unit having real-
time duration equal to the mains cycle. Let µs ∈ R+ and
σs ∈ R+, 1 ≤ s ≤ L, represent the expected value and the
standard deviation of BLEs, and let νσs be a continuous
random variable with 0 mean and variance equal to σ2
s . In
the cycle scale, the mean and variance of BLEs, µs and σs,
respectively, are considered to be constant, and the varia-
tion of BLEs around its mean is described by νσs . In the
random scale, µs and σs vary with time due to electrical
load variability. Given the above, at any time step t, the
channel quality is described as

Timescale

BLEs

Variability caused by

(i) Invariance

Periodic noise

synchronous to mains

Mains cycle (20 ms)

BLE ˙= PL

s=1 BLEs/L

(ii) Cycle

Noise variability for each
tone-map slot s, 1 ≤ s ≤ L

Multiples of mains

cycle (ms or s)

BLE

(iii) Random

E

Minutes or hours

Electrical-load, hence
attenuation variability

Figure 8: BLE temporal variation.

levels over diﬀerent tone-map slots. Figure 9 shows the in-
stantaneous BLEs from captured frames in typical examples
of good and average links. We observe that in HPAV, the
total duration of the 6 tone-map slots is equal to half of the
mains cycle, thus BLEs changes periodically, with a period
of 10 ms. Each PLC frame uses a diﬀerent BLEs, depending
on which tone-map slot s its transmission takes place.

60

40

20

)
s
p
b
M

(

s

E
L
B

0

0

Link 6-1

20

40

60

80

Time (ms)

)
s
p
b
M

(

s

E
L
B

140

120

100

80

60

Link 0-2

0

20

40

60

80

Time (ms)

Figure 9:
captured PLC frames of saturated traﬃc.

Invariance-scale variation of BLE from

We highlight that this timescale is crucial for capacity es-
timation in PLC. With the examples of Figure 9, we observe
that there might be signiﬁcant variation along the mains cy-
cle, even for good and average links. Thus, link metrics have
to be estimated or averaged over all L = 6 tone-map slots.
We next study the average BLE of all 6 slots to examine the
variability of the average link-quality at longer time-scales,
i.e., (ii), and (iii).

BLEs(t) = µs(t) + νσs(t)(t), 1 ≤ s ≤ L.

(2)

6.2 Cycle Scale

The process νσs is diﬀerent for each link and its distribu-
tion can be time-varying over the random scale for a speciﬁc
link, due to the diﬀerent types of operating appliances and
to diﬀerent channel transfer-functions. The exact character-
ization of νσs is out of the scope of this work. In our study
for cycle-scale variation, we study how often the value of νσs
changes and how σs behaves with respect to the link qual-
ity. Figure 8 illustrates the three timescales and the factors
causing variability. We next examine each timescale.

6.1 Invariance Scale

The invariance scale of BLE is aﬀected by the noise lev-
els that appliances produce at diﬀerent subintervals of the
mains cycle, and it has direct consequences on estimating
link metrics. All our tests showed that noise has varying

We now examine the average time during which the qual-
ity of the links is preserved in the cycle scale. This sheds
light on the average length of probing intervals for link met-
rics, as there exists a tradeoﬀ in probing: too large intervals
might yield a non-accurate estimation, whereas too small
intervals can generate high overhead.

We conduct experiments that last 4 minutes, over all links
of the testbed. During each experiment, we request BLEs,
1 ≤ s ≤ L, every 50 ms, as this is the fastest rate at which
we can currently send MMs to the PLC chip. As we need
to avoid random changes in the channel due to switching
electrical appliances, all the experiments of this subsection
are conducted during nights or weekends (given the oﬃce
environment). For the cycle scale variation of the channel,
we assume that the electrical network structure is ﬁxed.

331.
Here, we evaluate the cycle-scale variation by using BLE
=
P6
s=1 BLEs/6, that is the average BLE over all tone-map
slots. We compare the performance between good and bad
links8. Figure 10 presents the variation for typical good and
bad links of our testbed. Observe that depending on their
quality, links exhibit diﬀerent behaviors. Our ﬁndings, vali-
dated not only by the representative examples shown here,
but also by experiments over one year period in all the links
of our testbed, are as follows.

Bad Links: Bad links, e.g., 11-4 and 6-5, tend to modify
the tone maps much more often than good links do. More-
over, they yield a signiﬁcantly higher standard deviation of
BLE than good links.

Average Links: Average links, e.g., 18-15 and 1-2, vary
less than bad links, and might preserve their tone maps for a
few seconds. During periods when average links vary often,
the standard deviation of BLE can be high, depending on
the channel conditions.

Good Links: The tone maps of good links can be valid
for several seconds, e.g., link 15-18. Good links that update
often the tone maps, such as link 3-1, have insigniﬁcant in-
crements or decrements, e.g., of up to 1%, or have impulsive
drops of BLE, e.g., of up to 5%, with the channel estimation
algorithm needing a few time-steps to converge back to the
average BLE value.

Asymmetry in Temporal Variability: By observing
links 15-18 and 18-15, we ﬁnd that the asymmetry discussed
in Section 5 translates not only in an average performance
asymmetry, but also in a temporal-variation asymmetry.

Channel Estimation Algorithms: Temporal variation
of link 15-18 is the same with HPAV and with HPAV500.
By noticing the impulsive BLE drops in link 18-15 and
by comparing HPAV with HPAV500, we detect a feature
of the channel estimation algorithm that might be vendor-
speciﬁc: The HPAV500 performance oscillation shows that
the estimation algorithm returns very low BLE values when
bursty errors occur. This uncovers that temporal variation
in PLC link quality also depends on the channel estimation
algorithm and future work should focus on comparing link-
metric estimations for diﬀerent vendors and technologies.

We next corroborate the above ﬁndings over all links of our
testbed. Let α be the inter-arrival time of two consecutive
BLE updates. Figure 11 shows the results of the average α
values and the standard deviation of BLE for all links sorted
by increasing BLE order, i.e., link quality. We observe that
good links tend to update less often their tone maps, and
also that BLE variability is smaller compared to bad links.
Although some good links might update BLE at a similar
frequency as bad links (∼ 100 ms), as we discussed above,
these links tend to have small increments and decrements
of BLE, yielding a stable average performance over minutes
and a low BLE standard deviation.

Conclusion: In cycle scales, that is seconds or minutes,
good links should be probed less often than bad links to
reduce overhead. The cycle-scale variation unveils how link
metrics should be updated depending on their quality.

6.3 Random Scale

In Sections 4.2 and 6.2, we observe that during timescales
of minutes, PLC does not vary much, with a standard devi-

8The classiﬁcation of the links based on their capacity de-
pends on the PLC technology thus, we do not introduce
strict thresholds for this characterization.

)
s
p
b
M

(

E
L
B

45

40

35

30

25

20

Oct. ’14

0

50

Link 11-4

Dec. ’14

150

100
Time (s)

Link 18-15

200

HPAV500
Feb. ’15

100

)
s
p
b
M

(

E
L
B

90

80

70

60

HPAV
Sept. ’14

0

50

100
Time (s)

150

200

)
s
p
b
M

(

E
L
B

150

140

130

120

110

100

90

Link 15-18

HPAV500

HPAV March ’14

HPAV Sept. ’14

0

50

150

100
Time (s)

200

30

25

20

15

)
s
p
b
M

(

E
L
B

10

0

90

80

70

60

)
s
p
b
M

(

E
L
B

50

0

122

120

118

116

)
s
p
b
M

(

E
L
B

114

0

Link 6-5

HPAV Dec. ’14
HPAV Sept. ’14

50

100
Time (s)

150

200

Link 1-2

HPAV
Feb. ’15

HPAV
Dec. ’14

50

100
Time (s)

150

200

Link 3-1

HPAV
Dec. ’14

HPAV
Feb. ’15

50

100
Time (s)

150

200

Figure 10: Examples of cycle-scale variation of BLE
for links of various qualities

104

103

102

)
s

m

(

α

e
g
a
r
e
v
A

)
s
p
b
M

(

E
L
B

f
o

d
t
S

6

4

2

0

0

20 40 60 80 100120140
Average BLE (Mbps)

20 40 60 80 100 120 140
Average BLE (Mbps)

Figure 11: Cycle-scale variation of BLE with respect
to the link quality (links are sorted with increasing
average BLE order).

ation of throughput up to 4 Mbps. We now look at longer
timescales, i.e., in terms of minutes and hours, with two
goals: (i) to examine whether some links could be probed at
a slow rate, thus reducing overhead; (ii) to characterize the
variability of PLC performance in presence of high and low
electrical loads. To study the channel quality variation over
the random scale, we run tests over long periods, i.e., two
days and two weeks, for various links. During these tests we
measure the throughput, BLE, and P Berror every second.
We now denote by µ the mean of BLE = P6
s=1 BLEs/6,
and by σ its standard deviation.

Figures 12-14 show the results of our measurements. Our

observations are as follows.

Link Quality vs Time: The variation of µ is governed
by the electrical load. The larger the number of switched-on
devices is (e.g., at working hours) the larger the attenuation
is, and the lower µ is, as we have discussed in Section 5.

Link Quality vs Variability: Observe the diﬀerences in
the y-axis scales in Figures 13 and 14 that represent a good

332Link 15-16

Throughput

9PM

P Berr

)
s
p
b
M

(

t
u
p
h
g
u
o
r
h
T

40

20

3 P M
3 P M

6 P M
6 P M

9 P M
9 P M

12 A
12 A

M
M

M
M

3 A
3 A

6 A
6 A

M
M

9 A
9 A

M
M

12 P M
12 P M

3 P M
3 P M

6 P M
6 P M

9 P M
9 P M

12 A
12 A
Time of the day
Time of the day

M
M

M
M

3 A
3 A

6 A
6 A

M
M

9 A
9 A

M
M

12 P M
12 P M

3 P M
3 P M

6 P M
6 P M

BLE

130

)
s
p
b
M

(

E
L
B

120

110

Link 0-1

9PM-9AM

9PM-9AM

P Berr

)
s
p
b
M

(

c
i
r
t
e

M

60

50

40

30

20

Link 1-9

BLE

Throughput

0

50

100

150

200

Time (s)

)
s
p
b
M

(

E
L
B
e
g
a
r
e
v
A

150

100

50

0

0

BLE = 1.7T − 0.65

50

100

Throughput T (Mbps)

Figure 15: BLE and throughput averaged every 1 s,
vs time, for link 1-9 (left). Average BLE vs through-
put for all the links (right).

0.2

0.1

r
r
e

B
P

0.08

0.06

r
r
e

B
P

12PM 6PM 12AM 6AM 12PM 6PM 12AM 6AM 12PM

0.03

7. CAPACITY ESTIMATION PROCESS

Time of the day

Figure 12: Random-scale variation of PLC over a
total duration of 2 days. Metrics are averaged over
1 minute intervals. Every day at 9pm, all lights
are turned oﬀ in our building, leading to a channel
change for PLC.

)
s
p
b
M

(

E
L
B

96

94

92

90

88

)
s
p
b
M

(

E
L
B

96

94

92

90

88

12PM 6PM 12AM 6AM
Time of the day (weekends)

12PM 6PM 12AM 6AM
Time of the day (weekdays)

Figure 13: Random-scale variation of BLE for link
1-8 over 2 consecutive weeks. Lines represent the
BLE averaged over the same hour of the day and
error bars show standard deviation.

50

45

40

35

30

)
s
p
b
M

(

E
L
B

25

12PM 6PM 12AM 6AM

)
s
p
b
M

(

c
i
r
t
e

M

60

40

20

0

Weekend

BLE

Throughput

12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27

Time of the day (weekdays)

Date (ticks at 12am)

Figure 14: Random-scale variation of BLE for link
2-11 over 2 consecutive weeks in Nov. 2014.

and a bad link, respectively. For a given link, the random-
scale variation of σ strongly depends on the noise of the
electrical devices attached, and it is higher when µ is lower,
as this implies that more devices are switched on and there-
fore, more noise is produced, or that devices are switched
on/oﬀ more often, creating impulsive noise phenomena. σ
is very small for good links; it increases as the link quality,
i.e., µ, decreases.

Link Probing: Good links exhibit a negligible standard

We now explore a capacity estimation process for PLC.
As mentioned in Section 2.1, stations estimate a tone map
if and only if they have data to send. Thus, to estimate
link metrics, a few unicast probe packets have to be sent. In
Section 6, we discuss how fast the capacity changes given the
link quality by sending saturated traﬃc. Here, we examine
how capacity can be estimated with a few probe packets and
we explore the size and the frequency of these packets.

7.1 BLE as a Capacity Estimator

First, we show that BLE, which is included in the header
of every PLC frame, accurately estimates the capacity of any
PLC link. We repeat saturated tests for our 144 links and
with a duration of 4 min. Figure 15 presents the measured
throughput and BLE. We observe that BLE is an exact
estimation of the actual throughput received by the applica-
tion. Let T be the average throughput. Fitting a line to the
data points, we get BLE = 1.7T − 0.65. We veriﬁed that
the residuals are normally distributed.

We next discuss a capacity estimation technique that uses
BLE and probe packets. To conduct a capacity estimation
using BLE, a few packets per mains cycle and estimation
interval should be captured, given our temporal variation
study in Section 6.1. Here, we investigate an alternative
technique that uses MMs to request the instantaneous BLE.
The PLC devices provide statistics of the average BLE used
over all 6 tone map slots. Probe packets need not to be sent
at all sub-intervals of the mains cycle, because according to
1901 [6], the channel estimation process yields a BLE for all
slots when at least 1 packet is sent.

We explore whether the number of the probes aﬀects the
estimation. To this end, we reset the devices before every
run. We perform experiments to estimate the capacity, by
sending only a limited number of packets of size 1300B per
second (1- 200 packets per second)9. Figure 16 shows that
the estimated capacity converges to a value that does not
depend on the number of packets sent; however, the number
of packets sent per second aﬀects the convergence time to
the real estimation. We observe that the channel-estimation
algorithm can have a large convergence time to the optimal
allocation of bits per symbol for all the carriers, because it
needs many samples from many PBs to estimate the error for
every frequency, i.e., carrier. This convergence time depends
on the (vendor-speciﬁc) channel-estimation algorithm and
on the initial estimation (which was reset by us).

deviation, which implies that they can be probed every minute
or hour, depending on the time of the day.

9Note that the probe packets can be of any size. PLC always
transmits at least a PB (500B), using padding.

333Estimated capacity (Mbps)
vs Time (s) for link 1-11
1 packet/s

0

0

0

0

2000

4000

6000

8000

10 packet/s

2000

4000

6000

8000

50 packet/s

2000

4000

6000

8000

200 packet/s

2000

4000

6000

8000

120
100
80
120
100
80

120
100
80

120
100
80

Estimated capacity (Mbps)
vs Time (s) for link 1-5
60
40
20
60
40
20

10 packet/s

1 packet/s

6000

2000

4000

8000

2000

4000

6000

8000

50 packet/s

2000

4000

6000

8000

200 packet/s

2000

4000

6000

8000

0

0

0

0

60
40
20

60
40
20

Figure 16: Estimated capacity for two links and dif-
ferent number of packet-probes per second.

To evaluate the convergence time in realistic scenarios,
we now perform a test in which we reset the devices at the
beginning, but after 2300 s we pause the probing for ap-
proximately 7 minutes. Figure 17 shows the results of the
experiments for various links. It turns out that the devices
maintain the channel-estimation statistics, as the estimated
capacity resumes from the previous value before stopping the
probing process. Thus, the convergence time of the capacity
estimation does not apply in realistic probing conditions.

150

100

50

0

0

)
s
p
b
M

(

y
t
i
c
a
p
a
c

d
e
t
a
m

i
t
s
E

Link 1-0

Link 1-6

Link 1-5

Link 1-10

Pause

Resume

1000

2000

3000

4000

5000

Time (s)

Figure 17: Estimated capacity for various links by
probing with 20 packets per second. After 2300s, we
pause the probing for 7 minutes and we observe that
this does not aﬀect the estimation.

Conclusion: Capacity should be estimated by sending
probe packets and measuring BLE in PLC networks. To
estimate capacity, given our study in Section 6.1, we have
to take into account the invariance scale and to either com-
pute the average BLE = P6
s=1 BLEs/6, by capturing PLC
frames or request it using MMs. One of the remaining chal-
lenges in link-metric estimation is to take into account the
technology-speciﬁc MAC mechanisms, such as frame aggre-
gation. This remains a challenge also for the latest WiFi
technologies, as highlighted in [16].

7.2 Size of Probe Packets

We now investigate the size of probe packets. We observe
that for the special case of sending 1 probe-packet with size
less than one PB per second, the estimation might converge
to a smaller value than the true one for HPAV and remain
constant with time, independently of the channel conditions.
A representative example of this behavior is shown in Fig-
ure 18, where HPAV capacity converges to approximately
89 Mbps when sending only 1 packet per second with size
less than one physical block (520B including 8B PB header).
After this convergence, the estimated capacity remains con-
stant. A simple computation shows that the rate required to

transmit one PB in one OFDM symbol is R1sym = (520 ×
8)/Tsym ≈ 89.4Mbps with HPAV, given the symbol dura-
tion Tsym = 40.96µs. When sending packets smaller than
one PB, the rate converges to R1sym for all 6 slots of the
mains cycle, because increasing the rate does not reduce the
transmission time (it is not possible to transmit less than
1 OFDM symbol) while decreasing the probability of error
(higher rates yield less robust modulation schemes). Hence,
we unveil that to estimate the capacity of a link by send-
ing only one probe packet per second, it is crucial to send
packets larger than 1 PB or 1 OFDM symbol.

120

100

80

60

)
s
p
b
M

(

y
t
i
c
a
p
a
c

d
e
t
a
m

i
t
s
E

1300B

200B

521B

520B

0

2000

4000

6000

8000

10000

Time (s)

Figure 18: Estimated capacity with 1 probe packet
per sec and various sizes for link 11-6.

We next provide an example of how our temporal varia-
tion study can be used to adjust the frequency of the probe
packets such that the overhead is reduced, while maintaining
a good level of accuracy.

7.3 Frequency of Probe Packets

We explore the tradeoﬀ of accuracy vs overhead in prob-
ing for capacity estimation. To this end, we run a simple
example that uses the measurements of Section 6.2. We as-
sume that any link is probed at a speciﬁc interval which is
1) the same for all links; 2) depends on link quality. We
employ the BLE measured at these intervals as an estima-
tion of the capacity and we consider as exact capacity the
average values of BLE until the next probe. Let t be an
estimation instant and i the probing interval in multiples of
50ms (period of measurements). The estimation is BLEt,
and the exact capacity is BLEe(t) = Pt+i−1
l=t BLEl/i. Then,
the estimation error is computed as the absolute value of
the diﬀerence between the estimation and the exact capac-
ity, i.e., |BLEt − BLEe(t)|.

Our network consists of at least 10 stations, thus, to achieve
low overhead, we assume that stations send at most 1 probe
packet per 5 seconds (which yields a 240Kbps probing over-
head if 1500B probes are used), and we adopt this interval
as a baseline. We also explore probing at lower frequencies,
such as once per 80 seconds. The method that uses our tem-
poral variation study, probes bad links once per 5 seconds,
average links 8 times slower, and good links 16 times slower
(once per 80 seconds)10. To classify the quality of the links,
we use heuristics based on our study in Section 6.2: bad links
have a BLE below 60Mbps, good links have a BLE above
100 Mbps, and average links have a BLE in between. Fig-
ure 19 presents the CDF of the estimation error for all links
and all intervals. With our method, we manage to reduce
the probing overhead by 32% compared to probing all links
once per 5 seconds, while maintaining very good accuracy.

10The exact frequency of probes should be adjusted to the
network size and the PLC technology.

334)
x
(
F

1

0.8

0.6

0.4

0.2

0

0

Empirical CDF

Our method
Probing per 5 sec.
Probing per 80 sec.

10

20

Estimation error (Mbps)

Figure 19: Comparison of estimation error for dif-
ferent probing frequencies. By adjusting the prob-
ing frequency to the link quality (our method ), we
achieve very good accuracy with 32% overhead re-
duction compared to probing once per 5 seconds.

These results suggest that by studying the PLC network
and its temporal variation, probing can be optimized to
achieve a good tradeoﬀ between overhead and accuracy. To
estimate an appropriate probing interval based on the net-
work size and the aggregate link quality, the CCo of the
network can employ the information on the quality of all
the links and update the interval value by broadcasting to
all stations. We next validate our capacity estimation and
temporal variation studies by a load-balancing algorithm.

7.4 Bandwidth Aggregation Using Capacity

To further validate our capacity estimation method, we
employ a simple load-balancing algorithm that aggregates
bandwidth between WiFi and PLC and operates between
the IP and MAC layers. To implement our algorithm, we use
the Click Modular Router [10]. We forward each IP packet
to one of the mediums with a probability proportional to
the capacity of the medium. At the destination, we reorder
the packets according to a simple algorithm that checks the
identiﬁcation sequence of the IP header. We measure the
jitter and compare it with the jitter when using only one
interface, making sure that it does not worsen. The details
of our implementations are given in [20].

To estimate the capacities, we probe links with 1 packet
per second and request BLE and MCS from the interfaces.
The capacity for PLC is estimated using BLE, i.e., averaged
over the 6 tone-map slots of the invariance scale, whereas for
WiFi MCS capacity is averaged over the transmissions (data
and probes) during every second, because, as we observe in
Section 4.2, WiFi varies more than PLC within a second.
Our load-balancing algorithm takes into account our tempo-
ral variation study on PLC: In Section 6.1, we uncover that
the PLC channel quality is periodic, with every packet us-
ing a diﬀerent BLE. Because an accurate synchronization at
this time-scale is challenging for algorithms operating above
the MAC layer (such as in IEEE 1905 standard), the ca-
pacity of PLC in hybrid networks has to be estimated by
averaging over the invariance scale.

In Figure 20, we ﬁrst present the throughput of experi-
ments on one link. We run four experiments back-to-back,
using only one of the interfaces (WiFi, PLC) in two, us-
ing both interfaces and our load-balancing algorithm (Hy-
brid) in one, and using both interfaces and a round-robin
scheduler for the packets (Round-robin) in the last one. We
observe that by using simple load-balancing and reordering
algorithms, and our capacity-estimation technique, we can
achieve a throughput that is very close to the sum of the

capacities of both mediums. In contrast, the throughput of
a round-robin scheduler, which has no information on ca-
pacity, is limited to twice the minimum capacity of the two
mediums (i.e., WiFi in this example), because it assigns the
same number of packets to each medium and the slowest
medium becomes a bottleneck. To evaluate our algorithm
across our testbed, we also compare the completion times of
a 600Mbyte ﬁle download using (i) only WiFi, and (ii) both
mediums11, observing in the same ﬁgure, a drastic decrease
in completion times when using both mediums.

Link 0-4

70

60

50

40

30

20

10

)
s
p
b
M

(

t
u
p
h
g
u
o
r
h
T

Hybrid

Round-robin

PLC

Wiﬁ

0

0

100

200

300

400

500

Time (s)

)
s
(

e
m

i
t

n
o
i
t
e
l

p
m
o
C

500

400

300

200

100

0

WiFi
Hybrid

0-9

0-5

9-0

9-6

9-7

2-5

6-1

6-2

7-9

3-9
1-6
1-8
2-11
Link

Figure 20: Performance boost by using hybrid
Wiﬁ/PLC, and our load-balancing and capacity-
estimation techniques.

Our tests validate our capacity estimation methods. They
also show that, to exploit each medium to the fullest extent,
accurate link-quality metrics are required. However, an open
question to be answered is: How should the link metrics
be updated to take into account delay or contention? In
the next section we investigate another link metric, i.e., the
expected number of retransmissions, and the performance of
link metrics with respect to background traﬃc.

8. RETRANSMITTING IN PLC CHANNELS
Capacity is a good metric for link quality. However, it
does not take into account interference, which is very im-
portant for selecting links with high available bandwidth.
Moreover, another metric could be useful for delay sensitive
applications that do not saturate the medium but have low
delay requirements. Delay is aﬀected by retransmissions ei-
ther due to bursty errors or to contention, and metrics, such
as P Berr introduced in Section 5 (or packet errors [2]), are
related to retransmissions. We explore the mechanism of
retransmissions in PLC networks. We ﬁrst study another
link metric, which is the expected transmission count (ETX).
Numerous works, e.g., [7], [8], study this metric (or its vari-
ations) in WiFi networks by sending broadcast probes. We
examine how ETX performs in PLC and the relationship
between broadcast and unicast probing.

After studying retransmissions due to errors, we evaluate
the sensitivity of link metrics to background traﬃc. Link
metrics in hybrid networks should estimate the amount of
background traﬃc, or be insensitive to background traﬃc [7].
Thus, a critical challenge for hybrid networks is to design
link metrics achieving one of the aforementioned properties.

11Contrary to WiFi, PLC uses queues that are non-blocking:
the transport layer is not stopped from sending packets when
the MAC queues are full. For these experiments, we omit
PLC tests as dropped packets yield an unfair comparison.

3358.1 Retransmission Due to Errors

We ﬁrst explore how ETX would perform in PLC by send-
ing broadcast packets. Because broadcast packets in PLC
are transmitted with the most robust modulation and are
acknowledged by some proxy station [6], we expect that this
method yields very low loss rates.

For the purpose of this study, we set each station in turn to
broadcast 1500B probe-packets (1 every 100ms) for 500 sec.
The rest of the stations count the missed packets by using an
identiﬁcation in our packet header. We repeat the test for all
stations of the testbed during night and working hours (day).
Figure 21 shows the loss rate from these tests for all station
pairs, as a function of throughput and P Berr. Each pair is
represented with its link throughput (respectively, P Berr)
during the night experiment.

Conclusion: Loss rate of broadcast packets in PLC is a

very noisy metric for the following reasons:

(i) A wide range of links with diverse qualities have very
low loss rates (∼ 10−4), and some links even have 0 loss rates.
By observing high loss rates, e.g., larger than 10−1, ETX can
classify bad links in PLC, but nothing can be conjectured
for link quality from low loss rates.

(ii) There is no obvious diﬀerence between experiments
during the day, when the channel is worse, and night. A few
bad links have worse loss rates during the day, but at the
same time, a few average links yield much lower loss rates.
(iii) As PLC adapts the modulation scheme to channel
conditions when data is transmitted, broadcast packets –
sent at most robust modulation scheme – cannot reﬂect the
real link quality. Moreover, given the low loss rates of a wide
range of links, ETX appears to be 0 at short-time scales,
which provides no or misleading information on link quality.

)
t
s
a
c
d
a
o
r
b
(

e
t
a
r

s
s
o
L

100

10−1

10−2

10−3

10−4

night
day

0 10 20 30 40 50 60 70 80 90

Throughput (Mbps)

day
night

100

10−1

10−2

10−3

)
t
s
a
c
d
a
o
r
b
(

e
t
a
r

s
s
o
L

10−4

10−2

100

P Berr

102

Figure 21: Loss rate for broadcast packets vs link
throughput and P Berr for all station pairs.

Due to the above observations, we further explore the
mechanism of retransmissions with respect to link quality
with unicast traﬃc. We now delve into the retransmissions
of PBs by sending unicast, low data-rate traﬃc, i.e., 150Kbps,
and by capturing the PLC frame headers. Under this sce-
nario, an Ethernet packet of 1500 bytes is sent approximately
every 75ms. The test has a duration of 5 min per link. As
we have discussed above, broadcast packets might be missed
by some stations when channel conditions are bad, because
they are not retransmitted as soon as a proxy station ac-
knowledges them.
In contrast, unicast packets are being
retransmitted until the receiver acknowledges them, hence
are always received. For this reason, we look at the frame
header SoF to study retransmissions. Because there is no in-
dication on whether the frame is retransmitted in the PLC

SoF, we employ the arrival time-stamp of the frame to char-
acterize it as a retransmission or new transmission (if the
frame arrives within an interval of less than 10ms compared
to the previous frame, then it is a retransmission). We also
measure P Berr every 500 ms.

X
T
E
U

-

5
4
3
2
1
0

0

X
T
E
U

-

2.5

2

1.5

1

0.5

data
ﬁtted curve

0

0.1

0.2

0.3

0.4

P Berr

50
100
BLE (Mbps)

150

Figure 22: U-ETX vs BLE and U-ETX vs P Berr.

We conduct the experiment described above for all the
links of our testbed. We compute the unicast ETX (U-ETX)
for all the links of the testbed. We count the total number of
retransmissions for a packet of 1500 bytes, which produces
3 PBs. A retransmission occurs if at least one of these PBs
is received with errors. Figure 22 presents U-ETX as a func-
tion of average BLE (with links sorted in increasing BLE
order) and P Berr. U-ETX is measured by averaging the
number of PLC retransmissions for all packets transmitted
during the experiment. We also plot error-bars with the
standard deviation of the transmission count. It turns out
that link quality is negatively correlated with link variability,
a conclusion made also when exploring BLE in Section 6.2.
The higher the U-ETX is, the higher the standard deviation
of transmission count is. Links with high BLE are very
likely to guarantee low delays, as U-ETX does not vary a
lot. U-ETX and the averaged P Berr are highly correlated,
with almost a linear relationship.

8.2 Retransmission Due to Contention

To explore the sensitivity of link metrics to background
traﬃc and to examine how interference can be considered in
link metrics, we now experiment with two contending ﬂows.
We set a link to send unicast traﬃc at 150Kbps as in the
previous subsection, emulating probe packets. After 200 sec-
onds, we activate a second link sending “background” traﬃc
at various rates. We measure both BLE and P Berr.
In
these experiments, we observe that BLE is insensitive to low
data-rate background traﬃc for all pairs of links. However,
BLE appears to be aﬀected by high data-rate background
traﬃc on a few pair of links. So far, we have not found any
correlation between these pairs of links. We explain this
phenomenon with the “capture eﬀect”, where the best link
decodes a few PBs even during a collision due to very good
channel conditions, yielding high P Berr. In this case, the
channel-estimation algorithm cannot distinguish between er-
rors due to PHY layer and errors due to collisions, hence it
decreases BLE. Figure 23 presents two representative exam-
ples of link pairs for which BLE is sensitive and nonsensitive
to high data-rate background traﬃc. Observe that P Berr ex-
plodes in link 6-11, which is sensitive to background traﬃc.
To tackle the sensitivity of BLE to high data-rate back-
ground traﬃc, we take advantage of the frame aggregation
procedure of the MAC layer, described in Section 2.2. We
observe that transmitting a few PBs per 75ms (150Kbps
rate) yields a sensitivity of metrics to background traﬃc.

336150 Kbps

Saturated

1

0-11
1-6

r
r
e

B
P

0.5

0 100 200 300 400 500 600

Time (s)

0

0 100 200 300 400 500 600

Time (s)

)
s
p
b
M

(

E
L
B

150

100

50

0

150

)
s
p
b
M

(

E
L
B

Saturated

100

150 Kbps

50

0

0 100 200 300 400 500 600

Time (s)

1

r
r
e

B
P

0.5

6-11
1-0

0

0 100 200 300 400 500 600

Time (s)

Figure 23: Link metrics of 2 sets of contending links
with low data-rate and saturated traﬃc.

However, when two saturated ﬂows are activated, we never
notice an eﬀect on BLE (see [20] for more details). Due
to frame aggregation, packets from diﬀerent saturated ﬂows
have approximately the same frame length (i.e., maximum)
and when they collide, the channel estimation algorithm
works more eﬃciently than when short probe-packets col-
lide with long ones. To emulate the long frame lengths of
saturated traﬃc, we send bursts of 20 packets such that the
traﬃc rate per second (i.e., the overhead) is kept the same
(150Kbps).
In Figure 24, we show another link for which
BLE is sensitive to background traﬃc, and the results of
our solution. By sending bursts of probe packets, BLE is
no more aﬀected by background traﬃc. This shows that by
exploiting the frame aggregation process12, we can tackle
the sensitivity of link metrics to background traﬃc.

150Kbps

100

)
s
p
b
M

(

E
L
B

50

Saturated

7-6
8-3

150Kbps-
20-packet bursts

150

100

50

Saturated

)
s
p
b
M

(

E
L
B

0

0

500

1000

1500

Time (s)

0

0

500

1000

1500

Time (s)

Figure 24: Tackling the link-metric sensitivity to
background traﬃc by sending bursts of probes.

Conclusion: We have studied the mechanism of retrans-
missions in PLC. Although broadcast probe-packets yield
signiﬁcantly less overhead in link-quality estimation, they
do not provide accurate estimations.
In contrast, unicast
probe-packets reﬂect the real link quality, but by produc-
ing more overhead. We observe that P Berr can be used to

12Depending on the PLC technology, these bursts can be
transmitted such that only one PLC frame is generated
hence, without large MAC overhead. A measurement study
of the maximum frame duration of HPAV is given in [20].

estimate U-ETX and to indicate interference in PLC. How-
ever, estimating the amount of interference is challenging
and should be further investigated. We leave this extension
for future work. We introduce techniques to tackle the po-
tential sensitivity of link metric to background traﬃc.

9. LINK-METRIC GUIDELINES

We now summarize our guidelines for eﬃcient link-metrics
estimation with PLC, given our experimental study in the
previous sections.

Policy

Metrics

Guideline/Explanation

BLE and P Berr, deﬁned by
IEEE 1901.

Section

7, 8.1

Unicast probing only

Broadcast probing cannot be
used, as it does not give any
information on link quality.

Shortest time-scale

BLE should be averaged over
the mains cycle.

Size of probes

Larger than one PB (or one
OFDM symbol) to avoid in-
accurate convergence of rate
adaptation algorithm.

Frequency of probes

Should be adapted to link
quality for lower overhead.

Burstiness of probes

Can tackle a potential inaccu-
rate convergence of the chan-
nel estimation algorithm or
the sensitivity of link metrics
to background traﬃc.

8.1

6.1

7.2

6.2,
6.3,
7.3

7.2,
8.2

Asymmetry in probing There is both spatial and tem-
poral variation asymmetry in
PLC links. This could aﬀect
bidirectional traﬃc, such as
TCP, that requires routing in
both directions.

5, 6.2

Table 3: Guidelines for PLC link-metric estimation

10. RELATED WORK

A large body of work (e.g., [9], [15]) focuses on chan-
nel modeling and noise analysis, and very little work, such
as [13], investigates the PLC performance from an end-user
perspective. The authors in [13] explore the performance of
HomePlug AV when household devices operate in the net-
work. They observe that switching the appliances aﬀects sig-
niﬁcantly the performance and introduces asymmetry, and
that diﬀerent appliances create diverse noise levels. Liu et
al. [12] employ a testbed to investigate the interoperabil-
ity and coexistence of diﬀerent HomePlug AV networks and
propose a scheme that can be employed to ameliorate the
performance of multiple contending AV networks.

Many previous experimental works focus on the PLC MAC
layer under single contention domain scenarios and ideal
channel conditions in order to model and evaluate MAC
characteristics. To achieve these conditions, the stations
are plugged to the same power-strip and are isolated from
the power-grid. Zarikoﬀ and Malone [22] give the guidelines
for a PLC testbed construction and perform measurements
with both UDP and TCP traﬃc, and multiple contending

337ﬂows. We [21] study the fairness of the CSMA/CA protocol
both analytically and experimentally. We show that when 2
saturated stations are contending, the 1901 MAC is unfair
and might yield high jitter. We also use a testbed setup of
7 stations to evaluate and enhance the performance of the
HomePlug AV CSMA/CA process in [19], [18].

A few works focus on comparing the wireless and PLC
performance [11, 17]. [11] investigates older speciﬁcations
of PLC and WiFi, i.e., HomePlug 1.0 and 802.11 a/b, re-
spectively. The authors provide testbed measurements from
20 houses for metrics such as coverage, throughput, and
connectivity. [17] introduces a comparison between hybrid
PLC/WiFi networks and single-technology networks. The
authors ﬁnd that hybrid networks contribute to increase
coverage in home networks; they also argue that using al-
ternating technologies for multi-hop routes yields good per-
formance. However, they do not study link metrics that can
be used to optimize routing in such networks.

11. CONCLUSION

We have shown that PLC can yield signiﬁcant perfor-
mance gains when combined with WiFi networks. Yet, there
were open questions on how to exploit to the fullest the
two mediums and PLC has received far too little attention
from the research community; we introduce an experimental
framework and investigate the performance of PLC. To this
end, we explore its spatial and temporal variation, delving
into the diverse time-scales of PLC channel variability.

We have studied PLC link metrics and their variation with
respect to space, time, and background traﬃc. Similar met-
rics have been long pursued by the research community for
WiFi and have been required by recent standardization of hy-
brid networks. We have given guidelines on eﬃcient metric-
estimation in hybrid implementations. We have observed
that there is a high correlation between link quality and its
variability, which has a direct impact on probing overhead
and accurate estimations.

Acknowledgment
This work is ﬁnancially supported by a grant of the Smart-
World project of the Hasler Foundation, Bern, Switzerland.

12. REFERENCES
[1] HomePlug Alliance. http://www.homeplug.org/.
[2] IEEE 1905.1-2013 Std for a Convergent Digital Home

Network for Heterogeneous Technologies.

[3] IEEE 802.11n-2009-Amendment 5: Enhancements for

Higher Throughput.

[4] OpenWrt. http://https://openwrt.org/.
[5] Qualcomm Atheros Open Powerline Toolkit.
https://github.com/qca/open-plc-utils.

[6] IEEE Standard for Broadband over Power Line

Networks: Medium Access Control and Physical Layer
Speciﬁcations. IEEE Std 1901-2010, 2010.

[7] S. M. Das, H. Pucha, K. Papagiannaki, and Y. C. Hu.

Studying wireless routing link metric dynamics. In
Proc. of the 7th ACM Conf. on Internet measurement,
pages 327–332, 2007.

[8] R. Draves, J. Padhye, and B. Zill. Routing in

multi-radio, multi-hop wireless mesh networks. In
Proc. of ACM MobiCom, 2004, pages 114–128.

[9] S. Guzelgoz, H. B. Celebi, T. Guzel, H. Arslan, and

M. K. Mıh¸cak. Time frequency analysis of noise
generated by electrical loads in PLC. In 17th
International Conf. on Telecommunications (ICT),
pages 864–871. IEEE, 2010.

[10] E. Kohler, R. Morris, B. Chen, J. Jannotti, and M. F.

Kaashoek. The Click modular router. ACM TOCS,
18(3):263–297, 2000.

[11] Y.-J. Lin, H. A. Latchman, R. E. Newman, and

S. Katar. A comparative performance study of wireless
and power line networks. Communications Magazine,
IEEE, 41(4):54–63, 2003.

[12] Z. Liu, A. El Fawal, and J.-Y. Le Boudec. Coexistence

of multiple homeplug av logical networks: A
measurement based study. In IEEE Global
Telecommunications Conf. (GLOBECOM), 2011,
pages 1–5.

[13] R. Murty, J. Padhye, R. Chandra, A. R. Chowdhury,

and M. Welsh. Characterizing the end-to-end
performance of indoor powerline networks. Technical
report, Harvard University Microsoft Research
Technical Report, 2008.

[14] K. Papagiannaki, M. D. Yarvis, and W. S. Conner.

Experimental characterization of home wireless
networks and design implications. In IEEE
INFOCOM 2006.

[15] S. Sancha, F. Canete, L. Diez, and J. Entrambasaguas.

A channel simulator for indoor power-line
communications. In IEEE International Symposium
on Power Line Communications and Its Applications
(ISPLC), pages 104–109, 2007.

[16] R. K. Sheshadri and D. Koutsonikolas. Comparison of
routing metrics in 802.11n wireless mesh networks. In
IEEE INFOCOM 2013, pages 1869–1877.

[17] P. Tinnakornsrisuphap, P. Purkayastha, and

B. Mohanty. Coverage and capacity analysis of hybrid
home networks. In IEEE International Conf. on
Computing, Networking and Communications (ICNC),
2014, pages 117–123.

[18] C. Vlachou, A. Banchs, J. Herzen, and P. Thiran.

Analyzing and boosting the performance of power-line
communication networks. In Proceedings of the 10th
ACM International on Conference on emerging
Networking Experiments and Technologies, pages 1–12.
ACM, 2014.

[19] C. Vlachou, A. Banchs, J. Herzen, and P. Thiran. On
the MAC for Power-Line Communications: Modeling
Assumptions and Performance Tradeoﬀs. In IEEE
International Conf. on Network Protocols (ICNP),
2014.

[20] C. Vlachou, S. Henri, and P. Thiran. Electri-Fi Your

Data: Measuring and Combining Power-Line
Communications with WiFi (Technical Report
210617). Infoscience EPFL 2015.

[21] C. Vlachou, J. Herzen, and P. Thiran. Fairness of
MAC protocols: IEEE 1901 vs. 802.11. In Proc. of
IEEE ISPLC 2013.

[22] B. Zarikoﬀ and D. Malone. Construction of a PLC

testbed for network and transport layer experiments.
In Proc. of IEEE ISPLC 2011, pages 135–140.

338