Evolution of a Location-based Online Social Network:

Analysis and Models

Miltiadis Allamanis
Computer Laboratory
University of Cambridge
ma536@cam.ac.uk

Salvatore Scellato
Computer Laboratory
University of Cambridge
ss824@cam.ac.uk

Cecilia Mascolo
Computer Laboratory
University of Cambridge
cm542@cam.ac.uk

ABSTRACT
Connections established by users of online social networks
are inﬂuenced by mechanisms such as preferential attach-
ment and triadic closure. Yet, recent research has found
that geographic factors also constrain users: spatial prox-
imity fosters the creation of online social ties. While the
eﬀect of space might need to be incorporated to these social
mechanisms, it is not clear to which extent this is true and
in which way this is best achieved.

To address these questions, we present a measurement
study of the temporal evolution of an online location-based
social network. We have collected longitudinal traces over 4
months, including information about when social links are
created and which places are visited by users, as revealed
by their mobile check-ins. Thanks to this ﬁne-grained tem-
poral information, we test and compare whether diﬀerent
probabilistic models can explain the observed data adopting
an approach based on likelihood estimation, quantitatively
comparing their statistical power to reproduce real events.
We demonstrate that geographic distance plays an impor-
tant role in the creation of new social connections: node de-
gree and spatial distance can be combined in a gravitational
attachment process that reproduces real traces. Instead, we
ﬁnd that links arising because of triadic closure, where users
form new ties with friends of existing friends, and because of
common focus, where connections arise among users visiting
the same place, appear to be mainly driven by social factors.
We exploit our ﬁndings to describe a new model of net-
work growth that combines spatial and social factors. We
extensively evaluate our model and its variations, demon-
strating that it is able to reproduce the social and spatial
properties observed in our traces. Our results oﬀer useful
insights for systems that take advantage of the spatial prop-
erties of online social services.

Permission to make digital or hard copies of all or part of this work for
personal or classroom use is granted without fee provided that copies are
not made or distributed for proﬁt or commercial advantage and that copies
bear this notice and the full citation on the ﬁrst page. To copy otherwise, to
republish, to post on servers or to redistribute to lists, requires prior speciﬁc
permission and/or a fee.
IMC’12,
Copyright 2012 ACM 978-1-4503-1685-9/12/10 ...$15.00.

October 29–30, 2012, Austin, Texas, USA.

Categories and Subject Descriptors
H.4 [Information Systems Applications]: Miscellaneous;
H.2.8 [Database Management]: Database applications—
data mining

Keywords
social network, graph evolution, gravity models

1.

INTRODUCTION

Measurement studies of popular online social services have
greatly improved the understanding of how users create so-
cial connections online [22]. Research eﬀorts have taken ad-
vantage of the availability of large-scale datasets to study
the temporal evolution of online social ties [15]. Models of
network growth have been proposed to reproduce the global
properties observed in real online social networks, such as
power-law degree distributions and high clustering coeﬃ-
cient [17].

The fundamental importance of such models is due to
the fact that they explain properties observed in measured
traces in terms of the actions of individual users:
for in-
stance, mechanisms such as preferential attachment [2] and
triadic closure [14] are inspired by the actions of individuals
creating their social connections. Thus, by oﬀering insights
about how users behave, measurements and models of net-
work evolution provide practical applications to link predic-
tion systems [19, 21], but also suggest solutions to large-scale
engineering problems faced by online service providers [24].
However, researchers have often neglected factors that are
not inherently connected to the structure of the social net-
work itself. In this work we aim to ﬁll this gap, studying the
inﬂuence of spatial factors on connections created by users
of a location-based social service.

Spatial properties of social services. Recently, on-
line social networks have integrated location-based features:
services such as Foursquare and Gowalla have pioneered the
idea of sharing one’s geographic location with friends, at-
tracting millions of users over a short period of time. These
services oﬀer an additional source of information about user
behavior: the geographic mobility of individuals.

Recent works have taken advantage of this opportunity
to shed some light on the relationship between spatial fac-
tors and online social interactions. For instance, the prob-
ability of seeing a social connection between users of online
social services decreases with spatial distance [20, 1]. Simi-
lar but quantitatively diﬀerent spatial constraints have been
also found in mobile phone communication networks [16, 23].

145Online social ties can also be inferred by mining geographic
coincidences [7], suggesting that spatial encounters have an
eﬀect on the creation of new online connections. The places
that online users visit oﬀer even more accurate predictive
power about future social connections [8, 27].

The importance of space. The importance of space for
online social network goes beyond the deﬁnition of more ac-
curate models. In fact, a better understanding of the spatial
aspects of the evolution of social networks would greatly ben-
eﬁt engineering approaches based on the spatial constraints
of online social ties.

For instance, online interactions tend to be spatially clus-
tered: this geographic locality of interest has been exploited
in Facebook interactions, to improve service responsiveness
with distributed proxies [31], and in a company’s email net-
work, to partition email traﬃc across storage locations [13].
Spatial diﬀerences in content requests arising from online
social sharing have been used to reduce latency and band-
width costs associated to content delivery [29]. The spatial
patterns observed in Facebook social connections have been
exploited to predict the geographic location of users given
their friends’ locations [1]. Such engineering eﬀorts conﬁrm
that understanding the eﬀect that space has on online social
services remains of crucial importance for modern large-scale
online platforms.

However, the eﬀect of space on the mechanisms that drive
how online users create their links is still largely unknown.
In more detail, there has been no investigation of the spatial
aspects of the temporal evolution of an online social network:
a better understanding of these mechanisms would pave the
way to predictive models including geographic factors.

Our work. In this work we study the temporal evolu-
tion of a location-based social network: over a period of 16
weeks we have collected daily snapshots of a location-based
social network with hundred of thousands of users, Gowalla,
including the places visited by users and their social con-
nections (Section 2). Thanks to this ﬁne-grained temporal
information about network evolution and users’ mobility, we
test and compare diﬀerent edge attachment models that can
explain the observed data, adopting an approach based on
likelihood estimation [32]. This allows us to quantitatively
compare these models according to their statistical ability
to reproduce the real traces.

In more detail, we analyze these core facets of temporal

network evolution:

• how edges are created: we test diﬀerent edge at-
tachment models based on the social and spatial prop-
erties of nodes: we show that node degree and spatial
distance are simultaneously inﬂuencing edge creation,
demonstrating that a gravitational attachment model
captures real network evolution better than purely so-
cial or spatial models (Section 3);

• how social triangles are created: since social net-
works tend to have a dominant fraction of new edges
closing triangles, we test several diﬀerent models of tri-
adic closure, some of them involving also spatial dis-
tance: we ﬁnd that social factors are more important
than spatial constraints when an edge closes a triangle
(Section 4);

• how users’ mobility aﬀects new edges: because
social connections might arise among users visiting the

same place, we study models of edge creation that ex-
ploit the properties of shared places to connect users;
we discover that both the popularity of a place and the
popularity of users visiting that place help to predict
which social connections are established (Section 5);

In addition, we study the temporal patterns of user behav-
ior. We focus on the lifetime of a node, that is, the amount
of time a user is actively creating new edges, and the inter-
edge waiting time, which governs the amount of time elapsed
before a node will create a new edge (Section 6).

Based on our ﬁndings, we describe a new family of models
of network growth which are able to reproduce both the social
and spatial properties observed in the real data (Section 7).
Such models combine a global gravitational attachment pro-
cess with a local triadic closure mechanism based on shared
friends and shared places; the result is an evolutionary ran-
dom process that grows a spatial network edge-by-edge. We
demonstrate that the resulting synthetic networks exhibit
social and spatial properties similar to the real network,
while a similar model that considers preferential rather than
gravitational attachment, eﬀectively ignoring the eﬀect of
geographic distance, fails to reproduce real properties.

This work sheds light on the eﬀect of geographic con-
straints on the evolution of online social networks. Our re-
sults oﬀer useful insights for researchers and practitioners,
with promising implications for the wide range of applica-
tions that already take advantage of the spatial properties
of online social services.

2. MEASUREMENT METHODOLOGY

In this section we illustrate the measurement methodology
used in our work to acquire data on a large-scale location-
based service, Gowalla. We describe this service, our data
collection procedure and we present the basic properties of
the resulting dataset. We also introduce the likelihood esti-
mation technique we adopt to quantify how edge attachment
models explain the real traces.
2.1 Gowalla

Gowalla is a location-based social networking service cre-
ated in 2009 that allows users to add friends and share their
location with them. It allows users to “check-in” at places
through a dedicated mobile application, publicly disclosing
their location on the service. These check-ins can then be
pushed to friends. As a consequence, friends can see where a
user is or has been. Users can create mutual friendship rela-
tionships, requiring each user to accept friendship requests.
Gowalla was discontinued at the end of 2011 as the company
was acquired by Facebook.
2.2 Data collection

Using the public API provided by Gowalla to allow other
applications and services to access their content, we have
downloaded daily snapshots of Gowalla data between May,
4th and August, 19th 2010.

We built a multi-threaded self-limiting crawler to access
their API without incurring into rate limitation. Since users
were identiﬁed by consecutive numeric IDs, each day we were
able to exhaustively gather proﬁles of all the registered user
accounts on the service. Each user proﬁle included informa-
tion about the number of social connections of that user and
the timestamp and the place of his/her last check-in. This

146N
K
(cid:104)k(cid:105)
(cid:104)C(cid:105)
NGC
DEF F
(cid:104)l(cid:105)
(cid:104)D(cid:105)

122,030
577,014

9.28
0.254

116,910 (95.8%)

5.43

1,792 km
5,479 km

Table 1: Properties of the spatial social network
at the end of the measurement period: number
of nodes N , number of edges K, average node de-
gree (cid:104)k(cid:105), average clustering coeﬃcient (cid:104)C(cid:105), number
of nodes in the giant component NGC , 90-percentile
eﬀective network diameter DEF F average geographic
distance between nodes (cid:104)D(cid:105), average link length (cid:104)l(cid:105).

we have a reasonable estimation of the ﬁrst time each user
joined the network by observing the list of previous check-
ins.

At the end of our measurement period we ﬁnd about
400,000 registered users, with a total of more than 10 million
check-ins across about 1,400,000 distinct places. More pre-
cisely, there are only 183,709 users with at least one check-in
and only 162,239 with at least one friend. We focus our anal-
ysis on 122,030 users that have both friends and check-ins.
2.3 Notation

Formally, we represent the social network of Gowalla users
as an undirected graph. We denote by N and K the total
number of nodes and edges, while Gt = (Nt, Kt) is the graph
composed of the earliest t edges (e1, . . . , et), with GT being
the ﬁnal network at the end of the measurement process.
The time when edge e was created is t(e) and t(u) is the
time when node u joined the network. The degree of node
u at time t is ku(t), while the number of nodes with degree
k at time t is denoted as nk(t).

Every node of this network is embedded in a metric space:
in our case, the metric space is the 2-dimensional surface of
the planet and we adopt the great-circle distance over the
Earth as distance metric. Rank-distance has been suggested
as an alternative density-aware distance measure [20]: how-
ever, in our study the growing social graph would cause the
measure to change as new nodes are added. Thus, we choose
to adopt the simpler great-circle distance. We deﬁne the lo-
cation of each user as the geographic location of the place
where he/she has more check-ins overall at the end of the
measurement period. We denote by Dij the distance be-
tween nodes i and j. We assign a length lij to each social
link so that lij = Dij: since node positions do not change
over time, link lengths and distances between nodes do not
change either.
2.4 Basic properties

The number of nodes and the number of links grows ap-
proximately linearly over time, with the number of links
growing at a faster pace. on average, the network gains
about 375 new nodes and about 1,900 new edges per day.
As a result, the average degree of the social network slowly
increases: we ﬁnd that a relationship Kt ∝ N ρ
t holds with
an exponent ρ ≈ 1.11, which denotes superlinear growth of
the edges with respect to the number of nodes, a sign of den-
siﬁcation of the network as time passes by [18]. The main

(a) Node degree

(b) Node age

(c) Link length

Figure 1: Complementary Cumulative Distribution
Function (CCDF) of node degree (a), node age (b)
and link geographic length (c) at the end of the mea-
surement period.

allowed us to additionally download the friend list or the
timestamped list of check-ins for all those users which either
had new friends or new check-ins with respect to the previ-
ous day; we did the same for all the new users that were not
registered before. As a result, we have a sequence of daily
snapshots, each one including social connections and check-
ins for each registered user. We also acquired the geographic
coordinates of each place where users had checked in.

This dataset represents a sequence of complete snapshots
of a large-scale location-based service, oﬀering a chance to
study how a social network grows over time and also over
space. In particular, we have temporal information about
all the social links created during our measurement process.
This will allow us to study which social and spatial factors
inﬂuence how links are created at the microscopic level. Fi-
nally, even though we have no temporal information about
social connections created before our measurement started,

100101102103104Nodedegree10−610−510−410−310−210−1100CCDF0100200300400500600Nodeage(days)10−510−410−310−210−1100CCDF05000100001500020000Linkdistance(km)10−610−510−410−310−210−1100CCDF147properties of the spatial social network at the end of the
measurement period are reported in Table 1. At the end of
the measurement period the social network under analysis
contains 122,030 nodes and 577,014 edges, with an average
degree of 9.28 and an average clustering coeﬃcient of 0.254.
The giant component includes 96% of all observed nodes:
the 90-th percentile of nodes network distances is 5.43 hops.
There is evidence of the small-world eﬀect, as found in other
oﬄine and online systems [22, 17]: while the shortest path
lengths tend to be only a few hops, the average clustering
coeﬃcient is high, suggesting that strong local structures
tend to be connected by occasional shortcuts.

The degree distribution exhibits a heavy tail, as depicted
in Figure 1(a), with some nodes accumulating thousands
of friends.
In contrast, both the distribution of node age
and link geographic distance, in Figures 1(b)-1(c), do not
exhibit heavy tails but instead an almost exponential decay
(notice the linear x-axis). We should note that whenever dis-
tance is calculated, we have used logarithmic binning with
a minimum distance of 1 km. This allows a more robust
analysis of the distribution of distances but preserves the
distance characteristics of the dataset. There is a large frac-
tion of short-range geographic connections: about 50% of
social links span less than 100 km, with only a small frac-
tion being longer than 4,000 km. The distribution of node
age shows how users have joined the service with irregular
temporal bursts; overall the trend can be approximately de-
scribed as exponential, particularly for lower values of node
age.
2.5 Limitations

Although our dataset represents a complete snapshot of
Gowalla, this service was relatively small compared to other
massive online social services. Furthermore, we underline a
potential demographic bias: typical users of location-based
services may have diﬀerent mobility patterns and social habits
than other Web users. In addition, some properties observed
in our traces could be attributed to user engagement and
Gowalla marketing and would not reﬂect user behavior in
other online geosocial networks. Notwithstanding these lim-
itations potentially present in our dataset, our analysis sheds
new light on the spatial and social properties of Gowalla
users and our ﬁndings can pave the way for further investi-
gation on other services.

2.6 Model likelihood estimation

We take advantage of the ﬁne-grained temporal informa-
tion of our traces and we adopt a quantitative approach to
compare how diﬀerent attachment models describe the em-
pirical data. We compute the likelihood that a model has to
generate the observed events in our sequence of traces. The
Maximum Likelihood Principle can then be applied: this
principle is used to compare a family of models numerically
and, as a result, pick the “best” model (and parameters) to
explain the data.

Studying networks with likelihood methods requires a prob-
abilistic model describing the evolution of the graph itself.
In other words, the network is considered the result of an
evolutionary stochastic process which drives its growth, both
in terms of new nodes and new edges [32]. Given real data
about the evolution of a network, one can test the extent

to which the assumptions of a model are supported by the
data.

In our case, estimating the likelihood of a model M in-
volves considering each individual edge et = (i, j) created
during our measurement period and computing the likeli-
hood PM (et) that the source i selects the actual destination
j according to the model M . Thus, the likelihood PM (G)
that model M reproduces graph G is given by the product
of the individual likelihoods according to model M :

PM (G) =

PM (et)

(1)

(cid:89)

t

We use log-likelihood for better numerical accuracy, obtain-
ing

(cid:89)

(cid:88)

log(PM (G)) = log(

PM (et)) =

log(PM (et))

(2)

t

t

Equation (2) suggests a simple algorithm to compute the
log-likelihood of a given model M : for each new edge cre-
ated during the graph evolution, we compute the probability
that it would be created according to model M , we take the
logarithm of this probability and we sum all the values ob-
tained for each edge. When this procedure is repeated for
several models, we can choose the model with the highest
likelihood to explain the data.

Since every edge is undirected and we do not have in-
formation about which user initiated the social contact, we
consider every new edge et = (i, j) in both directions in the
rest of our analysis, to avoid any bias. This methodology
can be extended easily to handle directed graphs.

3. EDGE CREATION

In this section we study how the creation of individual
edges is inﬂuenced by social and spatial properties of the
nodes, exploring the eﬀect of node degree, node age and
spatial distance on the the edge attachment process.
3.1 Edge attachment by node degree

The preferential attachment model [2] posits that the prob-
ability of creating a new connection with a node is propor-
tional to the number of its existing connections. This cu-
mulative advantage held by high-degree nodes results in a
degree distribution with heavy tail, as some nodes accumu-
late a large number of connections. We test if a similar
mechanism is governing our data by computing the proba-
bility Pdeg(k) that a new link will be created with a node
with degree k:

|{et : et = (i, j) ∧ kj(t − 1) = k}|

(cid:80)
t nk(t − 1)

(3)

Pdeg(k) =

where the normalization factor considers all nodes with de-
gree k just before the edge creation. If preferential attach-
ment is not governing the growth Pdeg(k) should not depend
instead, we see in Figure 2(a) that Pdeg(k) ∝ k0.74,
on k:
denoting how nodes with higher degrees are more likely to
attract new edges than nodes with fewer connections. Al-
though the trend is not exactly linear as in the original pref-
erential attachment model, node degree is related to the cre-
ation of new edges.
3.2 Edge attachment by node age

The amount of time a node has been part of the network
could also be a factor which drives the creation of edges.

148Older nodes might have more visibility on the service; at
the same time, when new users join the network they might
experience intense activity as they create their ﬁrst connec-
tions. We compute E(a), the number of edges created by
nodes of age a normalized by the number of nodes that ever
achieved age a [17]:

E(a) =

|{et : et = (i, j) ∧ t(e) − t(i) = a}|

t |{n : T − t(n) ≥ a}|

(4)

(cid:80)

where T is the time when the last node joined the network
during the measurement period. As reported in Figure 2(b),
there is a spike at age 0: this represents nodes that join
the network, create some links and then never come back.
The number of created edges then quickly goes down with
age a but grows again for higher values of a. This denotes
that older nodes might beneﬁt from receiving incoming links.
The overall eﬀect suggests that there is an abnormal spike
of links created when a node joins the network followed by
lower levels of edge creation: older nodes tend then to es-
tablish further links.
3.3 Edge attachment by node distance

The probability of having a social connection between two
individuals decreases with their distance, although the ex-
act functional form of this relationship is still under debate
and appears slightly diﬀerent in diﬀerent systems [20, 1, 26].
We compute the probability Pgeo(d) that a new edge spans
geographic distance d, normalized by the number of nodes
at distance d from the source:

Pgeo(d) =

|{et : et = (i, j) ∧ Dij = d}|

(cid:80)
t |{n : Din = d}|

(5)

Our data show how Pgeo(d) decreases with distance d,
as reported in Figure 2(c), even though the trend appears
noisy: in particular, the data roughly follow a trend Pgeo(d) ≈
d−α with α = 0.6 (depicted). While a similar functional
form has been found in other spatial social networks, but
with diﬀerent exponents α, this is the ﬁrst time it is mea-
sured at microscopic level on individual edge creation events.
The main diﬀerence is that in this case there is a lower value
of α, while other systems exhibit values closer to 1 [26].
Nonetheless, geographic distance aﬀects the edge creation
process in a straightforward way: longer links have a lower
probability of appearance than short-range ones.
3.4 Evidence of gravitational attachment

The eﬀect of node degree on network evolution is well
captured by the preferential attachment model, where the
probability of connection between nodes i and j, Pij, is pro-
portional to the degree of node j, Pij ∝ kj. This model gen-
erates networks with degree distribution exhibiting a heavy
tail, as there are a few nodes, the so called “hubs”, that
accumulate an extremely high number of connections. Real-
world examples such as transportation and communication
networks can be described by a preferential attachment model,
but geographic distance is an important parameter as well.
In fact, long-range connections tend to exist mainly between
well-connected hubs [5].
The eﬀect of geographic distance can be included in the
attachment probability, Pij ∝ kikjf (Dij), where f is a de-
creasing deterrence function of the geographic distance Dij
between the nodes. Thus, long distances tend to be covered
only to connect to important hubs, while nodes with less con-

(a)

(b)

(c)

Figure 2: Probability of creating a new social link
as a function of node degree (a), age of the node (b)
and geographic distance of the node (c).

nections become attractive when they can be reached over a
short distance. When the deterrence function has a simple
functional form such as f (d) ∼ d−α, then the probability
of a connection between two nodes becomes similar to the
gravitational attraction between celestial bodies, Pij ∝ kikj
.
Hence, this family of attachment models has been known as
gravity models [6]. We want now to understand whether
there is any evidence that similar factors are shaping the
evolution of our real spatial social network.

Dα
ij

A consequence of the gravity model is that nodes with
higher degrees tend to attract longer links: thus, we deﬁne
λi(k) as the geographic length of the k-th edge created by
user i and we study λ(k) for diﬀerent values of k. The inﬂu-
ence of degree k on the geographic properties of social links
appears strong: as described in Figure 3, both the average
and the median value of the geographic length (cid:104)λ(k)(cid:105) of the
k-th edge increase with k: while the average length of the
ﬁrst edge is about 1,100 km, the 100th edge is about 2,400

100101102103Nodedegree,k10−610−510−410−310−210−1Pdeg(k)k0.740100200300400500Nodeage(days),a10−310−210−1100E(a)100101102103104Linklength(km),d10−610−510−410−310−2Pgeo(d)d−0.60149Figure 3: Average and median geographic span gap
of the k-th edge created by a node as a function of
k.

Figure 4: Log-likelihood of each edge attachment
model as a function of their parameter α. The grav-
ity model DS outperforms all the others.

km. The median value shifts in accordance with k, increas-
ing from 150 km to more than 900 km for higher degrees.
These ﬁndings are compatible with a gravity model where
node degree and geographic distance simultaneously inﬂu-
ence social connections created over space, as we will see in
the next section.
3.5 Evaluation of attachment models

With our analysis we have discovered that individual node
properties and geographic distance aﬀect how edges are cre-
ated. Our aim is now to understand what type of edge at-
tachment mechanisms better explain the temporal evolution
of the network.

We deliberately choose simple models, since our goal is
not to accurately reproduce the temporal evolution of the
network but rather to understand which factors mainly drive
its growth. We consider 4 diﬀerent edge attachment models,
each one with a single parameter α:

D: the probability of creating an edge with node n is pro-

portional to a power α of its degree: kn(t)α

A: the probability of creating an edge with node n is pro-

portional to a power α of its age: at(n)α

S: the probability of creating an edge with node n is in-
versely proportional to a power α of its spatial distance
from source i: D

−α
in

DS: the probability of creating an edge with node n is pro-
portional to its degree and inversely proportional to a
power α of its spatial distance from i: kn(t)D

−α
in

Figure 4 displays the log-likelihood values obtained by
each model as a function of the parameter α. First, we note
that the models S and DS, which incorporate geographic dis-
tance, have higher log-likelihood than the other two models
D and A, with the maximum log-likelihood achieved by DS.
The maximum log-likelihood for DS is achieved for α ≈ 0.6,
which is in agreement with the results obtained measuring
Pgeo(d). Node age does not seem a key factor for edge at-
tachment, as the model A shows decreasing values of log-
likelihood for values of α between 0 and 2, with its maxi-
mum log-likelihood of −4.4 × 106 reached instead only for
α = −0.8, failing to outperform S and DS. Indeed, we have
tested models which also combine node age with geographic
distance and node degree, but they do not exhibit signiﬁcant

improvements with respect to the models without node age.
Hence, it seems that the main driving factors, of those ex-
amined, in edge attachment are node degree and geographic
distance and that a gravity model which combines them is
the most suitable option.

4. SOCIAL TRIADIC CLOSURE

The edge attachment mechanisms previously investigated
only take into account the inﬂuence of global network prop-
erties on new edge creation. However, local network prop-
erties can be equally or more important: for instance, new
links tend to connect users that already share friends, cre-
ating social triangles that are extremely common on social
networks [19]. This mechanism, where a node just copies
a connection from a node it is already connected to, has
turned out to be essential to reproduce the structure ob-
served in many networks [25]. Hence, in this section our
aim is to study the extent to which new links generate so-
cial triangles and whether diﬀerent models based on local
network properties can reproduce the patterns observed in
the data.
4.1 Measuring triangle creation

Social connections tend to link together individuals that
are already at close social distance: the vast majority of new
links tend to be between nodes that already share at least
a connection, thus only 2 hops away from each other, with
larger social distances exponentially less likely [17]. We no-
tice a similar pattern in our data: Figure 5(a) shows that
the number of edges Eh that connect nodes h hops away
exponentially decays with h. Furthermore, many edges also
connect nodes that were not in the same connected compo-
nent, as when a new node joins the network and creates its
ﬁrst link.

A better understanding of this process can be achieved by
considering not only how many new links connect nodes h
hops away, but also considering the number of nodes at that
social distance.
In fact, since Eh exponentially decreases
with h and the number of available nodes increases with h,
the probability Ph that a new link spans h hops must be
decreasing much faster than exponentially. More precisely,
we compute Ph as

(6)

|{et : et = (i, j) ∧ dt−1(i, j) = h}|

(cid:80)
t |{n : dt−1(i, n) = h}|

Ph =

020406080100k050010001500200025003000Linkdistance[km]AverageMedian0.00.51.01.52.0α−6.5−6.0−5.5−5.0−4.5−4.0Log-likelihood×106DASDS150random
shared
degree
distance
gravity

random shared
9.48
11.47
5.16
-3.70
0.25

12.34
14.54
7.33
-0.92
2.71

degree
-3.47
-0.95
-6.79
-16.94
-12.11

distance
-28.17
-24.74
-25.17
-39.32
-33.01

gravity
-35.26
-34.46
-41.98
-41.53
-43.18

Table 2: Performance of diﬀerent triangle closing
models: on each row there is the model to pick the
intermediate node and on each column the model
to then pick the target node. The value in each
cell gives the percentage improvement over the base-
line, which is the log-likelihood of choosing a random
node two hops away from the source.

and then picks a target t among i’s neighbors with, poten-
tially, a diﬀerent strategy. The edge (s, t) is then created,
closing the triangle (s, i, t). Since every strategy involves
only choosing a node among the neighbors of a given node,
we consider 5 diﬀerent strategies to choose a neighbor v of
a given node u:

• random: uniformly at random;
• shared: proportional to the number of shared friends

between u and v;

• degree: proportional to the degree of the neighbor v;
• distance: inversely proportional to the geographic dis-

tance between u and v;

• gravity: proportional to the degree of v and inversely
proportional to the geographic distance between u and
v.

Since there are 5 diﬀerent triangle-closing models, there
are 25 combinations: we compute the log-likelihood of each
combination and we measure the percentage improvement
over the log-likelihood of the baseline model. The results
are presented in Table 2: the general trend is that random
and shared oﬀer the largest improvements over the baseline,
with a maximum improvement of 14.54% in the combina-
tion shared-random and 12.34% for random-random. Instead,
models based on degree or on distance have performance
much lower than the baseline, with degradation up to 40%
when the gravity model is adopted. In particular, the ran-
dom-random model works surprisingly well, as it favors con-
nections between nodes that have multiple 2-hop paths be-
tween them and that have higher degrees, while being ex-
tremely simple and computationally fast.

These results show that triadic closure is mainly driven
by social processes. Nonetheless, it only reproduces some
aspects of network evolution, as edges that do not close tri-
angles are also arising in the network. As we will see, we
can exploit users’ mobility information to understand how
other online social connections are created, adopting closure
models based on the places visited by online users.

5. MOBILITY-DRIVEN CLOSURE

The edge attachment mechanisms discussed so far do not
include any information on users’ mobility. However, the
places where users check in could help explain how new social
ties are created. According to the common focus theory [10],

(a)

(b)

Figure 5: Number of new links Eh created between
nodes h hops away (a) and probability Ph that a
new link connects nodes h hops away. The single
Eh value at h = 0 denotes the number of edges con-
necting nodes previously in separate disconnected
components.

where dt(i, j) is the number of hops between nodes i and j
at time t. Figure 5(b) plots Ph as a function of h: the prob-
ability quickly decays and ﬁnally reaches a constant value.
Triadic closure seems to be the predominant factor shap-
ing network growth over time: new edges are most likely to
connect people who already share at least one friend.

In summary, our analysis of triadic closure provides ev-
idence that two users sharing at least one friend are much
more likely to create direct connections than two users with-
out friends in common.
4.2 Triangle-closing models

Since a vast majority of new edges close social triangles,
our aim is now to understand what factors inﬂuence which
node to choose when an edge is closing a triangle. Again, we
make use of the maximum likelihood principle to test and
compare whether diﬀerent triangle-closing models would be
able to generate the triangles created during the real network
evolution.

We consider the case when a source node s has to choose
another target node t 2 hops away to create a new link. A
simple model would be for node s to choose t uniformly at
random from all the nodes at a distance of 2 hops, which will
be our baseline model. We then take into account more com-
plex models where a source node s ﬁrst chooses according to
a given strategy an intermediate node i among its neighbors

0246810h100101102103104105106EhEh∝e−0.55h2345678910h10−710−610−510−4Ph151• random: uniformly at random;
• friends: proportional to the number of user u’s friends

that have visited p;

• user-checkins: proportional to the number of check-ins

made by user u at p;

• tot-checkins: proportional to the total number of check-

ins made at p by all users;

• tot-users: proportional to the total number of users

who have checked in at p;

• place-distance:

inversely proportional to the distance

between user u’s home location and p;

• place-gravity: proportional to the total number of check-
ins made by all users at place p and inversely propor-
tional to the distance between user u’s home location
and p.

Given a selected place p, we then consider another set of

strategies to select a target user t from Qp:

• random: uniformly at random;
• degree: proportional to user t’s degree;
• deg-diﬀusion: proportional to user t’s degree and in-
versely proportional the logarithm of user t’s total num-
ber of visited places;

• user-checkins: proportional to user t’s number of check-

ins at p;

• tot-checkins: proportional to user t’s total number of

check-ins;

• inv-tot-checkins: inversely proportional to user t’s total

number of check-ins;

• distance:

inversely proportional to the distance be-

tween user t’s home location and p;

• gravity: proportional to user t’s degree and inversely
proportional to the distance between user t’s home lo-
cation and p.

To test and evaluate mobility-driven models we use again
the maximum likelihood principle; we only evaluate the like-
lihood that a model has to reproduce real edge attachments
where the source and target nodes share at least one place.
We adopt a baseline model that selects at random target
users from the set of all users that share places with the
source. Table 3 presents the results for all the possible com-
binations.

In general, in the ﬁrst step the best improvement is given
by selecting a popular place that has already been visited
by many users, friends or not. For the second step, node
degree plays an important role, akin to a local preferential
attachment. The greatest improvement over the baseline
is provided by ﬁrst selecting a place that has been visited
many times (tot-checkins) and then choosing a node propor-
tionally to its degree “diﬀused” over the number of visited
places (deg-diﬀusion). This mobility measure corrects for the
fact that popular users that visit only a few places might be
more related to that place, thus enticing other visitors to

Figure 6: Average geographic distance Dh of new
links created between nodes h hops away. The sin-
gle value at h = 0 denotes the average geographic
distance of links connecting nodes previously in sep-
arate disconnected components.

individuals who visit the same places tend to establish new
social connections. In this section we measure the impact
that users’ mobility has on network evolution. In agreement
with the common focus theory, we study edge attachment
mechanisms that connect users that visit the same places.
5.1 Measuring mobility-based attachment

In our Gowalla traces, 32.28% of all new edges are estab-
lished between users that share at least one common place.
In particular, about 10% of new links are created between
users that do share common places, but no common friends.
This means that adopting only social triadic closure mech-
anisms would fail to reproduce that users create new social
connections beyond their 2-hop neighborhood.

The importance of social ties that connect users without
friends in common is conﬁrmed when we examine the aver-
age geographic distance Dh of all new edges that connect
nodes previously h hops away, shown in Figure 6. There is
an evident trend: social connections at shorter social dis-
tance tend to have higher geographic distances, while links
spanning more hops have lower spatial distance. A potential
explanation is that both social and spatial factors tend to
aﬀect the edge creation process: a new link is created either
between users sharing friends, even if they are far from each
other, or between spatially close users, even if they have no
friends in common. In particular, geographic proximity be-
comes complementary to social closeness: both factors are
shaping the network, but in diﬀerent ways. The challenge is
to go beyond geographic distance when modeling the evolu-
tion of the network: mobility-based attachment provides the
additional source of information, based on the places visited
by users. Such information may be important to model net-
work evolution, since it provides more accurate geographic
information than users’ home locations.
5.2 Mobility-driven closure models
We consider mobility-driven closure models to be two-step
processes. A source node s ﬁrst selects a place p ∈ Ps, where
Ps is the set of all places where node s has checked in; then,
given place p a target note t ∈ Qp is selected, where Qp is
the set of all nodes that have checked in at place p. We
consider diﬀerent strategies that a node u adopts to select a
place p from the set Pu:

0246810h100101102103Dh[km]152random
friends

user-checkins
tot-checkins

tot-users

place-distance
place-gravity

random degree
6.88
11.60
6.59
13.13
12.33
-15.57
7.22

0.28
4.70
0.05
6.09
5.10
-23.41
0.37

deg-diﬀusion
9.24
13.63
8.94
15.18
14.33
-13.21
9.46

user-checkins
0.16
4.74
-0.03
6.14
5.16
-23.56
0.32

tot-checkins
-17.02
-10.63
-17.27
-9.29
-9.96
-40.82
-16.26

inv-tot-checkins
-4.51
-1.56
-4.80
0.04
-1.08
-28.27
-5.29

distance
-19.36
-14.88
-19.69
-13.15
-14.19
-43.67
-19.60

gravity
-7.04
-1.71
-7.41
-0.02
-0.84
-30.17
-6.81

Table 3: Performance of mobility-driven closure models: on each row there is a model to pick the intermediate
place and on each column a model to then pick the target node. The value in each cell gives the percentage
improvement over the baseline, which is the log-likelihood of choosing a node at random among all the nodes
that share at least one place with the source.

Figure 7: Complementary Cumulative Distribution
Function (CCDF) of node lifespan and exponential
ﬁt.

connect. The tot-checkins-degree model has a similar but
slightly inferior performance, yet it is simpler and computa-
tionally faster.

In addition to the models presented in Table 3, we exper-
imented with variations of tot-users and tot-checkins where
we use a probability of attachment inversely proportional
to the total number of users or check-ins. All these models
provided inferior performance compared to the baseline.

6. TEMPORAL EVOLUTION

In this section we study how users create new connections
as they spend more time on the network. We study the
amount of time users remain active for, their lifespan; then,
we investigate the inter-edge temporal gap between the cre-
ation of consecutive edges. In this section we consider only
users that joined the service after our measurement process
started, in order to observe their behavior from the very ﬁrst
moment.
6.1 Node lifespan

We deﬁne the lifespan of a node as the diﬀerence between
the time the node created the last and the ﬁrst edge. Fig-
ure 7 plots the distribution of lifespan for all users: the
distribution shows an approximately exponential behavior,
with a deviation only at longer lifespans for few users who
were early adopters and started using the service from the
very ﬁrst days. The ﬁt is reasonably accurate for a wide
range of lifespan values.

Figure 8: Probability Distribution Function (PDF)
of δ(1), the temporal gap elapsing between the time
when the ﬁrst and the second edge are created by
a user. The ﬁts show a power law, an exponentially
truncated power law and a shifted exponential.

6.2 Inter-edge temporal gap

Diﬀerent users can show signiﬁcant diﬀerences in the pace
they add new edges: users with higher degree create new
ties at a faster rate. Thus, we study δi(k), the temporal gap
between the k-th and k + 1-th edges of user i, for diﬀerent
values of k.

Figure 8 displays the probability distribution of δ(1), the
amount of time between the ﬁrst and the second edges cre-
ated by a user. Even though many users add their second
edge after a few days, some wait for several weeks. The dis-
tribution can be reproduced by diﬀerent functional forms:
an exponentially truncated power law δ(1)−α1 exp(−δ(1)/β1)
yields a slightly higher log-likelihood than a pure power-law,
a shifted exponential and an exponential; the average log-
likelihood improvement over the exponential ﬁt is about 5%.
This result also holds for diﬀerent values of k.

Then, we study the eﬀect of current degree k: in partic-
ular, we are interested in how the probability distribution
of δ(k) changes with k. A ﬁrst indication is given in Fig-
ure 9(a), which plots the average temporal gap (cid:104)δ(k)(cid:105) be-
tween the k-th and k + 1-th edges for diﬀerent values of k:
users with higher degrees tend to wait, on average, for a
shorter amount of time. In fact, users wait on average 20
days before adding their second edge but only 7 days when
they have about 100 friends. While αk tends to be unre-
lated to k, the exponential cut-oﬀ βk becomes smaller as
k grows larger, as seen in Figure 9(b). The ﬁnal eﬀect is
that nodes with higher degrees are more likely to wait for

0100200300400500Nodelifespan(days)10−410−310−210−1100CCDF100101102δ(1)[days]10−410−310−210−1100PDFTrunc.power-lawShiftedexp.Power-law153sults, our aim is now to deﬁne network growth models which
are able to reproduce the spatial and social properties ob-
served in the real network. We stress that the goal of our
models is not to accurately reproduce the network or pre-
dict edge creation events, but to describe the fundamental
mechanisms aﬀecting user behavior.
7.1 Model deﬁnition

Following the methodology presented in [17], we describe
our model as a simple algorithm to grow a network one node,
and one edge, at a time. Our model combines global attach-
ment mechanisms and local closure mechanisms:

1. A new node u joins the network according to a certain

arrival discipline and positions itself over the space;

2. A new node u samples its lifetime from an exponential

distribution;

3. Node u adds its ﬁrst edge to node v according to a
global connection model (preferential or gravity-based
attachment);

4. A node with degree k samples a time gap δ from a dis-
tribution p(δ(k)) ∝ δ(k)−αk exp(−δ(k)/βk) and then
goes to sleep for δ time steps;

5. When a node wakes up, if its lifetime has not expired
yet it creates a new edge: with probability p the node
uses the random−random social triangle-closing model,
otherwise it uses the tot-checkins − degree mobility-
based closure.

6. The node repeats step 4.

The probability p allows us to assess the impact that the
local closure models have on overall accuracy. In particular,
we adopt two variations: we use p = 1 so that the model
only includes social triadic closure, and we adopt p = 0.66
to introduce also mobility-driven closure (this value is mo-
tivated by the observed frequency of edge attachments in
the real data). This yields a total of 4 diﬀerent combina-
tions: gravity-based (G), gravity-based with mobility-driven
closure (GM), preferential attachment (P) and preferential
attachment with mobility-driven closure (PM).

Finally, we note that local closure models only account
for about two-thirds of all new social links. The remaining
fraction includes ties between users that do not share com-
mon friends and that do not visit the same places. Thus, we
introduce a variation into our models whose aim is to adopt
global attachment models also during a node’s lifetime, and
not only in step 3. In more detail, when a node wakes up in
step 5, with probability q = 0.33 it creates an edge according
to the global attachment mechanisms; otherwise, the model
proceeds as deﬁned. This yields 4 additional model combi-
nations, for a total of 8 combinations. We will present our
results separately for combinations that do and do not trig-
ger global attachment mechanisms during a node’s lifetime.

7.2 Evaluation

To test our model we take the real network at the begin-
ning of our measurement, Gt, and simulate its growth by
adding the missing nodes and check-ins, with their real geo-
graphic locations, and the check-ins according to when and
where they happen in the real network. However, once they

(a)

(b)

Figure 9: Average temporal gap (cid:104)δ(k)(cid:105) between the
k-th and k + 1-th edge (a) and exponential cut-
oﬀ βk (b) in the truncated power law p(δ(k)) ∝
δ(k)−αk exp(−δ(k)/βk), as a function of node degree
k.

a shorter time span, as the truncated tail of the power law
P (δ(k)) increasingly constrains larger gap values.

It is not surprising that nodes with higher degree add links
at a higher pace: given a ﬁxed temporal period, as in our
measurement, higher degree nodes add more links than lower
degree ones, so their activity has to be faster in the same
temporal period. Nonetheless, this heterogeneous temporal
behavior is crucial to foster the heterogeneity observed in
the degree distribution of social systems [17].

7. PUTTING IT ALL TOGETHER:

NEW MODELS

We have seen that a gravity-based attachment, combin-
ing spatial distance and node degree, inﬂuences how new
edges are created (in Section 3). At the same time, we
have discussed that triadic and mobility-based closure are
mainly shaped by social factors rather than geographic ones
(in Section 4 and 5). These two mechanisms seem to be
complementary: while the gravity attachment is responsible
for edges connecting together diﬀerent parts of the network,
the closure mechanisms seem involved in the creation of lo-
cal edges between nodes that already share either a friend
or a place. Finally, we have analyzed how nodes tend to
become faster and faster in creating new edges as they get
more connections (in Section 6). Building on all these re-

020406080100k6810121416182022hδ(k)i020406080100k01020304050607080βk154(a) Without global attachment

(b) With global attachment

Figure 10: Probability distribution function (PDF) of node degree for real data and diﬀerent models: gravity-
based (G), gravity-based with mobility-driven closure (GM), preferential attachment (P), preferential attach-
ment with mobility-driven closure (PM).

(a) Without global attachment

(b) With global attachment

Figure 11: Cumulative distribution function (CDF) of link geographic length for real data and diﬀerent
models: gravity-based (G), gravity-based with mobility-driven closure (GM), preferential attachment (P),
preferential attachment with mobility-driven closure (PM).

join the network they add new edges according to our algo-
rithmic model. We stop the evolution when the simulated
network has the same number of nodes as the real one, GT .
All 8 model combinations are run 10 times with diﬀer-
ent random seeds and then their properties are averaged
over all these realizations. When computing the properties
shown in Figures 10, 11, 12 and 13 we only consider edges
added after the start of our measurement period, both in the
real network and in the simulated models, to avoid that the
properties of the initial graph Gt dominate the ﬁnal result.
The degree distribution observed in the real network and
the two models are depicted in Figure 10: all models are able
to reproduce the distribution, capturing the social proper-
ties of the real network. There is no noticeable diﬀerence
between models with and without global attachment. How-
ever, as shown in Figure 11, the probability distribution of
link geographic length is closer to the real one for gravity-
based model, while models P and PM have links with longer
geographic length. We note that models with global attach-
ment have more similar characteristics than those without:
the eﬀect is that models G and GM reproduce better the

real distribution, while social links created by models P and
PM tend to span longer geographic distance. This suggests
a positive eﬀect of a gravity-based global attachment mech-
anism on the accuracy of the model.

Another important diﬀerence between the gravity-based
and the preferential attachment models is highlighted by
considering the geometric average distance of the links of a
user as a function of the node degree. As seen in Figure 12,
models G and GM show an increasing trend as the original
data, while, on the contrary, models P and PM have weaker
correlation between node degree and geographic length of
the links. Again, global attachment emphasizes the dif-
ference between gravity-based and preferential attachment
models, with the ﬁrst ones reproducing more accurately the
real trend. A similar behavior is observed in Figure 13 the
preferential attachment models create triangles on a much
wider geographic scale than models G and GM, which are
closer to the real data.

We note that when mobility-based closure is used results
always marginally improve with respect to models with only
social triadic closure. This performance increase can be

100101102103104Nodedegree10−510−410−310−210−1100PDFDataGPGMPM100101102103104Nodedegree10−510−410−310−210−1100PDFDataGPGMPM100101102103104Linklength[km]0.00.20.40.60.81.0CDFDataGPGMPM100101102103104Linklength[km]0.00.20.40.60.81.0CDFDataGPGMPM155(a) Without global attachment

(b) With global attachment

Figure 12: Average geographic friend distance as a function of node degree for real data and diﬀerent models:
gravity-based (G), gravity-based with mobility-driven closure (GM), preferential attachment (P), preferential
attachment with mobility-driven closure (PM).

(a) Without global attachment

(b) With global attachment

Figure 13: Average geographic triangle length as a function of node degree for real data and diﬀerent models:
gravity-based (G), gravity-based with mobility-driven closure (GM), preferential attachment (P), preferential
attachment with mobility-driven closure (PM).

attributed to the latent geographic information embedded
in user check-ins. The eﬀect of global attachment is even
stronger, as it enhances the accuracy of gravity-based mod-
els, while also reducing the validity of preferential attach-
ment models. These results conﬁrm that the eﬀect of ge-
ographic distance can not be neglected when social net-
works are studied and modeled: preferential attachment
mechanisms need to be modiﬁed into gravity-based mecha-
nisms, which are able to correctly balance the eﬀects of node
attractiveness and the connection costs imposed by spa-
tial distance. Furthermore, mobility-based closure improves
model accuracy, oﬀering additional information about the
geographic whereabouts of online users.

7.3 Implications

The importance of our ﬁndings goes beyond the deﬁnition
of accurate models of network evolution. Our results show
that the eﬀect of geographic distance cannot be neglected
when online social networks are studied and modeled.
In

reality, preferential attachment and triadic closure together
are already able to reproduce the global social properties
observed in real social networks, namely the degree distribu-
tion and the level of clustering. However, neglecting spatial
information about where users are located fails to account
for the eﬀect of distance. In real systems users preferentially
connect over short distances, resulting in a considerable frac-
tion of short-range ties; instead, ignoring spatial constraints
would predict an unlikely majority of long-range connec-
tions. This goes against empirical evidence, both in oﬄine
and online social systems.

Our ﬁndings support the idea that distance has a simple
eﬀect on the creation of social ties: the probability of connec-
tion between two individuals decreases as a negative power of
the spatial distance between them. Yet, this eﬀect must be
combined with a process based on “popularity” or “visibility”
that introduces heterogeneity across users, such as attach-
ment to the best connected nodes, in order to fully recreate
the self-reinforcing mechanisms that lead to the scale-free
degree distributions observed in social graphs.

Gravity mechanisms provide an elegant and insightful way

100101102103Nodedegree102103104Frienddistance[km]DataGPGMPM100101102103Nodedegree102103104Frienddistance[km]DataGPGMPM100101102103104Nodedegree101102103104105Trianglelength[km]DataGPGMPM100101102103104Nodedegree101102103104105Trianglelength[km]DataGPGMPM156of combining the eﬀect of distance and the inﬂuence of social
factors. Surprisingly, the inﬂuence of distance on the forma-
tion of social triads appears negligible, as other factors be-
come more important at this level. The main implication of
the gravity mechanism is that one user may be interested in
another because the other user is hugely popular, regardless
of their spatial distance, or because the other user is spa-
tially close, regardless of popularity and importance. These
mechanisms can be adopted in scenarios where the future
evolution of an online social graph has to be estimated: some
examples include security mechanisms for online services [1],
the design of distributed storage solutions for massive social
graphs [24] and the delivery of user-generated content [29].
The overall picture is that proximity both over physical
and social dimensions fosters the creation of new social links;
the result is that the likelihood of a new connection increases
when two individuals share many other connections or when
two individuals are close to each other. We also point out
that no friend recommendation mechanism was in place on
the online service under analysis during the measurement
period.

This dual role of proximity has promising applications in a
wide range of systems. In particular, despite the abundance
of friend recommendation services, only few of them have
included spatial closeness in their systems [8, 27]. Our work
provides new insights for further research in this direction.

8. RELATED WORK

The temporal patterns of network evolution have been the
focus of many studies and several models have been put for-
ward to describe the basic mechanisms that drive network
growth. A set of works studied the evolution of online social
networks, discussing the densiﬁcation and diameter reduc-
tion observed during the growth of the graph [11, 15]. Even
though online social graphs tend to be have an heteroge-
neous degree distribution in agreement with the preferential
attachment principle, these ﬁndings highlighted that, in so-
cial networks, diﬀerent mechanisms seems to be in place.
More in detail, Leskovec et al. [18] propose a “forest-ﬁre”
copying process: when a new node joins the network and
connects to a ﬁrst neighbor, it starts recursively creating
new links among the neighbors of the ﬁrst neighbor, eﬀec-
tively copying the connection already in place. This process
mixes preferential attachment, as more connected nodes are
more likely to be selected, and transitivity, which fosters
new connections between nodes in social proximity. This
conﬁrms the importance that triadic closure holds for the
evolution of social graphs, as we have seen in our results.

Other works have also been focusing on triadic closure:
Simmel noted that people sharing many friends might be
more likely to become connected [28]. This eﬀect was then
measured in online social networks [19, 14] and included in
growth models. With respect to these results, our work ex-
plores, for the ﬁrst time, the eﬀect of spatial distance on
network evolution: speciﬁcally, we study how distance inﬂu-
ences preferential attachment and triadic closure.

Other works have been focusing on general models for spa-
tial networks. One of the earliest examples is the Waxman
model, where nodes are distributed at random over space
and then connected with probability exponentially decreas-
ing with distance [30]. The Waxman model has also been
modiﬁed as a growth model, where new nodes join the net-

work and connect with a similar rule [12]. Barth´elemy pro-
posed to combine preferential attachment with spatial dis-
tance, studying how the resulting graphs move away from
being scale-free as the eﬀect of spatial distance is increased [4],
albeit this case only considered an exponential decay with
distance as in the original Waxman model. Barrat et al. [3]
also considered a similar model for weighted networks where
preferential attachment is driven by the weight of the exist-
ing connections and hampered by spatial distance. While
these works contain the initial ideas about including spatial
inﬂuence in models of network growth, they were based on
systems such as transportation networks that lacked social
properties. Hence, they tend to focus on an exponential
decay of the probability of connection as a function of dis-
tance, diﬀerently to what observed in social graphs, and they
ignore properties arising from triadic closure. Our contribu-
tion builds on these ﬁndings and bridges together several dif-
ferent insights in order to obtain a suitable model for spatial
social graphs.

Another set of works have investigated the spatial proper-
ties of social networks: the inﬂuence of geographic distance
on social connections was ﬁrstly discussed in the LiveJournal
community [20]. This inﬂuence appears so important that
it can be exploited to predict where people live given their
friends’ locations [1]. Other studies on mobile phone com-
munication networks have found that social triangles tend to
extend over large geographic distances [16] and that commu-
nity detection approaches should take spatial distance into
account to achieve better results [9]. The fostering eﬀect of
geographic proximity on social ties has been demonstrated
considering both purely spatial coincidences [7] and repeated
visits to venues [27]. Our work extends these results by an-
alyzing the eﬀect of spatial distance not on the static struc-
ture of social networks but on their temporal evolution.

Finally, we adopt the maximum likelihood methodology
from and we base our growth model on results presented
in [17], where the evolution of four diﬀerent online social net-
works was discussed. Again, our work diﬀers as it addresses
the eﬀect of geographic distance on the temporal mecha-
nisms that govern network evolution, providing a more com-
plete understanding of the factors driving social behavior.
Furthermore, we describe a model of network growth which
successfully reproduces both social and spatial properties
observed in online social graphs.

9. CONCLUSIONS

In this work we studied the evolution of the social graph
of a location-based service. We collected data about social
links created and places visited by users over a period of 4
months and we studied the eﬀect of spatial factors on the
growth of the network.

We tested diﬀerent models of edge attachment and we
found that on a global scale node degree and spatial distance
simultaneously aﬀect how individuals create social connec-
tions. On the other hand, on a local scale we studied triadic
closure models based on shared friends and on shared places:
in these cases social factors are more important than spa-
tial ones. Finally, we explored the temporal properties of
network evolution, studying how much time users remain
active on the service and how the time elapsed between the
creation of consecutive social connections becomes shorter
as users have more friends.

157Based on our ﬁndings, we deﬁned and tested network
growth models combining a global gravity-based attachment
with local closure models based on shared friends and places.
Our models are able to reproduce the structural and spatial
properties observed in the traces. Our results highlight ba-
sic factors driving social network growth that could impact a
range of research eﬀorts and practical applications. Overall,
this work builds up on previous results and provides further
evidence that spatial factors should not be neglected when
studying and modeling online social services.

Acknowledgments
This research was partly funded by a Google Research Award.

10. REFERENCES
[1] L. Backstrom, E. Sun, and C. Marlow. Find me if you
can: improving geographical prediction with social and
spatial proximity. In Proceedings of WWW’10, 2010.

[2] A.-L. Barab´asi and R. Albert. Emergence of Scaling in

Random Networks. Science, 286(5439), 1999.

[3] A. Barrat, M. Barth´elemy, and A. Vespignani. The

eﬀects of spatial constraints on the evolution of
weighted complex networks. Journal of Statistical
Mechanics, (05), 2005.

[4] M. Barth´elemy. Crossover from scale-free to spatial

networks. Europhysics Letters, 63, 2003.

[5] M. Barth´elemy. Spatial Networks. Physics Reports,

499, 2011.

[6] V. Carrothers. A Historical Review of the Gravity and

Potential Concepts of Human Interaction. Journal of
the American Institute of Planners, 22, 1956.

[7] D. J. Crandall, L. Backstrom, D. Cosley, S. Suri,

D. Huttenlocher, and J. M. Kleinberg. Inferring social
ties from geographic coincidences. PNAS,
107(52):22436–22441, 2010.

[8] J. Cranshaw, E. Toch, J. Hong, A. Kittur, and

N. Sadeh. Bridging the gap between physical location
and online social networks. In Proceedings of
UbiComp’10, Copenhagen, Denmark, 2010.
[9] P. Expert, T. S. Evans, V. D. Blondel, and

R. Lambiotte. Uncovering space-independent
communities in spatial networks. PNAS,
108(19):7663–7668, May 2011.

[10] S. L. Feld. The Focused Organization of Social Ties.

American Journal of Sociology, 86(5):1015–1035, 1981.
[11] D. Fetterly, M. Manasse, M. Najork, and J. Wiener. A

large-scale study of the evolution of web pages. In
Proceedings of WWW’03, 2003.

[12] M. Kaiser and C. C. Hilgetag. Spatial growth of
real-world networks. PRE, 69:036103, Mar 2004.

[13] T. Karagiannis, C. Gkantsidis, D. Narayanan, and

A. Rowstron. Hermes: clustering users in large-scale
e-mail services. In Proceedings of SoCC’10, 2010.

[14] D. Krackhardt and M. S. Handcock. Heider vs

Simmel: emergent features in dynamic structures. In
Proceedings of ICML’06, 2006.

[15] R. Kumar, J. Novak, and A. Tomkins. Structure and

Evolution of Online Social Networks. In Proceedings of
KDD’06, 2006.

[16] R. Lambiotte, V. Blondel, C. Dekerchove, E. Huens,

C. Prieur, Z. Smoreda, and P. Vandooren.
Geographical dispersal of mobile communication
networks. Physica A, 387(21), 2008.

[17] J. Leskovec, L. Backstrom, R. Kumar, and

A. Tomkins. Microscopic evolution of social networks.
In Proceedings of KDD’08, 2008.

[18] J. Leskovec, J. Kleinberg, and C. Faloutsos. Graphs

over time: densiﬁcation laws, shrinking diameters and
possible explanations. In Proceedings of KDD’05, 2005.
[19] D. Liben-Nowell and J. Kleinberg. The link prediction

problem for social networks. In Proceedings of
CIKM’03, 2003.

[20] D. Liben-Nowell, J. Novak, R. Kumar, P. Raghavan,

and A. Tomkins. Geographic routing in social
networks. PNAS, 102(33):11623–11628, 2005.

[21] R. N. Lichtenwalter, J. T. Lussier, and N. V. Chawla.

New perspectives and methods in link prediction. In
Proceedings of KDD’10, 2010.

[22] A. Mislove, M. Marcon, K. P. Gummadi, P. Druschel,

and B. Bhattacharjee. Measurement and Analysis of
Online Social Networks. In Proceedings of IMC ’07,
2007.

[23] J.-P. Onnela, S. Arbesman, M. C. Gonz´alez, A.-L.

Barab´asi, and N. A. Christakis. Geographic
constraints on social network groups. PLoS ONE,
6(4):e16939, 2011.

[24] J. M. Pujol, V. Erramilli, G. Siganos, X. Yang,

N. Laoutaris, P. Chhabra, and P. Rodriguez. The little
engine(s) that could: scaling online social networks. In
Proceedings of SIGCOMM’10, 2010.

[25] D. M. Romero and J. Kleinberg. The Directed Closure

Process in Hybrid Social-Information Networks, with
an Analysis of Link Formation on Twitter. In
Proceedings of ICWSM’11, 2011.

[26] S. Scellato, A. Noulas, R. Lambiotte, and C. Mascolo.

Socio-spatial Properties of Online Location-based
Social Networks. In Proceedings of ICWSM’11, 2011.

[27] S. Scellato, A. Noulas, and C. Mascolo. Exploiting
place features in link prediction on location-based
social networks. In Proceedings of KDD’11, 2011.

[28] G. Simmel. The Sociology of Georg Simmel. The Free

Press, 1908.

[29] S. Traverso, K. Huguenin, V. Trestian, I. Erramilli,

N. Laoutaris, and K. Papagiannaki. TailGate:
Handling Long-Tail Content with a Little Help from
Friends. In Proceedings of WWW’12, 2012.

[30] B. M. Waxman. Routing of multipoint connections.
Selected Areas in Communications, 6(9):1617–1622,
1988.

[31] M. P. Wittie, V. Pejovic, L. Deek, K. C. Almeroth,

and B. Y. Zhao. Exploiting locality of interest in
online social networks. In Proceedings of CONEXT’10,
2010.

[32] C. Wiuf, M. Brameier, O. Hagberg, and M. P. H.

Stumpf. A likelihood approach to analysis of network
data. PNAS, 103(20):7566–7570, 2006.

158